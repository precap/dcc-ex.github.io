<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="DCC-EX DCC DCC++ EX DCC++EX" name="keywords" />
<meta content="EX-RAIL is way to define sequences to execute on your EX-CommandStation. [DCC-EX is a team of dedicated enthusiasts producing, easy to use, affordable, do-it-yourself, open source, DCC solutions to allow you to run your complete model railroad layout.]" name="description" />
<meta content="EX-RAIL Automation Sequences Scripting Language" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EX-RAIL Command Reference &mdash; DCC-EX Model Railroading  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
      <link rel="stylesheet" type="text/css" href="../_static/css/dccex_theme.css?v=f4b9447a" />
      <link rel="stylesheet" type="text/css" href="../_static/css/big_picture_theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/sphinx_design_overrides.css?v=de8b2a37" />
      <link rel="stylesheet" type="text/css" href="../_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="../_static/dark_mode_css/dark.css?v=bfd9ebc6" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://dcc-ex.com/ex-rail/EX-RAIL-command-reference.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/design-tabs.js?v=f930bc37"></script>
        <script src="../_static/js/platform.js?v=e56cde4b"></script>
        <script src="../_static/js/extra.js?v=3424c10e"></script>
        <script src="../_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
        <script src="../_static/dark_mode_js/theme_switcher.js?v=a2af87b2"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="About and History" href="about.html" />
    <link rel="prev" title="Tips and Techniques" href="tips.html" />

     
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X0KNBF0W"></script>
      <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-L5X0KNBF0W');
      </script>
  

<link
  rel="alternate"
  type="application/atom+xml"
  href="../news/atom.xml"
  title="DCC-EX News"
/>



</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a><script async src="https://cse.google.com/cse.js?cx=f19437345086341ed">
</script>
<div class="gcse-search"></div>

<!-- DDG search widget,@author Juri Wornowitski,@version 3.0,@link https://www.plainlight.com/ddg -->
<!-- <div id="widdget" style="width:100%;margin:10px 0;">
    <style type="text/css">
        #widdget input {display:block;height:30px;padding:4px;outline:none;border:1px solid #8d8d8d;border-right:0;box-sizing:border-box;border-radius:3px 0 0 3px;width:calc(100% - 41px);font-size:15px;} 
        #widdget button {float:left;cursor:pointer;width:43px;height:30px;color:#fff;background-image:linear-gradient(#cacaca,#929292);border:0;border-radius:0 3px 3px 0;padding:0;} 
        #widdget button:active {background-image:linear-gradient(#909090,#585858);} 
        #widdget button:focus {outline:none;}
    </style>
    <form style="position:relative" onsubmit="this.elements[0].click();">
        <div style="float:right;position:absolute;top:0;right:-2px;z-index:3">
            <button type="submit" onclick="var v=this.parentElement.parentElement.elements[1].value;if (typeof gtag !== 'undefined') try{gtag('event','search',{'event_label':v});} catch(e){} else if (typeof ga !== 'undefined') try{ga('send','event','engagement','search',v);} catch(e){} window.open('https://duckduckgo.com?q='+encodeURIComponent(v)+'+site%3Ahttps%3A%2F%2Fdcc-ex.com%2F&kj=00a3b9ff&kx=%236c00a2&k9=%2300353d&k8=%23262626');return false;">&#128269;</button>
        </div>
        <input type="text" name="q" placeholder="Search with Duck Duck Go" />
    </form>
</div> -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../begin/what-to-know.html">Lets Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../begin/levels.html">Ready-to-Run or Do-It-Yourself - Choose your Level</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Products</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ex-commandstation/index.html">EX-CommandStation (RTR or DIY)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/ready-to-run/index.html">Ready-To-Run - Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/ready-to-run/purchasing.html">Purchasing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/ready-to-run/connecting.html">EX-CSB1 Quick Setup Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/ready-to-run/wifi-setup.html">WiFi Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/installer-rtr.html">Install the Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/controllers-rtr.html">Choosing a Throttle (Controller)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/testing-rtr.html">Test Your Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting__included-rtr.html">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/ready-to-run/manual.html">EX-CSB1 Operating Manual</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/diy/index.html">Do-It-YourSelf - Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/diy/purchasing.html">Purchasing Parts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/diy/assembly.html">Initial Assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/diy/wifi-setup.html">Adding WiFi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/installer-diy.html">Install the Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/controllers-diy.html">Choosing a Throttle (Controller)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/testing-diy.html">Test Your Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting__included-diy.html">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/wifi-at-version.html">ESP8266 (WiFi Boards) - AT Version Issues and Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/advanced-setup/index.html">DIY - Advanced Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/microcontroller-boards.html">Microcontroller Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-mega.html">Arduino Mega (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/esp32.html">ESP32 (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/stm32-nucleo.html">STMicroelectronics Nucleo (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-uno.html">Arduino Uno (Not recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano.html">Arduino Nano (Not recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/microcontrollers.html">Beta microcontrollers - STM32 Nucleo, ESP32, and SAMD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/wifi-mega.html">Mega+WiFi (Not recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano-every.html">Nano Every (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/teensy.html">Teensy (Deprecated)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">DCC-EX EX-MotorShield8874 - 5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/index.html">Supported Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/direct.html">Direct Connection (USB)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/wifi-setup.html">WiFi Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/ethernet.html">Ethernet Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/bluetooth.html">Bluetooth Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/jmri.html">JMRI Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-wifi/index.html">Supported WiFi Shields and Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/makerfabs-esp8266.html">EX-WiFiShield 8266 (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-wifi/wifi-config.html">WiFi Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../support/wifi-at-version.html">ESP8266 (WiFi Boards) - AT Version Issues and Solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-ethernet/index.html">Supported Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/installation-options/index.html">Installation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-installer/index.html">Install using EX-Installer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/testing.html">Testing your installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/managing-config-files.html">Managing config files</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/installation-options/arduino-ide.html">Install using Arduino IDE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/controllers.html">Choosing a Throttle (Controller) - Advanced</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">Native Commands Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/accessories/index.html">Adding and Controlling Accessories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/index.html">Turnouts/points</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/servo-turnouts.html">Servo driven turnouts/points</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/solenoid-turnouts.html">Solenoid or coil turnouts/points</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/signals/index.html">Signals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/signal-overview.html">Signalling overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/light-signals.html">Light signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/servo-signals.html">Semaphore or servo signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/dcc-signals.html">DCC accessory signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/signal-control.html">Controlling signals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/sensors/index.html">Sensors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/which-sensor-type.html">Which sensor type to use?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/ir-sensor.html">Infrared or IR sensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/vl53l0x-tof-sensor.html">VL53L0X Time of Flight Sensor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/inputs-outputs/index.html">Input and Output Accessories and Expanders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/inputs-outputs/duinonodes.html">Lew’s Duino Gear duinoNodes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/animation.html">Automation and Animation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/turntables/index.html">Turntables and traversers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turntables/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turntables/dcc-turntables.html">DCC Turntables/traversers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-installer/index.html">EX-Installer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/testing.html">Testing your installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/managing-config-files.html">Managing config files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-webthrottle/index.html">EX-WebThrottle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-csb1/index.html">EX-CSB1 Express</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">EX-MotorShield8874</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/hardware/wifi-boards/ex-wifi-shield-8266.html">EX-WiFiShield-8266</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-dccinspector/index.html">EX-DCCInspector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-toolbox/index.html">EX-Toolbox</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-toolbox/overview.html">EX-Toolbox - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-toolbox/using.html">EX-Toolbox - Installing and Using</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EX-CommandStation Add-Ons</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">EX-RAIL (Automation/Animation)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="editing.html">Editing myAutomation.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating-elements.html">Objects - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Sequences - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Example Objects and Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html">Tips and Techniques</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">EX-RAIL Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html">About and History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trackmanager/index.html">TrackManager (DCC &amp; DC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-fastclock/index.html">EX-FastClock</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/hardware.html">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/connect-existing.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/cs-commands.html">Controlling EX-RAIL by Time</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support &amp; Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">Troubleshooting &amp; Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/index-ex-cs.html">EX-CommandStation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-diagnose.html">Diagnosing Basic Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/contact-us.html">Contact Us</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/create-ticket.html">Submit a Support Ticket</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../throttles/index.html">Throttles (Controllers)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../throttles/protocols.html">WiThrottle Server, Web Server, DCC-EX Native Protocol Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/software/index.html">Throttles (Software)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-webthrottle/index.html">EX-Web-Throttle (Web Browser)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/jmri.html">JMRI (Java Model Railroad Interface)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/engine-driver.html">Engine Driver (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/dccpp-cab.html">DCCpp CAB (android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/cab-engineer.html">Cab Engineer: DCC Throttle (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/digitrainspro.html">DigiTrainsPro (Android, iOS, Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/rtdrive-dccpp.html">RtDtive DCC++ (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/withrottle.html">WiThrottle (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/locontrol.html">Locontrol (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/srcpclient.html">SRCP Client (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/train-driver.html">Train Driver (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/train-throttle.html">Train Throttle (Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/android-apps-on-windows.html">Android Apps on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/railroad-automation.html">Railroad Automation (Windows)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/index.html">Throttles (Hardware)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/dccexcontroller.html">DccEXcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/handcab.html">HandCab (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/mybluepillthrottle.html">myBluePillThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/engine-driver-physical-knobs.html">Adding a Physical Dial/Knob to Engine Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/uwt50.html">TCS UWT-50 &amp; UWT-100 WiFi Throttles (Physical)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/connect_wifi_throttle_via_usb.html">Connecting WiFi Throttles via USB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/native-protocol-library.html">DCC-EX Native command library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../big-picture/index.html">The Big Picture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/big-picture.html">How it All Works Together</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage1.html">Stage 1 - Running a Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage2.html">Stage 2 - Adding a Roster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage3.html">Stage 3 - Turnouts/Points, Accessories, Sensors &amp; Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage4.html">Stage 4 - Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage5.html">Stage 5 - Turntables &amp; Traversers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage5/turntable-example.html">Example - Turntable ROUTEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage5/traverser-example.html">Example - Turntable and traverser ROUTEs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage6.html">Stage 6 - Putting it all Together</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example1.html">Example 1 ROUTEs with turnouts/points/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example2.html">Example 2 ROUTEs with turnouts/points/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example3.html">Example 3 ROUTEs with turnouts/points/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example4.html">Example 4 ROUTEs with turnouts/points/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example5.html">Example 5 Full automation with turnouts/points &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example6.html">Example 6 Full automation with turnouts/points &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example7.html">Example 7 Full automation with turnouts/points &amp; signals</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Downloads</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-commandstation.html">EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/esp8266.html">ESP8266 (WiFi Boards)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-dccinspector.html">EX-DCCInspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-turntable.html">EX-Turntable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-ioexpander.html">EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-fastclock.html">EX-FastClock</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Purchasing &amp; Merchandise</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../purchasing/dealers.html">DCC-EX Official Dealers / Resellers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../merchandise/index.html">DCC-EX Merchandise</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Detailed Information</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../reference/index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/videos/index.html">Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/downloads/index.html">Documents and Schematics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/index-decoder.html">Decoders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/decoder-notes.html">Decoder Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wire-gauge.html">DCC Track Wiring Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/microcontroller-boards.html">Microcontroller Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-mega.html">Arduino Mega (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/esp32.html">ESP32 (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/stm32-nucleo.html">STMicroelectronics Nucleo (Recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-uno.html">Arduino Uno (Not recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano.html">Arduino Nano (Not recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/microcontrollers.html">Beta microcontrollers - STM32 Nucleo, ESP32, and SAMD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/wifi-mega.html">Mega+WiFi (Not recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano-every.html">Nano Every (Deprecated)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/teensy.html">Teensy (Deprecated)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">DCC-EX EX-MotorShield8874 - 5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wifi-boards.html">WiFi Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/ex-wifi-shield-8266.html">DCC-EX EX-WiFiShield 8266</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/makerfabs-esp8266.html">EX-WiFiShield 8266 (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/wangtongze-board.html">WangTongze Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/sparkfun-thing-plus.html">SparkFun Thing Plus (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp32-ant-01.html">ESP32_Ant-01 Breakout and Development Board (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/hc12-bridge.html">HC-12 Wireless Bridge</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/ethernet-boards.html">Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/index-i2c.html">I2C Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-multiplexers.html">I2C Multiplexers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/accessory-controllers.html">Accessory Controllers</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../reference/software/index.html">Software</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">DCC-EX Native Commands Summary Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/index-dcpp-commands.html">DCC-EX Native Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">DCC-EX Native Commands Summary Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/native-protocol-library.html">DCC-EX Native command protocol library - DCCEXProtocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/programming-locos.html">Programming Locos (CVs)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">EX-RAIL Command Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/withrottle-vs-native-commands.html">WiThrottle Protocol VS DCC-EX Native Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">Native Commands Summary</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">EX-RAIL Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/developers/index.html">Developer and API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/api.html">DCC-EX Native API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/hal.html">DCC-EX HAL Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/writing-hal-driver.html">Writing a HAL Driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/serial-monitor.html">Using a Serial Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/index-diagnostics-d.html">Diagnostic d Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/tools/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/tools/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../under-development/index.html">Features under development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/index.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../projects/ProMiniAir_Transmitter_w_CommandStation.html">Battery Power, Radio Control: ProMiniAir Transmitter Integrated with a WiFi-equipped <a href="../ex-commandstation/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span></a> (PMA Tx/WCS)</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../external-references/index.html">Articles and Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external-references/standards.html">Standards &amp; technical references</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The DCC-EX Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Us and the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/about.html">Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/licence.html">Licence &amp; Attributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/roadmap.html">DCC-EX 2023 Roadmap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index-contributing.html">Donating &amp; Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/contributing/donate.html">Donate to Our Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/media-resources/index.html">Media Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/contributing/index.html"> Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/github.html">GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/software.html">Recommended Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/development.html">Contributing to the Hardware &amp; Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/webthrottle.html">Contributing to EX-WebThrottle2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/website/index.html">Contributing to the Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/requirements.html">What You Need to Know/Learn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/getting-started.html">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/structure.html">Folder and Page Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/basic-rst.html">ReStructuredText Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/style-guide.html">Style Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/publishing-news.html">Publishing DCC-EX News Posts</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
  
    <li class="toctree-l1"><a href="https://dcc-ex.com/news.html">DCC-EX News</a></li>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DCC-EX Model Railroading</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">EX-RAIL (Automation/Animation)</a></li>
      <li class="breadcrumb-item active">EX-RAIL Command Reference</li>
  
    
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/ex-rail/EX-RAIL-command-reference.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
<p><a class="image-product-logo-float-right reference internal" href="../_images/product-logo-ex-rail.png"><img alt="EX-RAIL" class="image-product-logo-float-right" src="../_images/product-logo-ex-rail.png" style="width: 320.0px; height: 64.0px;" /></a></p>
<section id="ex-rail-command-reference">
<h1>EX-RAIL Command Reference<a class="headerlink" href="#ex-rail-command-reference" title="Link to this heading"></a></h1>
<p><a class="reference internal" href="../_images/level-suitable-for.png"><img alt="Suitable For Level:" src="../_images/level-suitable-for.png" style="width: 110.4px; height: 36.0px;" /></a> <a class="reference external" href="../begin/levels.html#tinkerer"><img alt="Propeller Beanie" src="../_images/tinkerer-level.png" style="width: 135.6px; height: 36.0px;" /></a> <a class="reference external" href="../begin/levels.html#engineer"><img alt="Engineer Hat" src="../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a> <a href="../support/index.html#contact-support-options" title="Request help or support"><img src="../_static/images/buttons/support.png" style="height: 33px;" /></a></p>
<aside class="sidebar">
<nav class="contents local" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introductory-information" id="id26">Introductory Information</a></p>
<ul>
<li><p><a class="reference internal" href="#conventions-used-on-this-page" id="id27">Conventions used on this page</a></p></li>
<li><p><a class="reference internal" href="#handy-information" id="id28">Handy information</a></p></li>
<li><p><a class="reference internal" href="#correct-use-of-done-endif-and-follow-statements" id="id29">Correct use of DONE, ENDIF, and FOLLOW() statements</a></p></li>
<li><p><a class="reference internal" href="#at-vpin-or-after-vpin-debouncetime-versus-if-vpin" id="id30">AT(vpin) or AFTER(vpin [,debounceTime]) versus IF(vpin)</a></p></li>
<li><p><a class="reference internal" href="#interactive-diagnostics-and-control" id="id31">Interactive diagnostics and control</a></p></li>
<li><p><a class="reference internal" href="#aliases" id="id32">Aliases</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alphabetic-command-list" id="id33">Alphabetic Command List</a></p></li>
<li><p><a class="reference internal" href="#flow-control" id="id34">Flow Control</a></p>
<ul>
<li><p><a class="reference internal" href="#scripts-sequences-types-and-control" id="id35">Scripts/Sequences - Types and Control</a></p></li>
<li><p><a class="reference internal" href="#conditional-statements" id="id36">Conditional Statements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#objects-definition-and-control" id="id37">Objects - Definition and Control</a></p>
<ul>
<li><p><a class="reference internal" href="#create-and-manage-hal-device-objects" id="id38">Create and manage HAL device objects</a></p></li>
<li><p><a class="reference internal" href="#signal-objects-definition-and-control" id="id39">Signal Objects - Definition and Control</a></p></li>
<li><p><a class="reference internal" href="#turnout-point-objects-definition-and-control" id="id40">Turnout/Point Objects - Definition and Control</a></p></li>
<li><p><a class="reference internal" href="#turntable-traverser-objects-definition-and-control" id="id41">Turntable/Traverser Objects - Definition and Control</a></p></li>
<li><p><a class="reference internal" href="#sensors-inputs-reading-and-responding" id="id42">Sensors/Inputs - Reading and Responding</a></p></li>
<li><p><a class="reference internal" href="#output-and-led-control" id="id43">Output and LED control</a></p></li>
<li><p><a class="reference internal" href="#servo-control" id="id44">Servo Control</a></p></li>
<li><p><a class="reference internal" href="#dcc-accessory-decoder-control" id="id45">DCC Accessory Decoder Control</a></p></li>
<li><p><a class="reference internal" href="#ex-fastclock-event-handlers" id="id46">EX-FastClock Event Handlers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#locos-and-tracks" id="id47">Locos and Tracks</a></p>
<ul>
<li><p><a class="reference internal" href="#locos-definition-and-control" id="id48">Locos - Definition and Control</a></p></li>
<li><p><a class="reference internal" href="#trackmanager-control" id="id49">TrackManager Control</a></p></li>
<li><p><a class="reference internal" href="#controlling-overload-shorts" id="id50">Controlling Overload/Shorts</a></p></li>
<li><p><a class="reference internal" href="#virtual-block-control" id="id51">Virtual Block Control</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#system" id="id52">System</a></p>
<ul>
<li><p><a class="reference internal" href="#communication-and-display-functions" id="id53">Communication and Display Functions</a></p></li>
<li><p><a class="reference internal" href="#commandstation-functions" id="id54">CommandStation Functions</a></p></li>
<li><p><a class="reference internal" href="#layout-command-control-lcc" id="id55">Layout Command Control (LCC)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-engineers-only" id="id56">Advanced (Engineers only)</a></p>
<ul>
<li><p><a class="reference internal" href="#caution-required" id="id57">Caution required!</a></p></li>
</ul>
</li>
</ul>
</nav>
</aside>
<p><a href="../ex-commandstation/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span></a> provides full automation and accessory control through the Extended Railroad Automation Instruction Language (<a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a>).</p>
<p>This page includes a reference for all available <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> commands.</p>
<p>See Also:</p>
<ul class="simple">
<li><p><a class="reference internal" href="getting-started.html"><span class="doc">Introduction to EX-RAIL</span></a></p></li>
<li><p><a class="reference internal" href="examples.html"><span class="doc">Example Objects and Sequences</span></a></p></li>
</ul>
<hr class="docutils" />
<section id="introductory-information">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Introductory Information</a><a class="headerlink" href="#introductory-information" title="Link to this heading"></a></h2>
<section id="conventions-used-on-this-page">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">Conventions used on this page</a><a class="headerlink" href="#conventions-used-on-this-page" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>CAPITALISED words - These are EX-RAIL commands and are case sensitive</p></li>
<li><p>lowercase words within brackets/braces <code class="docutils literal notranslate"><span class="pre">()</span></code> - These are EX-RAIL parameters that must be provided, with multiple parameters separated by a comma <code class="docutils literal notranslate"><span class="pre">,</span></code>, for example <code class="docutils literal notranslate"><span class="pre">SEQUENCE(id)</span></code> or <code class="docutils literal notranslate"><span class="pre">DELAYRANDOM(min_delay,</span> <span class="pre">max_delay)</span></code></p></li>
<li><p>Quoted <code class="docutils literal notranslate"><span class="pre">&quot;text&quot;</span></code> - Text within quote marks <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> are used as descriptions, and must include the quote characters, for example <code class="docutils literal notranslate"><span class="pre">ROUTE(id,</span> <span class="pre">&quot;description&quot;)</span></code> becomes <code class="docutils literal notranslate"><span class="pre">ROUTE(1,</span> <span class="pre">&quot;This</span> <span class="pre">is</span> <span class="pre">the</span> <span class="pre">route</span> <span class="pre">description&quot;)</span></code></p></li>
<li><p>Square brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code> - Parameters within square brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code> are optional and may be ommitted. If specifying these parameters, do not include the square brackets themselves, for example <code class="docutils literal notranslate"><span class="pre">ALIAS(name[,</span> <span class="pre">value])</span></code> becomes <code class="docutils literal notranslate"><span class="pre">ALIAS(MY_ALIAS)</span></code> or <code class="docutils literal notranslate"><span class="pre">ALIAS(MY_ALIAS,</span> <span class="pre">3)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">|</span></code> - Use of the <code class="docutils literal notranslate"><span class="pre">|</span></code> character means you need to provide one of the provided options only, for example <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">POWER</span> <span class="pre">ON|OFF&gt;</span></code> becomes either <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">POWER</span> <span class="pre">ON&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">POWER</span> <span class="pre">OFF&gt;</span></code></p></li>
</ul>
</section>
<section id="handy-information">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Handy information</a><a class="headerlink" href="#handy-information" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>COMMANDS are case sensitive. i.e. they must be in uppercase. Text parameters you provide (aliases,  descriptions) are not</p></li>
<li><p><em>AUTOMATION</em>, <em>ROUTE</em>, and <em>SEQUENCE</em> use the same ID number space, so a <code class="docutils literal notranslate"><span class="pre">FOLLOW(n)</span></code> command can be used for any of them</p></li>
<li><p>Sensors and outputs used by AT/AFTER/SET/RESET/LATCH/UNLATCH/SERVO/IF/IFNOT refer directly to Arduino pins, and those handled by I<sup>2</sup>C expansion (as virtual pins or vpins).</p></li>
<li><p>Signals also refer directly to pins, and the signal ID (for RED/AMBER/GREEN) is always the same as the RED signal pin</p></li>
<li><p>It’s OK to use sensor IDs that have no physical item in the layout. These can only be LATCHed, tested (IF/IFNOT), or UNLATCHed in the sequences. If a sensor is latched by the sequence, it can only be unlatched by the sequence so <code class="docutils literal notranslate"><span class="pre">AT(35)</span> <span class="pre">LATCH(35)</span></code> for example, effectively latches sensor 35 on when detected once</p></li>
<li><p>All IDs used in commands and functions will be numbers, or an ALIAS name if configured</p></li>
<li><p>Most IDs simply need to be unique, however RESERVE/FREE and LATCH/UNLATCH must be in the range 0 - 255</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are four uses of ID numbers in EX-RAIL:</p>
<ul class="simple">
<li><p>AUTOMATION, ROUTE, and SEQUENCE IDs</p></li>
<li><p>Turnout/Point IDs</p></li>
<li><p>Vpins - Includes physical pins on the CommandStation, virtual pins (Vpins) on I/O expander modules, and virtual pins that have no physical presence</p></li>
<li><p>Virtual block IDs as used in RESERVE/FREE</p></li>
</ul>
<p>Therefore, you can have an AUTOMATION, a turnout/point, a Vpin, and a virtual block all defined with the same ID without issue as these will not relate to each other. This is probably a great reason to consider aliases to avoid confusion.</p>
</div>
</section>
<section id="correct-use-of-done-endif-and-follow-statements">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Correct use of DONE, ENDIF, and FOLLOW() statements</a><a class="headerlink" href="#correct-use-of-done-endif-and-follow-statements" title="Link to this heading"></a></h3>
<p>Every <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> automation/route/sequence, event handler, and conditional statement must be terminated by one of these three directives.</p>
<p>On this page, you will see various references to the use of <code class="docutils literal notranslate"><span class="pre">DONE</span></code>, <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code>, and <code class="docutils literal notranslate"><span class="pre">FOLLOW()</span></code> which can be confusing, so refer to this quick list to help understand the context in which each of these should be used:</p>
<ul class="simple">
<li><p>Every conditional statement (all directives starting with the word <code class="docutils literal notranslate"><span class="pre">IF</span></code>) must be terminated by <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code></p></li>
<li><p>Every group of commands within a ROUTE, AUTOMATION, or SEQUENCE must be terminated by either <code class="docutils literal notranslate"><span class="pre">DONE</span></code> or <code class="docutils literal notranslate"><span class="pre">FOLLOW(id)</span></code></p></li>
<li><p>Every event handler (all directives starting with the word <code class="docutils literal notranslate"><span class="pre">ON</span></code>) must be terminated by <code class="docutils literal notranslate"><span class="pre">DONE</span></code></p></li>
</ul>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Valid use of a ROUTE with a nested IF statement</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to be done when sensor ID 46 is active</span>
<span class="w">  </span><span class="n">ELSE</span>
<span class="w">    </span><span class="c1">// Things to be done when sensor ID 46 is inactive</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="c1">// Validate use of a sequence that needs to run continuously</span>
<span class="c1">// DONE is not required in this instance</span>
<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to be done when sensor ID 46 is active</span>
<span class="w">  </span><span class="n">ELSE</span>
<span class="w">    </span><span class="c1">// Things to be done when sensor ID 46 is inactive</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">// Validate use of a turnout event handler for turnout ID 200</span>
<span class="n">ONCLOSE</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// Things to be done when turnout 200 is closed</span>
<span class="w">  </span><span class="n">DONE</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
<section id="at-vpin-or-after-vpin-debouncetime-versus-if-vpin">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">AT(vpin) or AFTER(vpin [,debounceTime]) versus IF(vpin)</a><a class="headerlink" href="#at-vpin-or-after-vpin-debouncetime-versus-if-vpin" title="Link to this heading"></a></h3>
<p>When defining conditions, the behaviour of <code class="docutils literal notranslate"><span class="pre">AT()</span></code> and <code class="docutils literal notranslate"><span class="pre">AFTER()</span></code> is quite different to using conditional <code class="docutils literal notranslate"><span class="pre">IF()</span></code> statements.</p>
<p>This applies to all directives starting with <code class="docutils literal notranslate"><span class="pre">AT</span></code>, <code class="docutils literal notranslate"><span class="pre">AFTER</span></code>, and <code class="docutils literal notranslate"><span class="pre">IF</span></code>.</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">AT()</span></code> or <code class="docutils literal notranslate"><span class="pre">AFTER()</span></code>, this is a blocking activity, meaning the sequence of activities will not progress beyond this particular directive unless the condition is met.</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">IF</span></code> conditional statements, these will not block if the condition is not met, allowing the sequence of activities to continue.</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Use of AT() to prevent doing anything until a sensor is activated</span>
<span class="c1">// This sequence will continue to run until the sensor is activated, in which case those activities will be performed, and it will end</span>
<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to do when sensor 46 is activated</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="c1">// Use of IF() to continuously monitor a number of sensors</span>
<span class="c1">// This sequence will continually loop to monitor the sensors, meaning the activities related to each sensor are not blocked by the state of other sensors</span>
<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to do if sensor 46 is activated</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">47</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to do if sensor 47 is activated</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">48</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to do if sensor 48 is activated</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
<hr class="docutils" />
<section id="interactive-diagnostics-and-control">
<h3><a class="toc-backref" href="#id31" role="doc-backlink">Interactive diagnostics and control</a><a class="headerlink" href="#interactive-diagnostics-and-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="in-this-section">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#d-exrail-state-enable-or-disable-ex-rail-sequence-logging" id="id58"><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">EXRAIL</span> <span class="pre">state&gt;</span></code> - Enable or disable EX-RAIL sequence logging</a></p></li>
<li><p><a class="reference internal" href="#pause-pause-all-ex-rail-automation-activities" id="id59"><code class="docutils literal notranslate"><span class="pre">&lt;/PAUSE&gt;</span></code> - Pause ALL EX-RAIL automation activities</a></p></li>
<li><p><a class="reference internal" href="#resume-resume-all-ex-rail-automation-activities" id="id60"><code class="docutils literal notranslate"><span class="pre">&lt;/RESUME&gt;</span></code> - Resume <strong>ALL</strong> EX-RAIL automation activities</a></p></li>
<li><p><a class="reference internal" href="#display-ex-rail-running-task-information" id="id61"><code class="docutils literal notranslate"><span class="pre">&lt;/&gt;</span></code> - Display EX-RAIL running task information</a></p></li>
<li><p><a class="reference internal" href="#start-loco-addr-route-id-start-route-optionally-using-specified-loco" id="id62"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">START</span> <span class="pre">[loco_addr]</span> <span class="pre">route_id&gt;</span></code> - Start route, optionally using specified loco</a></p></li>
<li><p><a class="reference internal" href="#kill-task-id-kills-a-currently-running-sequence" id="id63"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">KILL</span> <span class="pre">task_id&gt;</span></code> - Kills a currently running sequence</a></p></li>
<li><p><a class="reference internal" href="#reserve-block-id-manually-reserves-a-virtual-track-block" id="id64"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">RESERVE</span> <span class="pre">block_id&gt;</span></code> - Manually reserves a virtual track Block</a></p></li>
<li><p><a class="reference internal" href="#free-block-id-manually-frees-a-virtual-track-block" id="id65"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">FREE</span> <span class="pre">block_id&gt;</span></code> - Manually frees a virtual track Block</a></p></li>
<li><p><a class="reference internal" href="#latch-vpin-lock-sensor-on-preventing-external-influence" id="id66"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">LATCH</span> <span class="pre">vpin&gt;</span></code> - Lock sensor ON, preventing external influence</a></p></li>
<li><p><a class="reference internal" href="#unlatch-vpin-unlock-sensor-returning-to-current-external-state" id="id67"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">UNLATCH</span> <span class="pre">vpin&gt;</span></code> - Unlock sensor, returning to current external state</a></p></li>
</ul>
</nav>
<p>Various diagnostic and control commands have been added to control and interact with <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a>, including the various sequences and objects once they have been defined in myAutomation.h and uploaded to the <a href="../ex-commandstation/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span></a>.</p>
<p>These commands can be run interactively via the serial console or over Ethernet/WiFi if using a throttle or client that provides a suitable interface for sending native DCC-EX commands.</p>
<p><hr class="hr-dashed" /></p>
<section id="d-exrail-state-enable-or-disable-ex-rail-sequence-logging">
<h4><a class="toc-backref" href="#id58" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">EXRAIL</span> <span class="pre">state&gt;</span></code> - Enable or disable EX-RAIL sequence logging</a><a class="headerlink" href="#d-exrail-state-enable-or-disable-ex-rail-sequence-logging" title="Link to this heading"></a></h4>
<p>When the CommandStation is connected to a serial monitor, EX-RAIL sequence logging can be turned on or off (Enabled or Disabled).</p>
<blockquote>
<div><details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>Example output from <a class="reference internal" href="examples.html#point-to-point-shuttle"><span class="std std-ref">Point to Point Shuttle</span></a> running SEQUENCE(13) with loco ID 18:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">D</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">ON</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">p1</span><span class="w"> </span><span class="n">MAIN</span><span class="o">&gt;</span>
<span class="n">PPA1</span>
<span class="o">&lt;</span><span class="mi">1</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">178</span><span class="w"> </span><span class="mi">0</span><span class="o">&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">Sensor</span><span class="w"> </span><span class="mi">42</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">Sensor</span><span class="w"> </span><span class="mi">42</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">drive</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;</span><span class="mi">1</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">128</span><span class="w"> </span><span class="mi">0</span><span class="o">&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">drive</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;</span><span class="mi">1</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">0</span><span class="o">&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">Sensor</span><span class="w"> </span><span class="mi">41</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">Sensor</span><span class="w"> </span><span class="mi">41</span><span class="w"> </span><span class="n">hit</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">drive</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;</span><span class="mi">1</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="o">&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">begin</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">begin</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">drive</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*&gt;</span>
<span class="o">&lt;</span><span class="mi">1</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">178</span><span class="w"> </span><span class="mi">0</span><span class="o">&gt;</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pause-pause-all-ex-rail-automation-activities">
<h4><a class="toc-backref" href="#id59" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/PAUSE&gt;</span></code> - Pause ALL EX-RAIL automation activities</a><a class="headerlink" href="#pause-pause-all-ex-rail-automation-activities" title="Link to this heading"></a></h4>
<p>Pauses <strong>ALL</strong> EX-RAIL automation activities, including sending an E-STOP to all locos.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="resume-resume-all-ex-rail-automation-activities">
<h4><a class="toc-backref" href="#id60" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/RESUME&gt;</span></code> - Resume <strong>ALL</strong> EX-RAIL automation activities</a><a class="headerlink" href="#resume-resume-all-ex-rail-automation-activities" title="Link to this heading"></a></h4>
<p>Resume <strong>ALL</strong> EX-RAIL automation activities, and resumes all locos at the same speed at which they were paused.</p>
</section>
<section id="display-ex-rail-running-task-information">
<h4><a class="toc-backref" href="#id61" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/&gt;</span></code> - Display EX-RAIL running task information</a><a class="headerlink" href="#display-ex-rail-running-task-information" title="Link to this heading"></a></h4>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>Example outputs also using <a class="reference internal" href="examples.html#point-to-point-shuttle"><span class="std std-ref">Point to Point Shuttle</span></a>:</p>
<ul class="simple">
<li><p>Leaving right side of the shuttle sequence with speed 50F (forward):</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;/&gt;</span>
<span class="o">&lt;</span><span class="mi">1</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">178</span><span class="w"> </span><span class="mi">0</span><span class="o">&gt;</span>
<span class="o">&lt;*</span><span class="w"> </span><span class="n">EXRAIL</span><span class="w"> </span><span class="n">STATUS</span>
<span class="n">ID</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">PC</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">LOCO</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="p">,</span><span class="n">SPEED</span><span class="o">=</span><span class="mf">0F</span>
<span class="n">ID</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">PC</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">LOCO</span><span class="o">=</span><span class="mi">18</span><span class="w"> </span><span class="p">,</span><span class="n">SPEED</span><span class="o">=</span><span class="mf">50F</span><span class="w"> </span><span class="o">*&gt;</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="start-loco-addr-route-id-start-route-optionally-using-specified-loco">
<h4><a class="toc-backref" href="#id62" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">START</span> <span class="pre">[loco_addr]</span> <span class="pre">route_id&gt;</span></code> - Start route, optionally using specified loco</a><a class="headerlink" href="#start-loco-addr-route-id-start-route-optionally-using-specified-loco" title="Link to this heading"></a></h4>
<p>Starts a new task to send a loco onto a Route, or activate a non-loco Animation or Sequence.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="kill-task-id-kills-a-currently-running-sequence">
<h4><a class="toc-backref" href="#id63" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">KILL</span> <span class="pre">task_id&gt;</span></code> - Kills a currently running sequence</a><a class="headerlink" href="#kill-task-id-kills-a-currently-running-sequence" title="Link to this heading"></a></h4>
<p>Kills a currently running sequence task by ID</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="reserve-block-id-manually-reserves-a-virtual-track-block">
<h4><a class="toc-backref" href="#id64" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">RESERVE</span> <span class="pre">block_id&gt;</span></code> - Manually reserves a virtual track Block</a><a class="headerlink" href="#reserve-block-id-manually-reserves-a-virtual-track-block" title="Link to this heading"></a></h4>
<p>Manually reserves a virtual track Block, valid IDs are in the range 0 - 255</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="free-block-id-manually-frees-a-virtual-track-block">
<h4><a class="toc-backref" href="#id65" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">FREE</span> <span class="pre">block_id&gt;</span></code> - Manually frees a virtual track Block</a><a class="headerlink" href="#free-block-id-manually-frees-a-virtual-track-block" title="Link to this heading"></a></h4>
<p>Manually frees a virtual track Block, valid IDs are in the range 0 - 255.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="latch-vpin-lock-sensor-on-preventing-external-influence">
<h4><a class="toc-backref" href="#id66" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">LATCH</span> <span class="pre">vpin&gt;</span></code> - Lock sensor ON, preventing external influence</a><a class="headerlink" href="#latch-vpin-lock-sensor-on-preventing-external-influence" title="Link to this heading"></a></h4>
<p>Lock sensor ON, preventing external influence, valid IDs are in the range 0 - 255.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="unlatch-vpin-unlock-sensor-returning-to-current-external-state">
<h4><a class="toc-backref" href="#id67" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">UNLATCH</span> <span class="pre">vpin&gt;</span></code> - Unlock sensor, returning to current external state</a><a class="headerlink" href="#unlatch-vpin-unlock-sensor-returning-to-current-external-state" title="Link to this heading"></a></h4>
<p>Unlock sensor, returning to current external state, valid IDs are in the range 0 - 255.</p>
<p>Refer to the LATCH/UNLATCH commands in the <a class="reference internal" href="#sensors-inputs-reading-and-responding"><span class="std std-ref">Sensors/Inputs - Reading and Responding</span></a> section below for further details.</p>
</section>
</section>
<hr class="docutils" />
<section id="aliases">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Aliases</a><a class="headerlink" href="#aliases" title="Link to this heading"></a></h3>
<section id="alias-name-value-assigns-name-to-a-value">
<h4><code class="docutils literal notranslate"><span class="pre">ALIAS(</span> <span class="pre">name[,</span> <span class="pre">value]</span> <span class="pre">)</span></code> - Assigns name to a value<a class="headerlink" href="#alias-name-value-assigns-name-to-a-value" title="Link to this heading"></a></h4>
<p>Aliases assigns names to values. They can go anywhere in the sequence. If a value is not assigned, a unique ID will be assigned based on the alias “name” text.</p>
<p>This is a simple substitution that lets you have readable names for things in your sequence. For example, instead of having to remember the VPin a turnout/point is connected to, give the pin number an alias and refer to it by that name. You can use this to name routes, values, pin numbers, or anything you need.</p>
<p>If you simply need a unique identifier for an object used internally to the sequence, such as a turnout/point, route, automation, or sequence, you don’t even need to provide an ID, EX-RAIL will generate one automatically when you omit the value parameter. We recommend using this for all your routes, sequences, and other internal objects so you don’t have to try to remember or keep a list of numbers you’ve used. This also prevents you from assigning the same number to more than one object.</p>
<p>REMEMBER: IDs for RESERVE/FREE, LATCH/UNLATCH, and pins must be explicitly defined.</p>
<p>To put this another way, if you connect an LED to pin 23 and want to turn it on and off, you have to explicitly set its pin number, so <cite>ALIAS(TOWER_LED, 23)</cite> lets you equate “23” to TOWER_LED. But if you created a route to run your train around an oval, you don’t really need to set the number or even know it. Just use <cite>ALIAS(OVAL)</cite> and let EX assign a number internally. If you ever wanted to know what number it assigns, you can enter <cite>&lt;? OVAL&gt;</cite> from the serial monitor with the Command Station running and it will tell you next to “Opcode=”. Since this “hash”, as it is called, is generated by the alias name word, it is always unique and always the same for that word even if you have not created the alias yet. Fun fact, “OVAL” will always equal 27500.</p>
<p>Alias naming rules:</p>
<ul class="simple">
<li><p><strong>Must not</strong> be an existing EX-RAIL command name or other reserved word.</p></li>
<li><p><strong>Should be</strong> reasonably short but descriptive.</p></li>
<li><p><strong>Must start</strong> with letters A-Z, a-z, or underscore _ (case sensitive!).</p></li>
<li><p><strong>May then</strong> also contain numbers.</p></li>
<li><p><strong>Must not</strong> contain spaces or special characters.</p></li>
</ul>
<p><em>Parameters:</em> <br /> &gt; <strong>name</strong> - name for the Alias.  See rules above <br /> &gt; <strong>value</strong> - value to insert in place of the Alias</p>
<blockquote>
<div><details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>Defining a pin turnout/point without an alias:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">PIN_TURNOUT</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Coal Yard&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Defining a pin turnout/point with aliases:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ALIAS</span><span class="p">(</span><span class="n">COAL_YARD</span><span class="p">)</span>
<span class="n">ALIAS</span><span class="p">(</span><span class="n">COAL_YARD_PIN</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">)</span>
<span class="n">PIN_TURNOUT</span><span class="p">(</span><span class="n">COAL_YARD</span><span class="p">,</span><span class="w"> </span><span class="n">COAL_YARD_PIN</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Coal Yard&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that you could have used the command <cite>ALIAS(COAL_YARD, 1)</cite> in the example above to explicitly set the number, but unless you have a reason to use specific numbers, let the Command Station do it for you.</p>
<p>In this simple example, aliases seem like overkill, however consider the case where you need to have the “Coal Yard” turnout/point closed or thrown in various different automation sequences, and you will soon see why it’s easier to understand you’re throwing the COAL_YARD turnout/point rather than turnout/point ID 12345.</p>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="alphabetic-command-list">
<h2><a class="toc-backref" href="#id33" role="doc-backlink">Alphabetic Command List</a><a class="headerlink" href="#alphabetic-command-list" title="Link to this heading"></a></h2>
<details class="summary-full-alphabetic-list-of-commands-click-to-show">
<summary>Full Alphabetic list of commands: (click to show)</summary><ul class="simple">
<li><p><a class="reference internal" href="#acof"><span class="std std-ref">ACOF(eventid) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#acon"><span class="std std-ref">ACON(eventid) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#after"><span class="std std-ref">AFTER( vpin [,debounce_time] ) - Halt command execution until the sensor is cleared</span></a></p></li>
<li><p><a class="reference internal" href="#afteroverload"><span class="std std-ref">AFTEROVERLOAD( track ) - Event handler for when an Overload clears</span></a></p></li>
<li><p><a class="reference internal" href="#amber"><span class="std std-ref">AMBER( signal_id ) - Set a defined signal to Amber</span></a></p></li>
<li><p><a class="reference internal" href="#aspect"><span class="std std-ref">ASPECT( address, aspect ) - Command for DCC Extended Accessories</span></a></p></li>
<li><p><a class="reference internal" href="#at"><span class="std std-ref">AT( vpin ) - Halt command execution until the sensor is set</span></a></p></li>
<li><p><a class="reference internal" href="#atgte"><span class="std std-ref">ATGTE( vpin, value ) - Waits for an analog pin to reach a value</span></a></p></li>
<li><p><a class="reference internal" href="#atlt"><span class="std std-ref">ATLT ( vpin, value ) - Waits for an analog pin to go below a value</span></a></p></li>
<li><p><a class="reference internal" href="#attimeout1"><span class="std std-ref">ATTIMOUT1 ( vpin, value ) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#attimeout2"><span class="std std-ref">ATTIMOUT2 ( vpin, value ) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#automation"><span class="std std-ref">AUTOMATION( id, &quot;description&quot; ) - Define an automation, advertised to throttles/clients</span></a></p></li>
<li><p><a class="reference internal" href="#autostart"><span class="std std-ref">AUTOSTART - Automatically start sequence at this point during Command Station startup</span></a></p></li>
<li><p><a class="reference internal" href="#blink"><span class="std std-ref">BLINK( pin, onMs, offMs ) - Blink an output pin</span></a></p></li>
<li><p><a class="reference internal" href="#call"><span class="std std-ref">CALL( id ) - Branch to a separate sequence</span></a></p></li>
<li><p><a class="reference internal" href="#clear-all-stash"><span class="std std-ref">CLEAR_ALL_STASH - Zeroes all stashes</span></a></p></li>
<li><p><a class="reference internal" href="#clear-stash"><span class="std std-ref">CLEAR_STASH( stash_id ) - Zeroes the specified stash</span></a></p></li>
<li><p><a class="reference internal" href="#close"><span class="std std-ref">CLOSE( turnout_id ) - Close a turnout/point</span></a></p></li>
<li><p><a class="reference internal" href="#dccactivate"><span class="std std-ref">DCCACTIVATE( addr, sub_addr ) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#dcc-turntable"><span class="std std-ref">DCC_TURNTABLE( id, home_angle, [, &quot;description&quot;] ) - Define a DCC accessory turntable/traverser</span></a></p></li>
<li><p><a class="reference internal" href="#delay"><span class="std std-ref">DELAY( delay ) - Delay the sequence a number of milliseconds</span></a></p></li>
<li><p><a class="reference internal" href="#delaymins"><span class="std std-ref">DELAYMINS( delay ) - Delay the sequence a number of minutes</span></a></p></li>
<li><p><a class="reference internal" href="#delayms"><span class="std std-ref">DELAYMS( delay ) - Delay the sequence a number of milliseconds</span></a></p></li>
<li><p><a class="reference internal" href="#drive"><span class="std std-ref">DRIVE ( vpin ) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#else"><span class="std std-ref">ELSE - Alternate logic to any IF related command returning False</span></a></p></li>
<li><p><a class="reference internal" href="#endexrail"><span class="std std-ref">ENDEXRAIL - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#endif"><span class="std std-ref">ENDIF - Required to end an IF/IFNOT/etc.</span></a></p></li>
<li><p><a class="reference internal" href="#endtask"><span class="std std-ref">ENDTASK - Completes a Sequence/Route/Animation/Event, or any other automation</span></a></p></li>
<li><p><a class="reference internal" href="#extt-turntable"><span class="std std-ref">EXTT_TURNTABLE( id, vpin, home_angle, [, &quot;description&quot;] ) - Define an EX-Turntable turntable/traverser</span></a></p></li>
<li><p><a class="reference internal" href="#foff"><span class="std std-ref">FOFF( func ) - Turn off loco function</span></a></p></li>
<li><p><a class="reference internal" href="#follow"><span class="std std-ref">FOLLOW( sequence_id ) - Branch or Follow a specified sequence</span></a></p></li>
<li><p><a class="reference internal" href="#fon"><span class="std std-ref">FON( func ) - Turn on loco function</span></a></p></li>
<li><p><a class="reference internal" href="#forget"><span class="std std-ref">FORGET - Forget the loco in the running automation/sequence</span></a></p></li>
<li><p><a class="reference internal" href="#free"><span class="std std-ref">FREE( block_id ) - Free block</span></a></p></li>
<li><p><a class="reference internal" href="#ftoggle"><span class="std std-ref">FTOGGLE( func ) - Toggle the state of a loco’s function</span></a></p></li>
<li><p><a class="reference internal" href="#fwd"><span class="std std-ref">FWD( speed ) - Drive loco forward at DCC speed</span></a></p></li>
<li><p><a class="reference internal" href="#green"><span class="std std-ref">GREEN( signal_id ) - Set a defined signal to GREEN</span></a></p></li>
<li><p><a class="reference internal" href="#if"><span class="std std-ref">IF ( vpin ) … ELSE … ENDIF  - Execute commands if the conditions are met</span></a></p></li>
<li><p><a class="reference internal" href="#ifamber"><span class="std std-ref">IFAMBER( signal_id ) - Test if signal is amber</span></a></p></li>
<li><p><a class="reference internal" href="#ifclosed"><span class="std std-ref">IFCLOSED( turnout_id ) - Test if a turnout/point is closed</span></a></p></li>
<li><p><a class="reference internal" href="#ifgreen"><span class="std std-ref">IFGREEN( signal_id ) - Test if signal is green</span></a></p></li>
<li><p><a class="reference internal" href="#ifgte"><span class="std std-ref">IFGTE( vpin, value ) - Test if analog pin reading is greater than or equal to value</span></a></p></li>
<li><p><a class="reference internal" href="#ifloco"><span class="std std-ref">IFLOCO( loco ) - perform commands if the specified loco ID is defined for this sequence</span></a></p></li>
<li><p><a class="reference internal" href="#iflt"><span class="std std-ref">IFLT( vpin, value ) - Test if analog pin reading is less than value</span></a></p></li>
<li><p><a class="reference internal" href="#ifnot"><span class="std std-ref">IFNOT ( vpin ) … ELSE … ENDIF  - Execute commands if the conditions are NOT met</span></a></p></li>
<li><p><a class="reference internal" href="#ifrandom"><span class="std std-ref">IFRANDOM( percent ) - Run commands a random percentage of the time</span></a></p></li>
<li><p><a class="reference internal" href="#ifre"><span class="std std-ref">IFRE ( vpin, value ) - Test if a rotary encoder has been set to a value</span></a></p></li>
<li><p><a class="reference internal" href="#ifred"><span class="std std-ref">IFRED( signal_id ) - Test if signal is red</span></a></p></li>
<li><p><a class="reference internal" href="#ifreserve"><span class="std std-ref">IFRESERVE( block ) - Execut commnads if block is NOT reserved</span></a></p></li>
<li><p><a class="reference internal" href="#ifthrown"><span class="std std-ref">IFTHROWN( turnout_id ) - Test if a turnout/point is thrown</span></a></p></li>
<li><p><a class="reference internal" href="#iftimeout"><span class="std std-ref">IFTIMEOUT - Tests if “timed out” flag has been set by an ATTIMEOUT() sensor reading attempt</span></a></p></li>
<li><p><a class="reference internal" href="#ifttposition"><span class="std std-ref">IFTTPOSITION( id, position ) - Test if turntable/traverser is at a position</span></a></p></li>
<li><p><a class="reference internal" href="#invert-direction"><span class="std std-ref">INVERT_DIRECTION - Switches FWD/REV meaning for loco</span></a></p></li>
<li><p><a class="reference internal" href="#join"><span class="std std-ref">JOIN - Join PROG and MAIN track outputs</span></a></p></li>
<li><p><a class="reference internal" href="#killall"><span class="std std-ref">KILLALL - Kills all running  activities</span></a></p></li>
<li><p><a class="reference internal" href="#latch"><span class="std std-ref">LATCH( vpin ) - Latches a sensor on</span></a></p></li>
<li><p><a class="reference internal" href="#lcc"><span class="std std-ref">LCC(eventid) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#lccx"><span class="std std-ref">LCCX(senderid,eventid) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#neopixel"><span class="std std-ref">NEOPIXEL( vpin, red, green, blue [,count] ) - Controls the colour of attached Neopixel LEDs</span></a></p></li>
<li><p><a class="reference internal" href="#onacof"><span class="std std-ref">ONACOF(eventid) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#onacon"><span class="std std-ref">ONACON(eventid) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#onactivate"><span class="std std-ref">ONACTIVATE( addr, sub_addr ) - Event handler for 2 part DCC accessory packet value 1</span></a></p></li>
<li><p><a class="reference internal" href="#onamber"><span class="std std-ref">ONAMBER( signal_id) - Define event handler for when a signal is set to the amber</span></a></p></li>
<li><p><a class="reference internal" href="#onbutton"><span class="std std-ref">ONBUTTON( vpin ) - Event handler for debounced button presses</span></a></p></li>
<li><p><a class="reference internal" href="#onchange"><span class="std std-ref">ONCHANGE( vpin ) - Detects a rotary encoder has changed position</span></a></p></li>
<li><p><a class="reference internal" href="#onclocktime"><span class="std std-ref">ONCLOCKTIME( hours, mins ) - Event handler for when the specified clock time is reached</span></a></p></li>
<li><p><a class="reference internal" href="#onclose"><span class="std std-ref">ONCLOSE( turnout_id ) - Event handler for when a turnout/point is closed</span></a></p></li>
<li><p><a class="reference internal" href="#ondeactivate"><span class="std std-ref">ONDEACTIVATE( addr, sub_addr ) - Event handler for 2 part DCC accessory packet value 0</span></a></p></li>
<li><p><a class="reference internal" href="#ongreen"><span class="std std-ref">ONGREEN( signal_id) - Define event handler for when a signal is set to the green</span></a></p></li>
<li><p><a class="reference internal" href="#onlcc"><span class="std std-ref">ONLCC(sender, eventid) - TBA</span></a></p></li>
<li><p><a class="reference internal" href="#onoverload"><span class="std std-ref">ONOVERLOAD( track ) - Event handler for when an Overload occurs</span></a></p></li>
<li><p><a class="reference internal" href="#onred"><span class="std std-ref">ONRED( signal_id) - Define event handler for when a signal is set to the red aspect</span></a></p></li>
<li><p><a class="reference internal" href="#onrotate"><span class="std std-ref">ONROTATE( id ) - Event handler for when a turntable/traverser is rotated</span></a></p></li>
<li><p><a class="reference internal" href="#onsensor"><span class="std std-ref">ONSENSOR( vpin ) - Event handler for sensors</span></a></p></li>
<li><p><a class="reference internal" href="#onthrow"><span class="std std-ref">ONTHROW( turnout_id ) - Event handler for when a turnout/point is thrown</span></a></p></li>
<li><p><a class="reference internal" href="#ontime"><span class="std std-ref">ONTIME( value ) - Event handler for when the specified time is reached</span></a></p></li>
<li><p>PAD</p></li>
<li><p><a class="reference internal" href="#pause"><span class="std std-ref">PAUSE - E-STOP all locos and PAUSE all other EX-RAIL tasks</span></a></p></li>
<li><p><a class="reference internal" href="#pickup-stash"><span class="std std-ref">PICKUP_STASH( stash_id ) - Retrieves and sets the loco/invert from the specified stash</span></a></p></li>
<li><p><a class="reference internal" href="#pin-turnout"><span class="std std-ref">PIN_TURNOUT( id, pin [, &quot;description&quot;] ) - Define a pin operated turnout</span></a></p></li>
<li><p><a class="reference internal" href="#pom"><span class="std std-ref">POM( cv, value ) - Program CV value on main</span></a></p></li>
<li><p><a class="reference internal" href="#poweroff"><span class="std std-ref">POWEROFF - Power off track</span></a></p></li>
<li><p><a class="reference internal" href="#poweron"><span class="std std-ref">POWERON - Power on track and UNJOIN</span></a></p></li>
<li><p><a class="reference internal" href="#print"><span class="std std-ref">PRINT( &quot;msg&quot; ) - Print diagnostic message to Serial Monitor</span></a></p></li>
<li><p><a class="reference internal" href="#randwait"><span class="std std-ref">RANDWAIT( ??? ) - TBA</span></a></p></li>
<li><p>READ_LOCO1</p></li>
<li><p>READ_LOCO2</p></li>
<li><p><a class="reference internal" href="#red"><span class="std std-ref">RED( signal_id ) - Set defined signal to Red</span></a></p></li>
<li><p><a class="reference internal" href="#reserve"><span class="std std-ref">RESERVE( block_id ) - Reserve a block</span></a></p></li>
<li><p><a class="reference internal" href="#reset"><span class="std std-ref">RESET( pin [,count] ) - Reset output pin</span></a></p></li>
<li><p><a class="reference internal" href="#resume"><span class="std std-ref">RESUME - Resume all paused tasks, including loco movement</span></a></p></li>
<li><p><a class="reference internal" href="#return"><span class="std std-ref">RETURN - Return to the calling sequence when completed</span></a></p></li>
<li><p><a class="reference internal" href="#rev"><span class="std std-ref">REV( speed ) - Drive loco in reverse at DCC speed</span></a></p></li>
<li><p><a class="reference internal" href="#roster"><span class="std std-ref">ROSTER( loco, &quot;name&quot;, &quot;func_map&quot; ) - Provide roster info for a specified loco</span></a></p></li>
<li><p><a class="reference internal" href="#rotate"><span class="std std-ref">ROTATE( id, position, activity ) - Rotate an EX-Turntable turntable/traverser</span></a></p></li>
<li><p><a class="reference internal" href="#route"><span class="std std-ref">ROUTE( id, &quot;description&quot; ) - Define a route, advertised to throttles/clients</span></a></p></li>
<li><p><a class="reference internal" href="#route-active"><span class="std std-ref">ROUTE_ACTIVE( route_id ) - Activate a Route</span></a></p></li>
<li><p><a class="reference internal" href="#route-disabled"><span class="std std-ref">ROUTE_DISABLED( route_id ) - disable a Route</span></a></p></li>
<li><p><a class="reference internal" href="#route-hidden"><span class="std std-ref">ROUTE_HIDDEN( route_id ) - Hide a Route from display</span></a></p></li>
<li><p><a class="reference internal" href="#route-inactive"><span class="std std-ref">ROUTE_INACTIVE( route_id, caption ) - Deactivate a Route</span></a></p></li>
<li><p><a class="reference internal" href="#sendloco"><span class="std std-ref">SENDLOCO( loco, route ) - Start route/sequence with a specified loco</span></a></p></li>
<li><p><a class="reference internal" href="#sequence"><span class="std std-ref">SEQUENCE( id ) - A general purpose sequence, not advertised to throttles/clients</span></a></p></li>
<li><p><a class="reference internal" href="#servo"><span class="std std-ref">SERVO( id, position, profile ) - Move an animation servo</span></a></p></li>
<li><p><a class="reference internal" href="#servo-turnout"><span class="std std-ref">SERVO_TURNOUT( id, pin, active_angle, inactive_angle, profile [, &quot;description&quot;] ) - Define a servo turnout/point</span></a></p></li>
<li><p><a class="reference internal" href="#set"><span class="std std-ref">SET( pin [,count] ) - Set an output pin HIGH</span></a></p></li>
<li><p><a class="reference internal" href="#set-power"><span class="std std-ref">SET_POWER( track, ON/OFF ) - Enable/Disable power on a track</span></a></p></li>
<li><p><a class="reference internal" href="#set-track"><span class="std std-ref">SET_TRACK( track, mode ) - Configures the mode of a track</span></a></p></li>
<li><p><a class="reference internal" href="#setfreq"><span class="std std-ref">SETFREQ( track, frequency ) - Enable a specific frequency</span></a></p></li>
<li><p><a class="reference internal" href="#setloco"><span class="std std-ref">SETLOCO( loco ) - Set the loco address for this task</span></a></p></li>
<li><p><a class="reference internal" href="#signal"><span class="std std-ref">SIGNAL( red_pin, amber_pin, green_pin ) - Define a pin based signal</span></a></p></li>
<li><p><a class="reference internal" href="#speed"><span class="std std-ref">SPEED( speed ) - Drive loco in current direction at DCC speed</span></a></p></li>
<li><p><a class="reference internal" href="#start"><span class="std std-ref">START( id ) - Execute a route or sequence</span></a></p></li>
<li><p><a class="reference internal" href="#stash"><span class="std std-ref">STASH( stash_id ) - Stashes the current loco/invert</span></a></p></li>
<li><p><a class="reference internal" href="#throw"><span class="std std-ref">THROW( turnout_id ) - Throw a turnout/point</span></a></p></li>
<li><p><a class="reference internal" href="#toggle-turnout"><span class="std std-ref">TOGGLE_TURNOUT( turnout_id ) - Toggle a defined turnout/point between CLOSE/THROW</span></a></p></li>
<li><p><a class="reference internal" href="#tt-addposition"><span class="std std-ref">TT_ADDPOSITION( id, position_id, value, angle [, &quot;description&quot;] ) - Add a turntable position</span></a></p></li>
<li><p><a class="reference internal" href="#turnout"><span class="std std-ref">TURNOUT( id, addr, sub_addr [, &quot;description&quot;] ) - Define a DCC accessory turnout/point</span></a></p></li>
<li><p><a class="reference internal" href="#unjoin"><span class="std std-ref">UNJOIN - Disconnect prog track from main</span></a></p></li>
<li><p><a class="reference internal" href="#unlatch"><span class="std std-ref">UNLATCH( vpin ) - Remove LATCH on sensor</span></a></p></li>
<li><p><a class="reference internal" href="#waitfor"><span class="std std-ref">WAITFOR( pin ) - Wait for a servo motion to complete prior to continuing</span></a></p></li>
<li><p><a class="reference internal" href="#waitfortt"><span class="std std-ref">WAITFORTT( id ) - Wait for EX-Turntable turntable/traverser to complete a rotation</span></a></p></li>
<li><p><a class="reference internal" href="#xfoff"><span class="std std-ref">XFOFF( cab, func ) - Send DCC function OFF to specific cab</span></a></p></li>
<li><p><a class="reference internal" href="#xfon"><span class="std std-ref">XFON( cab, func )` - Send DCC function ON to specific cab</span></a></p></li>
<li><p><a class="reference internal" href="#xftoggle"><span class="std std-ref">XFTOGGLE( loco, func ) - Toggle DCC function on specific loco</span></a></p></li>
</ul>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
<hr class="docutils" />
<section id="flow-control">
<h2><a class="toc-backref" href="#id34" role="doc-backlink">Flow Control</a><a class="headerlink" href="#flow-control" title="Link to this heading"></a></h2>
<section id="scripts-sequences-types-and-control">
<h3><a class="toc-backref" href="#id35" role="doc-backlink">Scripts/Sequences - Types and Control</a><a class="headerlink" href="#scripts-sequences-types-and-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id1">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#autostart-automatically-start-sequence-at-this-point-during-command-station-startup" id="id68"><code class="docutils literal notranslate"><span class="pre">AUTOSTART</span></code> - Automatically start sequence at this point during Command Station startup</a></p></li>
<li><p><a class="reference internal" href="#automation-id-description-define-an-automation-advertised-to-throttles-clients" id="id69"><code class="docutils literal notranslate"><span class="pre">AUTOMATION(</span> <span class="pre">id,</span> <span class="pre">&quot;description&quot;</span> <span class="pre">)</span></code> - Define an automation, advertised to throttles/clients</a></p></li>
<li><p><a class="reference internal" href="#route-id-description-define-a-route-advertised-to-throttles-clients" id="id70"><code class="docutils literal notranslate"><span class="pre">ROUTE(</span> <span class="pre">id,</span> <span class="pre">&quot;description&quot;</span> <span class="pre">)</span></code> - Define a route, advertised to throttles/clients</a></p></li>
<li><p><a class="reference internal" href="#sequence-id-a-general-purpose-sequence-not-advertised-to-throttles-clients" id="id71"><code class="docutils literal notranslate"><span class="pre">SEQUENCE(</span> <span class="pre">id</span> <span class="pre">)</span></code> - A general purpose sequence, not advertised to throttles/clients</a></p></li>
<li><p><a class="reference internal" href="#done-completes-a-sequence-route-animation-event-or-any-other-automation" id="id72"><code class="docutils literal notranslate"><span class="pre">DONE</span></code> - Completes a Sequence/Route/Animation/Event, or any other automation</a></p></li>
<li><p><a class="reference internal" href="#endtask-completes-a-sequence-route-animation-event-or-any-other-automation" id="id73"><code class="docutils literal notranslate"><span class="pre">ENDTASK</span></code> - Completes a Sequence/Route/Animation/Event, or any other automation</a></p></li>
<li><p><a class="reference internal" href="#call-id-branch-to-a-separate-sequence" id="id74"><code class="docutils literal notranslate"><span class="pre">CALL(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Branch to a separate sequence</a></p></li>
<li><p><a class="reference internal" href="#return-return-to-the-calling-sequence-when-completed" id="id75"><code class="docutils literal notranslate"><span class="pre">RETURN</span></code> - Return to the calling sequence when completed</a></p></li>
<li><p><a class="reference internal" href="#follow-sequence-id-branch-or-follow-a-specified-sequence" id="id76"><code class="docutils literal notranslate"><span class="pre">FOLLOW(</span> <span class="pre">sequence_id</span> <span class="pre">)</span></code> - Branch or Follow a specified sequence</a></p></li>
<li><p><a class="reference internal" href="#pause-e-stop-all-locos-and-pause-all-other-ex-rail-tasks" id="id77"><code class="docutils literal notranslate"><span class="pre">PAUSE</span></code> - E-STOP all locos and PAUSE all other EX-RAIL tasks</a></p></li>
<li><p><a class="reference internal" href="#resume-resume-all-paused-tasks-including-loco-movement" id="id78"><code class="docutils literal notranslate"><span class="pre">RESUME</span></code> - Resume all paused tasks, including loco movement</a></p></li>
<li><p><a class="reference internal" href="#start-id-execute-a-route-or-sequence" id="id79"><code class="docutils literal notranslate"><span class="pre">START(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Execute a route or sequence</a></p></li>
<li><p><a class="reference internal" href="#delay-delay-delay-the-sequence-a-number-of-milliseconds" id="id80"><code class="docutils literal notranslate"><span class="pre">DELAY(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay the sequence a number of milliseconds</a></p></li>
<li><p><a class="reference internal" href="#delayms-delay-delay-the-sequence-a-number-of-milliseconds" id="id81"><code class="docutils literal notranslate"><span class="pre">DELAYMS(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay the sequence a number of milliseconds</a></p></li>
<li><p><a class="reference internal" href="#delaymins-delay-delay-the-sequence-a-number-of-minutes" id="id82"><code class="docutils literal notranslate"><span class="pre">DELAYMINS(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay the sequence a number of minutes</a></p></li>
<li><p><a class="reference internal" href="#delayrandom-min-delay-max-delay-delay-a-random-period-of-time" id="id83"><code class="docutils literal notranslate"><span class="pre">DELAYRANDOM(</span> <span class="pre">min_delay,</span> <span class="pre">max_delay</span> <span class="pre">)</span></code> - Delay a random period of time</a></p></li>
<li><p><a class="reference internal" href="#randwait-tba" id="id84"><code class="docutils literal notranslate"><span class="pre">RANDWAIT(</span> <span class="pre">???</span> <span class="pre">)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#ifrandom-percent-run-commands-a-random-percentage-of-the-time" id="id85"><code class="docutils literal notranslate"><span class="pre">IFRANDOM(</span> <span class="pre">percent</span> <span class="pre">)</span></code> - Run commands a random percentage of the time</a></p></li>
<li><p><a class="reference internal" href="#route-caption-route-id-caption-change-the-label-of-the-route-button" id="id86"><code class="docutils literal notranslate"><span class="pre">ROUTE_CAPTION(</span> <span class="pre">route_id,</span> <span class="pre">&quot;caption&quot;</span> <span class="pre">)</span></code> - Change the label of the Route button</a></p></li>
<li><p><a class="reference internal" href="#route-active-route-id-activate-a-route" id="id87"><code class="docutils literal notranslate"><span class="pre">ROUTE_ACTIVE(</span> <span class="pre">route_id</span> <span class="pre">)</span></code> - Activate a Route</a></p></li>
<li><p><a class="reference internal" href="#route-inactive-route-id-caption-deactivate-a-route" id="id88"><code class="docutils literal notranslate"><span class="pre">ROUTE_INACTIVE(</span> <span class="pre">route_id,</span> <span class="pre">caption</span> <span class="pre">)</span></code> - Deactivate a Route</a></p></li>
<li><p><a class="reference internal" href="#route-hidden-route-id-hide-a-route-from-display" id="id89"><code class="docutils literal notranslate"><span class="pre">ROUTE_HIDDEN(</span> <span class="pre">route_id</span> <span class="pre">)</span></code> - Hide a Route from display</a></p></li>
<li><p><a class="reference internal" href="#route-disabled-route-id-disable-a-route" id="id90"><code class="docutils literal notranslate"><span class="pre">ROUTE_DISABLED(</span> <span class="pre">route_id</span> <span class="pre">)</span></code> - disable a Route</a></p></li>
<li><p><a class="reference internal" href="#stash-stash-id-stashes-the-current-loco-invert" id="id91"><code class="docutils literal notranslate"><span class="pre">STASH(</span> <span class="pre">stash_id</span> <span class="pre">)</span></code> - Stashes the current loco/invert</a></p></li>
<li><p><a class="reference internal" href="#clear-stash-stash-id-zeroes-the-specified-stash" id="id92"><code class="docutils literal notranslate"><span class="pre">CLEAR_STASH(</span> <span class="pre">stash_id</span> <span class="pre">)</span></code> - Zeroes the specified stash</a></p></li>
<li><p><a class="reference internal" href="#clear-all-stash-zeroes-all-stashes" id="id93"><code class="docutils literal notranslate"><span class="pre">CLEAR_ALL_STASH</span></code> - Zeroes all stashes</a></p></li>
<li><p><a class="reference internal" href="#pickup-stash-stash-id-retrieves-and-sets-the-loco-invert-from-the-specified-stash" id="id94"><code class="docutils literal notranslate"><span class="pre">PICKUP_STASH(</span> <span class="pre">stash_id</span> <span class="pre">)</span></code> - Retrieves and sets the loco/invert from the specified stash</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="autostart-automatically-start-sequence-at-this-point-during-command-station-startup">
<span id="autostart"></span><h4><a class="toc-backref" href="#id68" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AUTOSTART</span></code> - Automatically start sequence at this point during Command Station startup</a><a class="headerlink" href="#autostart-automatically-start-sequence-at-this-point-during-command-station-startup" title="Link to this heading"></a></h4>
<p>A sequence is automatically started at this point during startup.</p>
<p>If you have previously relied on the implied AUTOSTART to run things immediately,  as of Version 5.0 you must now add this explicitly to the beginning of myAutomation.h</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
<p>There are three options to define <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> scripts or sequences:</p>
<ul class="simple">
<li><p>AUTOMATION</p></li>
<li><p>ROUTE</p></li>
<li><p>SEQUENCE</p></li>
</ul>
<p><hr class="hr-dashed" /></p>
</section>
<section id="automation-id-description-define-an-automation-advertised-to-throttles-clients">
<span id="automation"></span><h4><a class="toc-backref" href="#id69" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AUTOMATION(</span> <span class="pre">id,</span> <span class="pre">&quot;description&quot;</span> <span class="pre">)</span></code> - Define an automation, advertised to throttles/clients</a><a class="headerlink" href="#automation-id-description-define-an-automation-advertised-to-throttles-clients" title="Link to this heading"></a></h4>
<p>Define an automation sequence that is advertised to throttles/clients to send a train along.</p>
<p>See <a class="reference internal" href="examples.html#stopping-at-a-station-simple-loop"><span class="std std-ref">Stopping at a Station (simple loop)</span></a> for a simple example.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id for the sequence/route/automation <br /> &gt; <strong>description</strong> - description for the sequence/route/automation</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-id-description-define-a-route-advertised-to-throttles-clients">
<span id="route"></span><h4><a class="toc-backref" href="#id70" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE(</span> <span class="pre">id,</span> <span class="pre">&quot;description&quot;</span> <span class="pre">)</span></code> - Define a route, advertised to throttles/clients</a><a class="headerlink" href="#route-id-description-define-a-route-advertised-to-throttles-clients" title="Link to this heading"></a></h4>
<p>Define a route that is advertised to throttles/clients. This can be used to initiate automation sequences such as setting turnouts/points and signals to allow a train to be driven through a specific route on the layout. See <a class="reference internal" href="examples.html#creating-routes"><span class="std std-ref">Creating Routes</span></a> for various examples.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id for the sequence/route/automation <br /> &gt; <strong>description</strong> - description for the sequence/route/automation</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="sequence-id-a-general-purpose-sequence-not-advertised-to-throttles-clients">
<span id="sequence"></span><h4><a class="toc-backref" href="#id71" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SEQUENCE(</span> <span class="pre">id</span> <span class="pre">)</span></code> - A general purpose sequence, not advertised to throttles/clients</a><a class="headerlink" href="#sequence-id-a-general-purpose-sequence-not-advertised-to-throttles-clients" title="Link to this heading"></a></h4>
<p>A general purpose automation sequence that is not advertised to throttles/clients. This may be triggered automatically on startup, or be called by other sequences or activities. See <a class="reference internal" href="examples.html#automating-various-non-track-items"><span class="std std-ref">Automating various non-track items</span></a>, <a class="reference internal" href="examples.html#point-to-point-shuttle"><span class="std std-ref">Point to Point Shuttle</span></a>, and <a class="reference internal" href="examples.html#multiple-inter-connected-trains"><span class="std std-ref">Multiple inter-connected trains</span></a> for further examples.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id for the sequence/route/automation <br /> &gt; <strong>description</strong> - description for the sequence/route/automation</p>
<p><hr class="hr-dashed" /></p>
<p>All of these sequence types must be terminated by either a <code class="docutils literal notranslate"><span class="pre">DONE</span></code>, <code class="docutils literal notranslate"><span class="pre">FOLLOW(id)</span></code>, or <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> statement. If you use <code class="docutils literal notranslate"><span class="pre">FOLLOW(id)</span></code> or <code class="docutils literal notranslate"><span class="pre">RETURN</span></code>, you do not also need a <code class="docutils literal notranslate"><span class="pre">DONE</span></code> statement as any of these terms will tell <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> that the sequence of events has ended.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="done-completes-a-sequence-route-animation-event-or-any-other-automation">
<span id="done"></span><h4><a class="toc-backref" href="#id72" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DONE</span></code> - Completes a Sequence/Route/Animation/Event, or any other automation</a><a class="headerlink" href="#done-completes-a-sequence-route-animation-event-or-any-other-automation" title="Link to this heading"></a></h4>
<p>Completes a Sequence/Route/Animation/Event handler, and any other automation definition as shown in the various examples on this page and elsewhere in the <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> documentation.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="endtask-completes-a-sequence-route-animation-event-or-any-other-automation">
<span id="endtask"></span><h4><a class="toc-backref" href="#id73" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ENDTASK</span></code> - Completes a Sequence/Route/Animation/Event, or any other automation</a><a class="headerlink" href="#endtask-completes-a-sequence-route-animation-event-or-any-other-automation" title="Link to this heading"></a></h4>
<p>Identical to <code class="docutils literal notranslate"><span class="pre">DONE</span></code>.</p>
<p>Completes a Sequence/Route/Animation/Event handler, and any other automation definition as shown in the various examples on this page and elsewhere in the <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> documentation.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="call-id-branch-to-a-separate-sequence">
<span id="call"></span><h4><a class="toc-backref" href="#id74" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">CALL(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Branch to a separate sequence</a><a class="headerlink" href="#call-id-branch-to-a-separate-sequence" title="Link to this heading"></a></h4>
<p>Branch to a separate sequence, which will need to RETURN when complete.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id for the sequence/route/automation to branch to</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="return-return-to-the-calling-sequence-when-completed">
<span id="return"></span><h4><a class="toc-backref" href="#id75" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RETURN</span></code> - Return to the calling sequence when completed</a><a class="headerlink" href="#return-return-to-the-calling-sequence-when-completed" title="Link to this heading"></a></h4>
<p>Return to the calling sequence when completed (no DONE required).</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>For example, you have an AUTOMATION which you initiate that sends a train through your layout with multiple station stops, and you want to do the same things at each station.</p>
<p>You could write a very long AUTOMATION sequence to do this, or you could write the sound SEQUENCE once, then call it at each station:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AUTOMATION</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Station loop&quot;</span><span class="p">)</span><span class="w">    </span><span class="c1">// Our station loop sequence</span>
<span class="w">  </span><span class="n">FWD</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span><span class="w">                         </span><span class="c1">// At station 1 entrance sensor, call our sequence</span>
<span class="w">  </span><span class="n">CALL</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span><span class="w">                         </span><span class="c1">// At station 2 entrance sensor, call our sequence</span>
<span class="w">  </span><span class="n">CALL</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">103</span><span class="p">)</span><span class="w">                         </span><span class="c1">// At station 3 entrance sensor, call our sequence</span>
<span class="w">  </span><span class="n">CALL</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">104</span><span class="p">)</span><span class="w">                         </span><span class="c1">// At station 4 entrance sensor, call our sequence</span>
<span class="w">  </span><span class="n">CALL</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="w">  </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span><span class="w">                      </span><span class="c1">// Keep looping through the stations (see FOLLOW command reference below)</span>

<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Station sequence&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// Our station sequence</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Blow the horn</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Break squeal</span>
<span class="w">  </span><span class="n">STOP</span><span class="w">                            </span><span class="c1">// Stop at the station</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Let out a hiss from the air breaks for a second</span>
<span class="w">  </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="w">  </span><span class="n">FOFF</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">DELAYRANDOM</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p">)</span><span class="w">        </span><span class="c1">// Wait between 2 and 10 seconds for passengers</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Blow the horn again</span>
<span class="w">  </span><span class="n">FWD</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w">                         </span><span class="c1">// On our way to the next station</span>
<span class="w">  </span><span class="n">RETURN</span><span class="w">                          </span><span class="c1">// Return to the calling sequence</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="follow-sequence-id-branch-or-follow-a-specified-sequence">
<span id="follow"></span><h4><a class="toc-backref" href="#id76" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FOLLOW(</span> <span class="pre">sequence_id</span> <span class="pre">)</span></code> - Branch or Follow a specified sequence</a><a class="headerlink" href="#follow-sequence-id-branch-or-follow-a-specified-sequence" title="Link to this heading"></a></h4>
<p>Branch or Follow a specified sequence. This lets us do clever things like performing a different sequence depending on whether a turnout/point is CLOSED or THROWN, as well as simple things such as the example above where we keep looping through the same sequence.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>sequence_id</strong> - id for the sequence/route/automation to branch to</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AUTOMATION</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Choose your own adventure&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// This let&#39;s someone control the sequence by throwing a turnout/point (or not)</span>
<span class="w">  </span><span class="n">FWD</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">AFTER</span><span class="p">(</span><span class="mi">105</span><span class="p">)</span>
<span class="w">  </span><span class="n">IFTHROWN</span><span class="p">(</span><span class="mi">106</span><span class="p">)</span>
<span class="w">    </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">ELSE</span>
<span class="w">    </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Adventure 1&quot;</span><span class="p">)</span><span class="w">                 </span><span class="c1">// Quite a boring adventure to stop in a siding after sensor 106 has activated/deactivated</span>
<span class="w">  </span><span class="n">AFTER</span><span class="p">(</span><span class="mi">106</span><span class="p">)</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">  </span><span class="n">STOP</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Adventure 2&quot;</span><span class="p">)</span><span class="w">                 </span><span class="c1">// If we don&#39;t throw the turnout/point, let&#39;s do our station loop from the example above</span>
<span class="w">  </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pause-e-stop-all-locos-and-pause-all-other-ex-rail-tasks">
<span id="pause"></span><h4><a class="toc-backref" href="#id77" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PAUSE</span></code> - E-STOP all locos and PAUSE all other EX-RAIL tasks</a><a class="headerlink" href="#pause-e-stop-all-locos-and-pause-all-other-ex-rail-tasks" title="Link to this heading"></a></h4>
<p>E-STOP all locos and PAUSE all other EX-RAIL tasks until RESUMEd.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="resume-resume-all-paused-tasks-including-loco-movement">
<span id="resume"></span><h4><a class="toc-backref" href="#id78" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RESUME</span></code> - Resume all paused tasks, including loco movement</a><a class="headerlink" href="#resume-resume-all-paused-tasks-including-loco-movement" title="Link to this heading"></a></h4>
<p>Resume all paused tasks, including loco movement.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="start-id-execute-a-route-or-sequence">
<span id="start"></span><h4><a class="toc-backref" href="#id79" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">START(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Execute a route or sequence</a><a class="headerlink" href="#start-id-execute-a-route-or-sequence" title="Link to this heading"></a></h4>
<p>Start a new task to execute a route or sequence.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id for the sequence/route/automation to branch to</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="delay-delay-delay-the-sequence-a-number-of-milliseconds">
<span id="delay"></span><h4><a class="toc-backref" href="#id80" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DELAY(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay the sequence a number of milliseconds</a><a class="headerlink" href="#delay-delay-delay-the-sequence-a-number-of-milliseconds" title="Link to this heading"></a></h4>
<p>Delay the current sequence a number of milliseconds.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>delay</strong> - period to delay in milliseconds</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="delayms-delay-delay-the-sequence-a-number-of-milliseconds">
<span id="delayms"></span><h4><a class="toc-backref" href="#id81" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DELAYMS(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay the sequence a number of milliseconds</a><a class="headerlink" href="#delayms-delay-delay-the-sequence-a-number-of-milliseconds" title="Link to this heading"></a></h4>
<p>Same as <code class="docutils literal notranslate"><span class="pre">DELAY()</span></code></p>
<p>Delay the current sequence a number of milliseconds.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>delay</strong> - period to delay in milliseconds</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="delaymins-delay-delay-the-sequence-a-number-of-minutes">
<span id="delaymins"></span><h4><a class="toc-backref" href="#id82" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DELAYMINS(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay the sequence a number of minutes</a><a class="headerlink" href="#delaymins-delay-delay-the-sequence-a-number-of-minutes" title="Link to this heading"></a></h4>
<p>Delay the current sequence a number of minutes.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>delay</strong> - period to delay in minutes</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="delayrandom-min-delay-max-delay-delay-a-random-period-of-time">
<span id="delayrandom"></span><h4><a class="toc-backref" href="#id83" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DELAYRANDOM(</span> <span class="pre">min_delay,</span> <span class="pre">max_delay</span> <span class="pre">)</span></code> - Delay a random period of time</a><a class="headerlink" href="#delayrandom-min-delay-max-delay-delay-a-random-period-of-time" title="Link to this heading"></a></h4>
<p>Delay the current sequence a random time between min and max milliseconds.</p>
<p>See <a class="reference internal" href="examples.html#multiple-inter-connected-trains"><span class="std std-ref">Multiple inter-connected trains</span></a> for good examples.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>min_delay</strong> - minimum period to delay in milliseconds <br /> &gt; <strong>max_delay</strong> - maximum period to delay in milliseconds</p>
<details class="summary-delay-examples-click-to-show">
<summary>Delay examples: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ONCLOSE</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span><span class="w">      </span><span class="c1">// When turnout 102 closed, wait 2 seconds, then set signal 101 green.</span>
<span class="w">  </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="w">  </span><span class="n">GREEN</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="n">AT</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span><span class="w">           </span><span class="c1">// When sensor 123 is activated, set signal 102 red, wait 1 minute, then set signal 102 green.</span>
<span class="w">  </span><span class="n">RED</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="w">  </span><span class="n">DELAYMINS</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">GREEN</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="w">  </span><span class="n">DONE</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="randwait-tba">
<span id="randwait"></span><h4><a class="toc-backref" href="#id84" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RANDWAIT(</span> <span class="pre">???</span> <span class="pre">)</span></code> - TBA</a><a class="headerlink" href="#randwait-tba" title="Link to this heading"></a></h4>
<p><em>Parameters:</em> <br /> &gt; <strong>???</strong> - ??? <br /> &gt; <strong>???</strong> - ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifrandom-percent-run-commands-a-random-percentage-of-the-time">
<span id="ifrandom"></span><h4><a class="toc-backref" href="#id85" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFRANDOM(</span> <span class="pre">percent</span> <span class="pre">)</span></code> - Run commands a random percentage of the time</a><a class="headerlink" href="#ifrandom-percent-run-commands-a-random-percentage-of-the-time" title="Link to this heading"></a></h4>
<p>Runs commands in IF block a random percentage of the time. This is handy for more realism by enabling automations that don’t have to run on a schedule.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>percent</strong> - percentage to test against (0-100) <br /></p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="p">(</span><span class="mi">165</span><span class="p">)</span><span class="w">           </span><span class="c1">// When sensor 165 is activated, set a lineside merry-go-round in action for 1 minute 50% of the time.</span>
<span class="w">  </span><span class="n">IFRANDOM</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="w">    </span><span class="n">SET</span><span class="p">(</span><span class="mi">166</span><span class="p">)</span>
<span class="w">    </span><span class="n">DELAYMINS</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="n">RESET</span><span class="p">(</span><span class="mi">166</span><span class="p">)</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">DONE</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-caption-route-id-caption-change-the-label-of-the-route-button">
<span id="route-caption"></span><h4><a class="toc-backref" href="#id86" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE_CAPTION(</span> <span class="pre">route_id,</span> <span class="pre">&quot;caption&quot;</span> <span class="pre">)</span></code> - Change the label of the Route button</a><a class="headerlink" href="#route-caption-route-id-caption-change-the-label-of-the-route-button" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Dynamically change the label of the Route button.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>route_id</strong> - id of the route to change <br /> &gt; <strong>caption</strong> - text to replace on the route ‘button’ label</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// setup 4 &#39;routes&#39;to switch between tracks/districts between PROG, MAIN and DC</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;1.Trk: A main, B prog&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">MAIN</span><span class="p">)</span>
<span class="w">    </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">PROG</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;Active&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_ACTIVE</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">502</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">503</span><span class="p">)</span>
<span class="n">DONE</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;2.Trk: A dc10, B dc11&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">DC</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">DC</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;Active&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_ACTIVE</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">502</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">503</span><span class="p">)</span>
<span class="n">DONE</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;3.Trk: A dc10, B DCC main&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">DC</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">MAIN</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;Active&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_ACTIVE</span><span class="p">(</span><span class="mi">502</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">503</span><span class="p">)</span>
<span class="n">DONE</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;4.Trk: A DCC main, B dc10&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">DC</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">MAIN</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;Active&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">502</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_ACTIVE</span><span class="p">(</span><span class="mi">503</span><span class="p">)</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-active-route-id-activate-a-route">
<span id="route-active"></span><h4><a class="toc-backref" href="#id87" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE_ACTIVE(</span> <span class="pre">route_id</span> <span class="pre">)</span></code> - Activate a Route</a><a class="headerlink" href="#route-active-route-id-activate-a-route" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Dynamically flag a Route as active.</p>
<p>See example in ROUTE_CAPTION.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>route_id</strong> - id of the route to activate <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-inactive-route-id-caption-deactivate-a-route">
<span id="route-inactive"></span><h4><a class="toc-backref" href="#id88" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE_INACTIVE(</span> <span class="pre">route_id,</span> <span class="pre">caption</span> <span class="pre">)</span></code> - Deactivate a Route</a><a class="headerlink" href="#route-inactive-route-id-caption-deactivate-a-route" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Dynamically flag a Route as inactive.</p>
<p>See example in ROUTE_CAPTION.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>route_id</strong> - id of the route to deactivate <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-hidden-route-id-hide-a-route-from-display">
<span id="route-hidden"></span><h4><a class="toc-backref" href="#id89" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE_HIDDEN(</span> <span class="pre">route_id</span> <span class="pre">)</span></code> - Hide a Route from display</a><a class="headerlink" href="#route-hidden-route-id-hide-a-route-from-display" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Dynamically hide a Route.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>route_id</strong> - id of the route to hide <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-disabled-route-id-disable-a-route">
<span id="route-disabled"></span><h4><a class="toc-backref" href="#id90" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE_DISABLED(</span> <span class="pre">route_id</span> <span class="pre">)</span></code> - disable a Route</a><a class="headerlink" href="#route-disabled-route-id-disable-a-route" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Dynamically disable a Route.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>route_id</strong> - id of the route to disable <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="stash-stash-id-stashes-the-current-loco-invert">
<span id="stash"></span><h4><a class="toc-backref" href="#id91" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">STASH(</span> <span class="pre">stash_id</span> <span class="pre">)</span></code> - Stashes the current loco/invert</a><a class="headerlink" href="#stash-stash-id-stashes-the-current-loco-invert" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p><em>Parameters:</em> <br /> &gt; <strong>stash_id</strong> - id of the stash location to store the value (0-???) <br /></p>
<p>Stashes/Stores the current loco/invert in the specified stash location.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>EXRAIL has the ability to switch the DCC direction meaning of FWD and REV so that it can, for example, use the same sequence to drive a normal train or one where the loco is pulling in reverse. If invert=1 in the stash then the loco needs to be moved in reverse in order for the train to move forward.</p>
</div>
<p><hr class="hr-dashed" /></p>
</section>
<section id="clear-stash-stash-id-zeroes-the-specified-stash">
<span id="clear-stash"></span><h4><a class="toc-backref" href="#id92" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">CLEAR_STASH(</span> <span class="pre">stash_id</span> <span class="pre">)</span></code> - Zeroes the specified stash</a><a class="headerlink" href="#clear-stash-stash-id-zeroes-the-specified-stash" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Zeroes/Empties the specified stash location.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>stash_id</strong> - id of the stash location to store the value (0-???) <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="clear-all-stash-zeroes-all-stashes">
<span id="clear-all-stash"></span><h4><a class="toc-backref" href="#id93" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">CLEAR_ALL_STASH</span></code> - Zeroes all stashes</a><a class="headerlink" href="#clear-all-stash-zeroes-all-stashes" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Zeroes/Empties all stash locations.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pickup-stash-stash-id-retrieves-and-sets-the-loco-invert-from-the-specified-stash">
<span id="pickup-stash"></span><h4><a class="toc-backref" href="#id94" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PICKUP_STASH(</span> <span class="pre">stash_id</span> <span class="pre">)</span></code> - Retrieves and sets the loco/invert from the specified stash</a><a class="headerlink" href="#pickup-stash-stash-id-retrieves-and-sets-the-loco-invert-from-the-specified-stash" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Retrieves and sets the loco/invert from the specified stash location.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>stash_id</strong> - id of the stash location to store the value (0-???) <br /></p>
<p><hr class="hr-dashed" /></p>
<hr class="docutils" />
</section>
</section>
<section id="conditional-statements">
<span id="exrail-conditional-statements"></span><h3><a class="toc-backref" href="#id36" role="doc-backlink">Conditional Statements</a><a class="headerlink" href="#conditional-statements" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id2">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#if-vpin-else-endif-execute-commands-if-the-conditions-are-met" id="id95"><code class="docutils literal notranslate"><span class="pre">IF</span> <span class="pre">(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> … ELSE … ENDIF  - Execute commands if the conditions are met</a></p></li>
<li><p><a class="reference internal" href="#ifnot-vpin-else-endif-execute-commands-if-the-conditions-are-not-met" id="id96"><code class="docutils literal notranslate"><span class="pre">IFNOT</span> <span class="pre">(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> … ELSE … ENDIF  - Execute commands if the conditions are NOT met</a></p></li>
<li><p><a class="reference internal" href="#else-alternate-logic-to-any-if-related-command-returning-false" id="id97"><code class="docutils literal notranslate"><span class="pre">ELSE</span></code> - Alternate logic to any IF related command returning False</a></p></li>
<li><p><a class="reference internal" href="#endif-required-to-end-an-if-ifnot-etc" id="id98"><code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> - Required to end an IF/IFNOT/etc.</a></p></li>
<li><p><a class="reference internal" href="#at-vpin-halt-command-execution-until-the-sensor-is-set" id="id99"><code class="docutils literal notranslate"><span class="pre">AT(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Halt command execution until the sensor is set</a></p></li>
<li><p><a class="reference internal" href="#after-vpin-debounce-time-halt-command-execution-until-the-sensor-is-cleared" id="id100"><code class="docutils literal notranslate"><span class="pre">AFTER(</span> <span class="pre">vpin</span> <span class="pre">[,debounce_time]</span> <span class="pre">)</span></code> - Halt command execution until the sensor is cleared</a></p></li>
</ul>
</nav>
<p>There are numerous conditional statements available to influence activities based on the states of sensors, signals, turnouts/points, and other items.</p>
<p>Any directive on this page starting with <code class="docutils literal notranslate"><span class="pre">IF</span></code> must have an associated <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> statement, and optionally an <code class="docutils literal notranslate"><span class="pre">ELSE</span></code> statement if an alternative activity is to be performed.</p>
<p>If a conditional statement is part of an automation sequence, the sequence still needs to be terminated with a <code class="docutils literal notranslate"><span class="pre">DONE</span></code>, <code class="docutils literal notranslate"><span class="pre">FOLLOW()</span></code>, or <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> statement.</p>
<p>This include <code class="docutils literal notranslate"><span class="pre">IFNOT()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFRED()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFAMBER()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFGREEN()</span></code>,</p>
<p>Refer also to <a class="reference internal" href="#correct-use-of-done-endif-and-follow-statements"><span class="std std-ref">Correct use of DONE, ENDIF, and FOLLOW() statements</span></a>.</p>
<p><hr class="hr-dashed" /></p>
<section id="if-vpin-else-endif-execute-commands-if-the-conditions-are-met">
<span id="if"></span><h4><a class="toc-backref" href="#id95" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IF</span> <span class="pre">(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> … ELSE … ENDIF  - Execute commands if the conditions are met</a><a class="headerlink" href="#if-vpin-else-endif-execute-commands-if-the-conditions-are-met" title="Link to this heading"></a></h4>
<p>Perform the following block of commands if the specified sensor is active.</p>
<p>Optionally be followed by an <code class="docutils literal notranslate"><span class="pre">ELSE</span></code> somewhere in the following commands.
Must be followed by an <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> somewhere in the following commands.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to check <br /></p>
<p>Also see <code class="docutils literal notranslate"><span class="pre">IFNOT()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFRED()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFAMBER()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFGREEN()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFCLOSED()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFTHROWN()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFRANDOM()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFTTPOSITION()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFRE()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFTIMEOUT()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFGTE()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFLT()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFLOCO()</span></code>, <code class="docutils literal notranslate"><span class="pre">IFRESERVE()</span></code></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifnot-vpin-else-endif-execute-commands-if-the-conditions-are-not-met">
<span id="ifnot"></span><h4><a class="toc-backref" href="#id96" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFNOT</span> <span class="pre">(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> … ELSE … ENDIF  - Execute commands if the conditions are NOT met</a><a class="headerlink" href="#ifnot-vpin-else-endif-execute-commands-if-the-conditions-are-not-met" title="Link to this heading"></a></h4>
<p>Perform the following block of commands if the specified sensor is not active.</p>
<p>Optionally be followed by an <code class="docutils literal notranslate"><span class="pre">ELSE</span></code> somewhere in the following commands.
Must be followed by an <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> somewhere in the following commands.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to check <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="else-alternate-logic-to-any-if-related-command-returning-false">
<span id="else"></span><h4><a class="toc-backref" href="#id97" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ELSE</span></code> - Alternate logic to any IF related command returning False</a><a class="headerlink" href="#else-alternate-logic-to-any-if-related-command-returning-false" title="Link to this heading"></a></h4>
<p>Provides alternative logic to any IF related command returning False.</p>
<p>Must be proceeded by an <code class="docutils literal notranslate"><span class="pre">IF()</span></code> somewhere in the preceding commands.
Must be followed by an <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> somewhere in the following commands.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="endif-required-to-end-an-if-ifnot-etc">
<span id="endif"></span><h4><a class="toc-backref" href="#id98" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> - Required to end an IF/IFNOT/etc.</a><a class="headerlink" href="#endif-required-to-end-an-if-ifnot-etc" title="Link to this heading"></a></h4>
<p>Required to end an IF/IFNOT/etc. (Used in all IF.. functions).</p>
<p>Optionally be proceeded by an <code class="docutils literal notranslate"><span class="pre">ELSE</span></code> somewhere in the preceding commands.
Must be proceeded by an <code class="docutils literal notranslate"><span class="pre">IF()</span></code> somewhere in the preceding commands.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="at-vpin-halt-command-execution-until-the-sensor-is-set">
<span id="at"></span><h4><a class="toc-backref" href="#id99" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AT(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Halt command execution until the sensor is set</a><a class="headerlink" href="#at-vpin-halt-command-execution-until-the-sensor-is-set" title="Link to this heading"></a></h4>
<p>Halt the execution of the current block of commands until the sensor is set.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to check <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="after-vpin-debounce-time-halt-command-execution-until-the-sensor-is-cleared">
<span id="after"></span><h4><a class="toc-backref" href="#id100" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AFTER(</span> <span class="pre">vpin</span> <span class="pre">[,debounce_time]</span> <span class="pre">)</span></code> - Halt command execution until the sensor is cleared</a><a class="headerlink" href="#after-vpin-debounce-time-halt-command-execution-until-the-sensor-is-cleared" title="Link to this heading"></a></h4>
<p>Halt the execution of the current block of commands until the sensor is cleared.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to check <br /> &gt; <strong>debounce_time</strong> -  optional debounce time (default 500mS) <br /></p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="objects-definition-and-control">
<h2><a class="toc-backref" href="#id37" role="doc-backlink">Objects - Definition and Control</a><a class="headerlink" href="#objects-definition-and-control" title="Link to this heading"></a></h2>
<section id="create-and-manage-hal-device-objects">
<h3><a class="toc-backref" href="#id38" role="doc-backlink">Create and manage HAL device objects</a><a class="headerlink" href="#create-and-manage-hal-device-objects" title="Link to this heading"></a></h3>
<p><hr class="hr-dashed" /></p>
<section id="hal-device-parameters-create-a-hal-device-in-myautomation-h">
<span id="hal"></span><h4><code class="docutils literal notranslate"><span class="pre">HAL(</span> <span class="pre">device,</span> <span class="pre">parameters</span> <span class="pre">)</span></code> - Create a HAL device in myAutomation.h<a class="headerlink" href="#hal-device-parameters-create-a-hal-device-in-myautomation-h" title="Link to this heading"></a></h4>
<p>Create a HAL device in myAutomation.h rather than needing to use myHal.cpp</p>
<p><em>Parameters:</em> <br /> &gt; <strong>device</strong> - device <br /> &gt; <strong>parameters</strong> -  as needed <br /></p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a third PCA9685 device following the first two default devices at Vpin 132 and I2C address 0x42</span>
<span class="n">HAL</span><span class="p">(</span><span class="n">PCA9685</span><span class="p">,</span><span class="w"> </span><span class="mi">132</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mh">0x42</span><span class="p">)</span>

<span class="c1">// Define a third MCP23017 device following the first two default devices at Vpin 196 and I2C address 0x22</span>
<span class="n">HAL</span><span class="p">(</span><span class="n">MCP23017</span><span class="p">,</span><span class="w"> </span><span class="mi">196</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mh">0x22</span><span class="p">)</span>

<span class="c1">// Define a Mega2560 based EX-IOExpander device starting at Vpin 800 at the default I2C address of 0x65</span>
<span class="n">HAL</span><span class="p">(</span><span class="n">EXIOExpander</span><span class="p">,</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w"> </span><span class="mi">62</span><span class="p">,</span><span class="w"> </span><span class="mh">0x65</span><span class="p">)</span>

<span class="c1">// Define an EX-Turntable device at the default Vpin 600 and I2C address of 0x60</span>
<span class="n">HAL</span><span class="p">(</span><span class="n">EXTurntable</span><span class="p">,</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x60</span><span class="p">)</span>
</pre></div>
</div>
</details><p><hr class="hr-dashed" /></p>
</section>
<section id="hal-ignore-defaults-disable-default-mcp23017-and-pca9685-hal-devices">
<span id="hal-ignore-defaults"></span><h4><code class="docutils literal notranslate"><span class="pre">HAL_IGNORE_DEFAULTS</span></code> - Disable default MCP23017 and PCA9685 HAL devices<a class="headerlink" href="#hal-ignore-defaults-disable-default-mcp23017-and-pca9685-hal-devices" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Disable default MCP23017 and PCA9685 HAL devices</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
</section>
</section>
<hr class="docutils" />
<section id="signal-objects-definition-and-control">
<h3><a class="toc-backref" href="#id39" role="doc-backlink">Signal Objects - Definition and Control</a><a class="headerlink" href="#signal-objects-definition-and-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id3">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#signal-red-pin-amber-pin-green-pin-define-a-pin-based-signal" id="id101"><code class="docutils literal notranslate"><span class="pre">SIGNAL(</span> <span class="pre">red_pin,</span> <span class="pre">amber_pin,</span> <span class="pre">green_pin</span> <span class="pre">)</span></code> - Define a pin based signal</a></p></li>
<li><p><a class="reference internal" href="#signalh-red-pin-amber-pin-green-pin-define-a-pin-based-signal-with-active-high-pins" id="id102"><code class="docutils literal notranslate"><span class="pre">SIGNALH(</span> <span class="pre">red_pin,</span> <span class="pre">amber_pin,</span> <span class="pre">green_pin</span> <span class="pre">)</span></code> - Define a pin based signal with active high pins</a></p></li>
<li><p><a class="reference internal" href="#servo-signal-vpin-red-pos-amber-pos-green-pos-define-a-servo-based-signal" id="id103"><code class="docutils literal notranslate"><span class="pre">SERVO_SIGNAL(</span> <span class="pre">vpin,</span> <span class="pre">red_pos,</span> <span class="pre">amber_pos,</span> <span class="pre">green_pos</span> <span class="pre">)</span></code> - Define a servo based signal</a></p></li>
<li><p><a class="reference internal" href="#dcc-signal-id-addr-sub-addr-define-a-dcc-accessory-signal" id="id104"><code class="docutils literal notranslate"><span class="pre">DCC_SIGNAL(</span> <span class="pre">id,</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Define a DCC accessory signal</a></p></li>
<li><p><a class="reference internal" href="#dccx-signal-address-redaspect-amberaspect-greenaspect-defines-a-signal-with-id-as-dcc-address" id="id105"><code class="docutils literal notranslate"><span class="pre">DCCX_SIGNAL(</span> <span class="pre">Address,</span> <span class="pre">redAspect,</span> <span class="pre">amberAspect,</span> <span class="pre">greenAspect</span> <span class="pre">)</span></code> - Defines a signal (with id as dcc address)</a></p></li>
<li><p><a class="reference internal" href="#virtual-signal-id-define-a-virtual-signal" id="id106"><code class="docutils literal notranslate"><span class="pre">VIRTUAL_SIGNAL(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Define a virtual signal</a></p></li>
<li><p><a class="reference internal" href="#ifred-signal-id-test-if-signal-is-red" id="id107"><code class="docutils literal notranslate"><span class="pre">IFRED(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is red</a></p></li>
<li><p><a class="reference internal" href="#ifamber-signal-id-test-if-signal-is-amber" id="id108"><code class="docutils literal notranslate"><span class="pre">IFAMBER(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is amber</a></p></li>
<li><p><a class="reference internal" href="#ifgreen-signal-id-test-if-signal-is-green" id="id109"><code class="docutils literal notranslate"><span class="pre">IFGREEN(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is green</a></p></li>
<li><p><a class="reference internal" href="#green-signal-id-set-a-defined-signal-to-green" id="id110"><code class="docutils literal notranslate"><span class="pre">GREEN(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set a defined signal to GREEN</a></p></li>
<li><p><a class="reference internal" href="#amber-signal-id-set-a-defined-signal-to-amber" id="id111"><code class="docutils literal notranslate"><span class="pre">AMBER(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set a defined signal to Amber</a></p></li>
<li><p><a class="reference internal" href="#red-signal-id-set-defined-signal-to-red" id="id112"><code class="docutils literal notranslate"><span class="pre">RED(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set defined signal to Red</a></p></li>
<li><p><a class="reference internal" href="#aspect-address-aspect-command-for-dcc-extended-accessories" id="id113"><code class="docutils literal notranslate"><span class="pre">ASPECT(</span> <span class="pre">address,</span> <span class="pre">aspect</span> <span class="pre">)</span></code> - Command for DCC Extended Accessories</a></p></li>
<li><p><a class="reference internal" href="#ongreen-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-green" id="id114"><code class="docutils literal notranslate"><span class="pre">ONGREEN(</span> <span class="pre">signal_id)</span></code> - Define event handler for when a signal is set to the green</a></p></li>
<li><p><a class="reference internal" href="#onamber-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-amber" id="id115"><code class="docutils literal notranslate"><span class="pre">ONAMBER(</span> <span class="pre">signal_id)</span></code> - Define event handler for when a signal is set to the amber</a></p></li>
<li><p><a class="reference internal" href="#onred-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-red-aspect" id="id116"><code class="docutils literal notranslate"><span class="pre">ONRED(</span> <span class="pre">signal_id)</span></code> - Define event handler for when a signal is set to the red aspect</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="signal-red-pin-amber-pin-green-pin-define-a-pin-based-signal">
<span id="signal"></span><h4><a class="toc-backref" href="#id101" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SIGNAL(</span> <span class="pre">red_pin,</span> <span class="pre">amber_pin,</span> <span class="pre">green_pin</span> <span class="pre">)</span></code> - Define a pin based signal</a><a class="headerlink" href="#signal-red-pin-amber-pin-green-pin-define-a-pin-based-signal" title="Link to this heading"></a></h4>
<p>Define a pin based signal, which requires three active low pins to be defined to correspond with red, amber, and green lights. Active low means they are activated when the associated pins are set to 0V or ground.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>red_pin</strong> - vpin of the red LED. Also defines the signal_id. <br /> &gt; <strong>amber_pin</strong> - vpin of the amber LED <br /> &gt; <strong>green_pin</strong> - vpin of the green LED <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="signalh-red-pin-amber-pin-green-pin-define-a-pin-based-signal-with-active-high-pins">
<span id="signalh"></span><h4><a class="toc-backref" href="#id102" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SIGNALH(</span> <span class="pre">red_pin,</span> <span class="pre">amber_pin,</span> <span class="pre">green_pin</span> <span class="pre">)</span></code> - Define a pin based signal with active high pins</a><a class="headerlink" href="#signalh-red-pin-amber-pin-green-pin-define-a-pin-based-signal-with-active-high-pins" title="Link to this heading"></a></h4>
<p>As above to define a pin based signal, but with active high pins instead. Active high means they are activated when the associated pins are set to 5V (or 3.3V if using a 3.3V device).</p>
<p>For both the SIGNAL/SIGNALH commands, signal colour is set using the pin defined for the red pin. If the signal only has two colours (e.g. RED/GREEN), set the unused colour’s pin to 0.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>red_pin</strong> - vpin of the red LED. Also defines the signal_id. <br /> &gt; <strong>amber_pin</strong> - vpin of the amber LED <br /> &gt; <strong>green_pin</strong> - vpin of the green LED <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="servo-signal-vpin-red-pos-amber-pos-green-pos-define-a-servo-based-signal">
<span id="servo-signal"></span><h4><a class="toc-backref" href="#id103" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERVO_SIGNAL(</span> <span class="pre">vpin,</span> <span class="pre">red_pos,</span> <span class="pre">amber_pos,</span> <span class="pre">green_pos</span> <span class="pre">)</span></code> - Define a servo based signal</a><a class="headerlink" href="#servo-signal-vpin-red-pos-amber-pos-green-pos-define-a-servo-based-signal" title="Link to this heading"></a></h4>
<p>Define a servo based signal, such as semaphore signals. Each position is an angle to turn the servo to, similar to the SERVO/SERVO2 commands, and SERVO_TURNOUT</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin of the servo <br /> &gt; <strong>red_pos</strong> - position to move the servo to for a red signal <br /> &gt; <strong>amber_pos</strong> - position to move the servo to for a amber signal <br /> &gt; <strong>green_pos</strong> - position to move the servo to for a green signal <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="dcc-signal-id-addr-sub-addr-define-a-dcc-accessory-signal">
<span id="dcc-signal"></span><h4><a class="toc-backref" href="#id104" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DCC_SIGNAL(</span> <span class="pre">id,</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Define a DCC accessory signal</a><a class="headerlink" href="#dcc-signal-id-addr-sub-addr-define-a-dcc-accessory-signal" title="Link to this heading"></a></h4>
<p>Define a DCC accessory signal. Control the colour or aspect of these via the defined <code class="docutils literal notranslate"><span class="pre">id</span></code></p>
</section>
<section id="dccx-signal-address-redaspect-amberaspect-greenaspect-defines-a-signal-with-id-as-dcc-address">
<span id="dccex-signal"></span><h4><a class="toc-backref" href="#id105" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DCCX_SIGNAL(</span> <span class="pre">Address,</span> <span class="pre">redAspect,</span> <span class="pre">amberAspect,</span> <span class="pre">greenAspect</span> <span class="pre">)</span></code> - Defines a signal (with id as dcc address)</a><a class="headerlink" href="#dccx-signal-address-redaspect-amberaspect-greenaspect-defines-a-signal-with-id-as-dcc-address" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>This defines a signal (with id same as dcc address) that can be operated
by the RED/AMBER/GREEN commands.   In each case the command uses the signal address to refer to the signal and the aspect chosen depends on the use of the RED AMBER or GREEN command sent. Other aspects may be sent but will require the direct use of the ASPECT command.</p>
<p>The IFRED/IFAMBER/IFGREEN  and ONRED/ONAMBER/ONGREEN commands continue to operate as for any other signal type. It is important to be aware that use of the ASPECT (see below) or &lt;A&gt; commands will correctly set the IF flags and call the ON handlers if ASPECT is used to set one of the three aspects defined in the DCCX_SIGNAL command.</p>
<p>Direct use of other aspects does not affect the signal flags. ASPECT and &lt;A&gt; can be used without defining any signal if the flag management or ON event handlers are not required.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="virtual-signal-id-define-a-virtual-signal">
<span id="virtual-signal"></span><h4><a class="toc-backref" href="#id106" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">VIRTUAL_SIGNAL(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Define a virtual signal</a><a class="headerlink" href="#virtual-signal-id-define-a-virtual-signal" title="Link to this heading"></a></h4>
<p>Define a virtual signal, which is backed by another automation sequence</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id (or alias) of the virtual signal <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifred-signal-id-test-if-signal-is-red">
<span id="ifred"></span><h4><a class="toc-backref" href="#id107" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFRED(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is red</a><a class="headerlink" href="#ifred-signal-id-test-if-signal-is-red" title="Link to this heading"></a></h4>
<p>Test if signal is red.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id (or alias) of the virtual signal to test <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifamber-signal-id-test-if-signal-is-amber">
<span id="ifamber"></span><h4><a class="toc-backref" href="#id108" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFAMBER(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is amber</a><a class="headerlink" href="#ifamber-signal-id-test-if-signal-is-amber" title="Link to this heading"></a></h4>
<p>Test if signal is amber</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id (or alias) of the virtual signal to test <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifgreen-signal-id-test-if-signal-is-green">
<span id="ifgreen"></span><h4><a class="toc-backref" href="#id109" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFGREEN(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is green</a><a class="headerlink" href="#ifgreen-signal-id-test-if-signal-is-green" title="Link to this heading"></a></h4>
<p>Test if signal is green</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id (or alias) of the virtual signal to test <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="green-signal-id-set-a-defined-signal-to-green">
<span id="green"></span><h4><a class="toc-backref" href="#id110" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">GREEN(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set a defined signal to GREEN</a><a class="headerlink" href="#green-signal-id-set-a-defined-signal-to-green" title="Link to this heading"></a></h4>
<p>Set a defined signal to GREEN (see SIGNAL).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id (or alias) of the virtual signal to set <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="amber-signal-id-set-a-defined-signal-to-amber">
<span id="amber"></span><h4><a class="toc-backref" href="#id111" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AMBER(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set a defined signal to Amber</a><a class="headerlink" href="#amber-signal-id-set-a-defined-signal-to-amber" title="Link to this heading"></a></h4>
<p>Set a defined signal to Amber (See SIGNAL).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id (or alias) of the virtual signal to set <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="red-signal-id-set-defined-signal-to-red">
<span id="red"></span><h4><a class="toc-backref" href="#id112" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RED(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set defined signal to Red</a><a class="headerlink" href="#red-signal-id-set-defined-signal-to-red" title="Link to this heading"></a></h4>
<p>Set defined signal to Red (See SIGNAL).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id of the virtual signal to set|BR|</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="aspect-address-aspect-command-for-dcc-extended-accessories">
<span id="aspect"></span><h4><a class="toc-backref" href="#id113" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ASPECT(</span> <span class="pre">address,</span> <span class="pre">aspect</span> <span class="pre">)</span></code> - Command for DCC Extended Accessories</a><a class="headerlink" href="#aspect-address-aspect-command-for-dcc-extended-accessories" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>This command sends an extended accessory packet to the track, normally used to set
a signal aspect. Aspect numbers are undefined as standards except for 0 which is
always considered a stop.  The exact aspect codes to be used must be determined from the documentation for the accessory decoder in use.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ongreen-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-green">
<span id="ongreen"></span><h4><a class="toc-backref" href="#id114" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONGREEN(</span> <span class="pre">signal_id)</span></code> - Define event handler for when a signal is set to the green</a><a class="headerlink" href="#ongreen-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-green" title="Link to this heading"></a></h4>
<p>Define an event handler for when a signal is set to the green aspect.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id (or alias) of the virtual signal to set <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onamber-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-amber">
<span id="onamber"></span><h4><a class="toc-backref" href="#id115" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONAMBER(</span> <span class="pre">signal_id)</span></code> - Define event handler for when a signal is set to the amber</a><a class="headerlink" href="#onamber-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-amber" title="Link to this heading"></a></h4>
<p>Define an event handler for when a signal is set to the amber aspect.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id (or alias) of the virtual signal to set <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onred-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-red-aspect">
<span id="onred"></span><h4><a class="toc-backref" href="#id116" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONRED(</span> <span class="pre">signal_id)</span></code> - Define event handler for when a signal is set to the red aspect</a><a class="headerlink" href="#onred-signal-id-define-event-handler-for-when-a-signal-is-set-to-the-red-aspect" title="Link to this heading"></a></h4>
<p>Define an event handler for when a signal is set to the red aspect.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signal_id</strong> - id (or alias) of the virtual signal to set <br /></p>
<p><hr class="hr-dashed" /></p>
<details class="summary-signal-example-click-to-show">
<summary>Signal example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SIGNAL</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span><span class="w">                </span><span class="c1">// Active low red/amber/green signal using pins 25/26/27 directly on the CommandStation.</span>
<span class="n">SIGNALH</span><span class="p">(</span><span class="mi">164</span><span class="w"> </span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">165</span><span class="p">)</span><span class="w">              </span><span class="c1">// Active high red/green signal using the first two pins of an MCP23017 I/O expander module.</span>
<span class="n">SERVO_SIGNAL</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">)</span><span class="w">  </span><span class="c1">// Servo based signal using the first PCA9685 servo module.</span>

<span class="n">GREEN</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Sets our active low signal to green.</span>
<span class="n">GREEN</span><span class="p">(</span><span class="mi">164</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Sets our active high signal to green.</span>
<span class="n">GREEN</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span><span class="w">                        </span><span class="c1">// Sets our servo based signal to green.</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="turnout-point-objects-definition-and-control">
<h3><a class="toc-backref" href="#id40" role="doc-backlink">Turnout/Point Objects - Definition and Control</a><a class="headerlink" href="#turnout-point-objects-definition-and-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id4">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#turnout-id-addr-sub-addr-description-define-a-dcc-accessory-turnout-point" id="id117"><code class="docutils literal notranslate"><span class="pre">TURNOUT(</span> <span class="pre">id,</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turnout/point</a></p></li>
<li><p><a class="reference internal" href="#turnoutl-id-addr-description-define-a-dcc-accessory-turnout-point" id="id118"><code class="docutils literal notranslate"><span class="pre">TURNOUTL(</span> <span class="pre">id,</span> <span class="pre">addr</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turnout/point</a></p></li>
<li><p><a class="reference internal" href="#pin-turnout-id-pin-description-define-a-pin-operated-turnout" id="id119"><code class="docutils literal notranslate"><span class="pre">PIN_TURNOUT(</span> <span class="pre">id,</span> <span class="pre">pin</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a pin operated turnout</a></p></li>
<li><p><a class="reference internal" href="#servo-turnout-id-pin-active-angle-inactive-angle-profile-description-define-a-servo-turnout-point" id="id120"><code class="docutils literal notranslate"><span class="pre">SERVO_TURNOUT(</span> <span class="pre">id,</span> <span class="pre">pin,</span> <span class="pre">active_angle,</span> <span class="pre">inactive_angle,</span> <span class="pre">profile</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a servo turnout/point</a></p></li>
<li><p><a class="reference internal" href="#virtual-turnout-id-description-define-a-virtual-turnout-which-is-backed-by-another-automation-sequence" id="id121"><code class="docutils literal notranslate"><span class="pre">VIRTUAL_TURNOUT(</span> <span class="pre">id</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a virtual turnout, which is backed by another automation sequence</a></p></li>
<li><p><a class="reference internal" href="#ifclosed-turnout-id-test-if-a-turnout-point-is-closed" id="id122"><code class="docutils literal notranslate"><span class="pre">IFCLOSED(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Test if a turnout/point is closed</a></p></li>
<li><p><a class="reference internal" href="#ifthrown-turnout-id-test-if-a-turnout-point-is-thrown" id="id123"><code class="docutils literal notranslate"><span class="pre">IFTHROWN(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Test if a turnout/point is thrown</a></p></li>
<li><p><a class="reference internal" href="#onclose-turnout-id-event-handler-for-when-a-turnout-point-is-closed" id="id124"><code class="docutils literal notranslate"><span class="pre">ONCLOSE(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Event handler for when a turnout/point is closed</a></p></li>
<li><p><a class="reference internal" href="#onthrow-turnout-id-event-handler-for-when-a-turnout-point-is-thrown" id="id125"><code class="docutils literal notranslate"><span class="pre">ONTHROW(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Event handler for when a turnout/point is thrown</a></p></li>
<li><p><a class="reference internal" href="#close-turnout-id-close-a-turnout-point" id="id126"><code class="docutils literal notranslate"><span class="pre">CLOSE(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Close a turnout/point</a></p></li>
<li><p><a class="reference internal" href="#throw-turnout-id-throw-a-turnout-point" id="id127"><code class="docutils literal notranslate"><span class="pre">THROW(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Throw a turnout/point</a></p></li>
<li><p><a class="reference internal" href="#toggle-turnout-turnout-id-toggle-a-defined-turnout-point-between-close-throw" id="id128"><code class="docutils literal notranslate"><span class="pre">TOGGLE_TURNOUT(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Toggle a defined turnout/point between CLOSE/THROW</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<p>All the below turnout/point definitions will define turnouts/points that are advertised to <a class="reference internal" href="../reference/software/withrottle-vs-native-commands.html"><span class="doc">wiThrottle Protocol</span></a> apps, <a class="reference internal" href="../throttles/software/engine-driver.html"><span class="doc">Engine Driver</span></a>, and <a class="reference internal" href="../throttles/software/jmri.html"><span class="doc">JMRI</span></a>, unless the HIDDEN keyword is used.</p>
<p>“description” is an optional parameter, and must be enclosed in quotes “”. If you don’t wish this turnout/point to be advertised to throttles, then substitute the word HIDDEN (with no “”) instead of the description.</p>
<p><hr class="hr-dashed" /></p>
<section id="turnout-id-addr-sub-addr-description-define-a-dcc-accessory-turnout-point">
<span id="turnout"></span><h4><a class="toc-backref" href="#id117" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">TURNOUT(</span> <span class="pre">id,</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turnout/point</a><a class="headerlink" href="#turnout-id-addr-sub-addr-description-define-a-dcc-accessory-turnout-point" title="Link to this heading"></a></h4>
<p>Define a DCC accessory turnout/point. Note that DCC linear addresses are not supported, and must be converted to address/subaddress in order to be defined. Refer to the <a class="reference internal" href="../reference/downloads/documents.html#stationary-decoder-address-table-xlsx-spreadsheet"><span class="std std-ref">Stationary Decoder Address Table (xlsx Spreadsheet)</span></a> for help on these conversions. (or see TURNOUTL below).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - identifier of the Turnout/Point <br /> &gt; <strong>addr</strong> - ranges from 0 to 511 <br /> &gt; <strong>subaddr</strong> - ranges from 0 to 3 <br /> &gt; <strong>description</strong> - The description that will be assigned to the turnout/point <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="turnoutl-id-addr-description-define-a-dcc-accessory-turnout-point">
<span id="turnoutl"></span><h4><a class="toc-backref" href="#id118" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">TURNOUTL(</span> <span class="pre">id,</span> <span class="pre">addr</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turnout/point</a><a class="headerlink" href="#turnoutl-id-addr-description-define-a-dcc-accessory-turnout-point" title="Link to this heading"></a></h4>
<p>Define a DCC accessory turnout/point.  This command will convert a linear address to the address/subaddress format using the TURNOUT command above.</p>
<p>Note when providing the name of the profile that the profile names are case sensitive, and must be written exactly as they appear (e.g. Bounce, not bounce or BOUNCE).</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pin-turnout-id-pin-description-define-a-pin-operated-turnout">
<span id="pin-turnout"></span><h4><a class="toc-backref" href="#id119" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PIN_TURNOUT(</span> <span class="pre">id,</span> <span class="pre">pin</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a pin operated turnout</a><a class="headerlink" href="#pin-turnout-id-pin-description-define-a-pin-operated-turnout" title="Link to this heading"></a></h4>
<p>Define a pin operated turnout. When sending a CLOSE command, the pin will be HIGH, and a THROW command will set the pin LOW.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - unique Id for the servo <br /> &gt; <strong>pin</strong> - vpin to which the servo is attached <br /> &gt; <strong>description</strong> - The description that will be assigned to the turnout/point <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="servo-turnout-id-pin-active-angle-inactive-angle-profile-description-define-a-servo-turnout-point">
<span id="servo-turnout"></span><h4><a class="toc-backref" href="#id120" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERVO_TURNOUT(</span> <span class="pre">id,</span> <span class="pre">pin,</span> <span class="pre">active_angle,</span> <span class="pre">inactive_angle,</span> <span class="pre">profile</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a servo turnout/point</a><a class="headerlink" href="#servo-turnout-id-pin-active-angle-inactive-angle-profile-description-define-a-servo-turnout-point" title="Link to this heading"></a></h4>
<p>Define a servo turnout/point. “active_angle” is for THROW, “inactive_angle” is for CLOSE, and profile is one of Instant, Fast, Medium, Slow or Bounce (although clearly we don’t recommend Bounce for turnouts/points!).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - unique Id for the servo <br /> &gt; <strong>pin</strong> - vpin to which the servo is attached <br /> &gt; <strong>active_angle</strong> - the PWM value corresponding to the servo position for THROWN state, normally in the range 102 to 490 <br /> &gt; <strong>inactive_angle</strong> - the PWM value corresponding to the servo position for CLOSED state, normally in the range 102 to 490 <br /> &gt; <strong>profile</strong> - one of <br />    - 0=Instant,  <br />    - 1=Fast (0.5 sec),  <br />    - 2=Medium (1 sec),  <br />    - 3=Slow (2 sec) and  <br />    - 4=Bounce (subject to revision) <br /> &gt; <strong>description</strong> - The description that will be assigned to the turnout/point <br /></p>
<p>Refer to <a class="reference internal" href="../reference/hardware/servo-module.html"><span class="doc">Connecting a Servo Module</span></a> for more information.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="virtual-turnout-id-description-define-a-virtual-turnout-which-is-backed-by-another-automation-sequence">
<span id="virtual-turnout"></span><h4><a class="toc-backref" href="#id121" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">VIRTUAL_TURNOUT(</span> <span class="pre">id</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a virtual turnout, which is backed by another automation sequence</a><a class="headerlink" href="#virtual-turnout-id-description-define-a-virtual-turnout-which-is-backed-by-another-automation-sequence" title="Link to this heading"></a></h4>
<p>Define a virtual turnout, which is backed by another automation sequence.</p>
<p>For a good example of this refer to <a class="reference internal" href="tips.html#realistic-turnout-sequences"><span class="std std-ref">Realistic turnout sequences</span></a>.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>turnout_id</strong> - The id of the turnout/point <br /> &gt; <strong>description</strong> - The description that will be assigned to the turnout/point <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifclosed-turnout-id-test-if-a-turnout-point-is-closed">
<span id="ifclosed"></span><h4><a class="toc-backref" href="#id122" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFCLOSED(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Test if a turnout/point is closed</a><a class="headerlink" href="#ifclosed-turnout-id-test-if-a-turnout-point-is-closed" title="Link to this heading"></a></h4>
<p><em>Parameters:</em> <br /> &gt; <strong>turnout_id</strong> - The id of the turnout/point to test <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifthrown-turnout-id-test-if-a-turnout-point-is-thrown">
<span id="ifthrown"></span><h4><a class="toc-backref" href="#id123" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFTHROWN(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Test if a turnout/point is thrown</a><a class="headerlink" href="#ifthrown-turnout-id-test-if-a-turnout-point-is-thrown" title="Link to this heading"></a></h4>
<p>Test if a turnout is thrown</p>
<p><em>Parameters:</em> <br /> &gt; <strong>turnout_id</strong> - The id of the turnout/point to test <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onclose-turnout-id-event-handler-for-when-a-turnout-point-is-closed">
<span id="onclose"></span><h4><a class="toc-backref" href="#id124" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONCLOSE(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Event handler for when a turnout/point is closed</a><a class="headerlink" href="#onclose-turnout-id-event-handler-for-when-a-turnout-point-is-closed" title="Link to this heading"></a></h4>
<p>Event handler for when a turnout/point is sent a close command. Note that there can be only one defined ONCLOSE event for a specific turnout/point.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>turnout_id</strong> - The id of the turnout/point <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onthrow-turnout-id-event-handler-for-when-a-turnout-point-is-thrown">
<span id="onthrow"></span><h4><a class="toc-backref" href="#id125" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONTHROW(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Event handler for when a turnout/point is thrown</a><a class="headerlink" href="#onthrow-turnout-id-event-handler-for-when-a-turnout-point-is-thrown" title="Link to this heading"></a></h4>
<p>Event handler for when a turnout/point is sent a throw command. Note that there can be only one defined ONTHROW event for a specific turnout/point.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>turnout_id</strong> - The id of the turnout/point <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="close-turnout-id-close-a-turnout-point">
<span id="close"></span><h4><a class="toc-backref" href="#id126" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">CLOSE(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Close a turnout/point</a><a class="headerlink" href="#close-turnout-id-close-a-turnout-point" title="Link to this heading"></a></h4>
<p>Closes a defined turnout/point.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>turnout_id</strong> - The id of the turnout/point to close <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="throw-turnout-id-throw-a-turnout-point">
<span id="throw"></span><h4><a class="toc-backref" href="#id127" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">THROW(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Throw a turnout/point</a><a class="headerlink" href="#throw-turnout-id-throw-a-turnout-point" title="Link to this heading"></a></h4>
<p>Throws a defined turnout/point.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>turnout_id</strong> - The id of the turnout/point to throw <br /></p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TURNOUT</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Coal Yard&quot;</span><span class="p">)</span><span class="w">                  </span><span class="c1">// DCC accessory turnout at linear address 101.</span>
<span class="n">PIN_TURNOUT</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">164</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Switching Yard&quot;</span><span class="p">)</span><span class="w">           </span><span class="c1">// Pin turnout on an MCP23017 I/O expander module.</span>
<span class="n">SERVO_TURNOUT</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">Slow</span><span class="p">,</span><span class="w"> </span><span class="n">HIDDEN</span><span class="p">)</span><span class="w">   </span><span class="c1">// A servo turnout on a PCA9685 servo module that is hidden from throttles.</span>
<span class="n">VIRTUAL_TURNOUT</span><span class="p">(</span><span class="mi">103</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Lumber Yard&quot;</span><span class="p">)</span><span class="w">               </span><span class="c1">// A virtual turnout which will trigger an automation sequence when CLOSE or THROW is sent.</span>
</pre></div>
</div>
</details><p><hr class="hr-dashed" /></p>
</section>
<section id="toggle-turnout-turnout-id-toggle-a-defined-turnout-point-between-close-throw">
<span id="toggle-turnout"></span><h4><a class="toc-backref" href="#id128" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">TOGGLE_TURNOUT(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Toggle a defined turnout/point between CLOSE/THROW</a><a class="headerlink" href="#toggle-turnout-turnout-id-toggle-a-defined-turnout-point-between-close-throw" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Toggles the state of the specified turnout/point between closed and thrown.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>turnout_id</strong> - The id of the turnout/point to throw <br /></p>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="turntable-traverser-objects-definition-and-control">
<h3><a class="toc-backref" href="#id41" role="doc-backlink">Turntable/Traverser Objects - Definition and Control</a><a class="headerlink" href="#turntable-traverser-objects-definition-and-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id5">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#movett-id-steps-activity-move-a-ex-tt-to-a-step-position-and-perform-an-activity" id="id129"><code class="docutils literal notranslate"><span class="pre">MOVETT(</span> <span class="pre">id,</span> <span class="pre">steps,</span> <span class="pre">activity</span> <span class="pre">)</span></code> - Move a <a href="../ex-turntable/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span></a> to a step position and perform an activity</a></p></li>
<li><p><a class="reference internal" href="#ifre-vpin-value-test-if-a-rotary-encoder-has-been-set-to-a-value" id="id130"><code class="docutils literal notranslate"><span class="pre">IFRE</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if a rotary encoder has been set to a value</a></p></li>
<li><p><a class="reference internal" href="#onchange-vpin-detects-a-rotary-encoder-has-changed-position" id="id131"><code class="docutils literal notranslate"><span class="pre">ONCHANGE(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Detects a rotary encoder has changed position</a></p></li>
<li><p><a class="reference internal" href="#turntable-features" id="id132">Turntable features</a></p></li>
<li><p><a class="reference internal" href="#dcc-turntable-id-home-angle-description-define-a-dcc-accessory-turntable-traverser" id="id133"><code class="docutils literal notranslate"><span class="pre">DCC_TURNTABLE(</span> <span class="pre">id,</span> <span class="pre">home_angle,</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turntable/traverser</a></p></li>
<li><p><a class="reference internal" href="#extt-turntable-id-vpin-home-angle-description-define-an-ex-turntable-turntable-traverser" id="id134"><code class="docutils literal notranslate"><span class="pre">EXTT_TURNTABLE(</span> <span class="pre">id,</span> <span class="pre">vpin,</span> <span class="pre">home_angle,</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define an EX-Turntable turntable/traverser</a></p></li>
<li><p><a class="reference internal" href="#tt-addposition-id-position-id-value-angle-description-add-a-turntable-position" id="id135"><code class="docutils literal notranslate"><span class="pre">TT_ADDPOSITION(</span> <span class="pre">id,</span> <span class="pre">position_id,</span> <span class="pre">value,</span> <span class="pre">angle</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Add a turntable position</a></p></li>
<li><p><a class="reference internal" href="#ifttposition-id-position-test-if-turntable-traverser-is-at-a-position" id="id136"><code class="docutils literal notranslate"><span class="pre">IFTTPOSITION(</span> <span class="pre">id,</span> <span class="pre">position</span> <span class="pre">)</span></code> - Test if turntable/traverser is at a position</a></p></li>
<li><p><a class="reference internal" href="#onrotate-id-event-handler-for-when-a-turntable-traverser-is-rotated" id="id137"><code class="docutils literal notranslate"><span class="pre">ONROTATE(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Event handler for when a turntable/traverser is rotated</a></p></li>
<li><p><a class="reference internal" href="#rotate-id-position-activity-rotate-an-ex-turntable-turntable-traverser" id="id138"><code class="docutils literal notranslate"><span class="pre">ROTATE(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">activity</span> <span class="pre">)</span></code> - Rotate an EX-Turntable turntable/traverser</a></p></li>
<li><p><a class="reference internal" href="#rotate-dcc-id-position-rotate-a-dcc-accessory-turntable-traverser" id="id139"><code class="docutils literal notranslate"><span class="pre">ROTATE_DCC(</span> <span class="pre">id,</span> <span class="pre">position</span> <span class="pre">)</span></code> - Rotate a DCC accessory turntable/traverser</a></p></li>
<li><p><a class="reference internal" href="#waitfortt-id-wait-for-ex-turntable-turntable-traverser-to-complete-a-rotation" id="id140"><code class="docutils literal notranslate"><span class="pre">WAITFORTT(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Wait for EX-Turntable turntable/traverser to complete a rotation</a></p></li>
</ul>
</nav>
<p>Also refer to <a class="reference internal" href="../ex-turntable/test-and-tune.html#ex-rail-automation"><span class="std std-ref">EX-RAIL automation</span></a>.</p>
<p><hr class="hr-dashed" /></p>
<section id="movett-id-steps-activity-move-a-ex-tt-to-a-step-position-and-perform-an-activity">
<span id="movett"></span><h4><a class="toc-backref" href="#id129" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">MOVETT(</span> <span class="pre">id,</span> <span class="pre">steps,</span> <span class="pre">activity</span> <span class="pre">)</span></code> - Move a <a href="../ex-turntable/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span></a> to a step position and perform an activity</a><a class="headerlink" href="#movett-id-steps-activity-move-a-ex-tt-to-a-step-position-and-perform-an-activity" title="Link to this heading"></a></h4>
<p>Move the specified <a href="../ex-turntable/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span></a> to the provided step position and perform the specified activity.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - The id of the turntable <br /> &gt; <strong>steps</strong> - The step position to move to <br /> &gt; <strong>activity</strong> - The activity to perform <br /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>From version 5.4.0, we highly recommend using our new turntable/traverser commands which allow turntables/traversers to be advertised to throttles similarly to how turnout/point objects are advertised and operated. Refer to <a class="reference internal" href="#turntable-features"><span class="std std-ref">Turntable features</span></a>.</p>
</div>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifre-vpin-value-test-if-a-rotary-encoder-has-been-set-to-a-value">
<span id="ifre"></span><h4><a class="toc-backref" href="#id130" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFRE</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if a rotary encoder has been set to a value</a><a class="headerlink" href="#ifre-vpin-value-test-if-a-rotary-encoder-has-been-set-to-a-value" title="Link to this heading"></a></h4>
<p>Test if a rotary encoder has been set to the specified value</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - The VPin the encoder is connected to <br /> &gt; <strong>value</strong> - value to test <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onchange-vpin-detects-a-rotary-encoder-has-changed-position">
<span id="onchange"></span><h4><a class="toc-backref" href="#id131" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONCHANGE(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Detects a rotary encoder has changed position</a><a class="headerlink" href="#onchange-vpin-detects-a-rotary-encoder-has-changed-position" title="Link to this heading"></a></h4>
<p>Detects a rotary encoder has changed position</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - The VPin the encoder is connected to <br /></p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ONCHANGE(700)     // If rotary encoder ID 700 change state do this sequence
  IFRE(700, 1)    // If rotary encoder ID 700 is at position 1, start ROUTE ID 123
    START(123)
  ENDIF
  IFRE(700, 2)    // If rotary encoder ID 700 is at position 2, start ROUTE ID 124
    START(124)
  ENDIF
  DONE
</pre></div>
</div>
</details><p><hr class="hr-dashed" /></p>
</section>
<section id="turntable-features">
<h4><a class="toc-backref" href="#id132" role="doc-backlink">Turntable features</a><a class="headerlink" href="#turntable-features" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p><hr class="hr-dashed" /></p>
<p>All the below turntable/traverser definitions will define turntables/traversers that are advertised to throttles that understand them, unless the HIDDEN keyword is used.</p>
<p>To fully define a turntable/traverser object, you need to define the object first, and then one or more positions.</p>
<p>“description” is an optional parameter, and must be enclosed in quotes “”. If you don’t wish this turntable/traverser to be advertised to throttles, then substitute the word HIDDEN (with no “”) instead of the description.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="dcc-turntable-id-home-angle-description-define-a-dcc-accessory-turntable-traverser">
<span id="dcc-turntable"></span><h4><a class="toc-backref" href="#id133" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DCC_TURNTABLE(</span> <span class="pre">id,</span> <span class="pre">home_angle,</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turntable/traverser</a><a class="headerlink" href="#dcc-turntable-id-home-angle-description-define-a-dcc-accessory-turntable-traverser" title="Link to this heading"></a></h4>
<p>Define a DCC accessory turntable/traverser at the specified <strong>id</strong> and the <strong>home_angle</strong> angle.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the turntable/traverser, valid IDs are 1 - 32767 <br /> &gt; <strong>home_angle</strong> - the angle of the home position, valid angles are 0 - 3600</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="extt-turntable-id-vpin-home-angle-description-define-an-ex-turntable-turntable-traverser">
<span id="extt-turntable"></span><h4><a class="toc-backref" href="#id134" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">EXTT_TURNTABLE(</span> <span class="pre">id,</span> <span class="pre">vpin,</span> <span class="pre">home_angle,</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define an EX-Turntable turntable/traverser</a><a class="headerlink" href="#extt-turntable-id-vpin-home-angle-description-define-an-ex-turntable-turntable-traverser" title="Link to this heading"></a></h4>
<p>Define an EX-Turntable turntable/traverser at the specified <strong>id</strong> and <strong>vpin</strong> with a <strong>home_angle</strong> angle.</p>
<p>This statement will create the <a href="../ex-turntable/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span></a> turntable/traverser object only, so you will need a separate <code class="docutils literal notranslate"><span class="pre">HAL()</span></code> statement for an <a href="../ex-turntable/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span></a> device to create the HAL device. It is not recommended to create it via “myHal.cpp”.</p>
<p>The HAL creation will require the <strong>vpin</strong> and <strong>i2c_address</strong> parameters.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the turntable/traverser, valid IDs are 1 - 32767 <br /> &gt; <strong>vpin</strong> - id of the vpin where the <a href="../ex-turntable/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span></a> device is located <br /> &gt; <strong>i2c_address</strong> - the I<sup>2</sup>C address of the <a href="../ex-turntable/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span></a> device <br /> &gt; <strong>home_angle</strong> - the angle of the home position, valid angles are 0 - 3600</p>
<p>Example creation and definition:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>HAL(EXTurntable,600,1,0x60)            // Create your EX-Turntable device driver
EXTT_TURNTABLE(1,600,45,&quot;My EX-Turntable&quot;)  // Create your EX-Turntable object to enable control
</pre></div>
</div>
<p><hr class="hr-dashed" /></p>
</section>
<section id="tt-addposition-id-position-id-value-angle-description-add-a-turntable-position">
<span id="tt-addposition"></span><h4><a class="toc-backref" href="#id135" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">TT_ADDPOSITION(</span> <span class="pre">id,</span> <span class="pre">position_id,</span> <span class="pre">value,</span> <span class="pre">angle</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Add a turntable position</a><a class="headerlink" href="#tt-addposition-id-position-id-value-angle-description-add-a-turntable-position" title="Link to this heading"></a></h4>
<p>Add a position to a turntable/traverser object <strong>turntable_id</strong> with position index <strong>position_id</strong>, step or DCC address <strong>value</strong>, <strong>angle</strong> degrees from home.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the turntable/traverser, which must be created prior to adding positions <br /> &gt; <strong>position_id</strong> - index of the position to add, valid positions are (1 - 48) <br /> &gt; <strong>value</strong> - either steps from home for EX-Turntable, or the linear DCC address for a DCC accessory turntable, valid values are (1 - 32767) <br /> &gt; <strong>angle</strong> - angle of the position from the home position, valid angles are (0 - 3600)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifttposition-id-position-test-if-turntable-traverser-is-at-a-position">
<span id="ifttposition"></span><h4><a class="toc-backref" href="#id136" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFTTPOSITION(</span> <span class="pre">id,</span> <span class="pre">position</span> <span class="pre">)</span></code> - Test if turntable/traverser is at a position</a><a class="headerlink" href="#ifttposition-id-position-test-if-turntable-traverser-is-at-a-position" title="Link to this heading"></a></h4>
<p>Tests if the turntable/traverser at the specified <strong>id</strong> is at the specified <strong>position</strong>.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the turntable/traverser to test. (1 - 32767) <br /> &gt; <strong>position</strong> - position to rotate to. (1 - 48)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onrotate-id-event-handler-for-when-a-turntable-traverser-is-rotated">
<span id="onrotate"></span><h4><a class="toc-backref" href="#id137" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONROTATE(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Event handler for when a turntable/traverser is rotated</a><a class="headerlink" href="#onrotate-id-event-handler-for-when-a-turntable-traverser-is-rotated" title="Link to this heading"></a></h4>
<p>Triggers the event handling mechanism for turntable/traverser <strong>id</strong> if configured. Note that there can be only one defined ONROTATE event for a specific turntable/traverser.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the turntable/traverser to test (1 - 32767)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="rotate-id-position-activity-rotate-an-ex-turntable-turntable-traverser">
<span id="rotate"></span><h4><a class="toc-backref" href="#id138" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROTATE(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">activity</span> <span class="pre">)</span></code> - Rotate an EX-Turntable turntable/traverser</a><a class="headerlink" href="#rotate-id-position-activity-rotate-an-ex-turntable-turntable-traverser" title="Link to this heading"></a></h4>
<p>Rotate an EX-Turntable turntable/traverser at the specified <strong>id</strong> to the specified <strong>position</strong>, and perform <strong>activity</strong>.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the turntable/traverser, valid IDs are (1 - 32767) <br /> &gt; <strong>position</strong> - position to rotate to, valid positions are (1 - 48) <br /> &gt; <strong>activity</strong> - refer to <a class="reference internal" href="../ex-turntable/test-and-tune.html#ex-turntable-commands"><span class="std std-ref">Ex-Turntable commands</span></a>, using the “EX-RAIL activity” column</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="rotate-dcc-id-position-rotate-a-dcc-accessory-turntable-traverser">
<span id="rotate-dcc"></span><h4><a class="toc-backref" href="#id139" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROTATE_DCC(</span> <span class="pre">id,</span> <span class="pre">position</span> <span class="pre">)</span></code> - Rotate a DCC accessory turntable/traverser</a><a class="headerlink" href="#rotate-dcc-id-position-rotate-a-dcc-accessory-turntable-traverser" title="Link to this heading"></a></h4>
<p>Rotate a DCC accessory turntable/traverser at the specified <strong>id</strong> to the specified <strong>position</strong>.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the turntable/traverser, valid IDs are (1 - 32767) <br /> &gt; <strong>position</strong> - position to rotate to, valid positions are (1 - 48)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="waitfortt-id-wait-for-ex-turntable-turntable-traverser-to-complete-a-rotation">
<span id="waitfortt"></span><h4><a class="toc-backref" href="#id140" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">WAITFORTT(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Wait for EX-Turntable turntable/traverser to complete a rotation</a><a class="headerlink" href="#waitfortt-id-wait-for-ex-turntable-turntable-traverser-to-complete-a-rotation" title="Link to this heading"></a></h4>
<p>Wait for the EX-Turntable turntable/traverser at <strong>id</strong> to complete a rotation. As no feedback can be received from DCC accessory turntables, this is only valid for EX-Turntable.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the turntable to test</p>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="sensors-inputs-reading-and-responding">
<h3><a class="toc-backref" href="#id42" role="doc-backlink">Sensors/Inputs - Reading and Responding</a><a class="headerlink" href="#sensors-inputs-reading-and-responding" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id7">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#jmri-sensor-vpin-count-creates-s-type-sensors-visible-to-jmri" id="id141"><code class="docutils literal notranslate"><span class="pre">JMRI_SENSOR(vpin</span> <span class="pre">[,count])</span></code> - Creates &lt;S&gt; type sensors visible to JMRI</a></p></li>
<li><p><a class="reference internal" href="#at-vpin-causes-a-sequence-to-wait-until-a-sensor-is-active-triggered" id="id142"><code class="docutils literal notranslate"><span class="pre">AT(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Causes a sequence to wait until a sensor is active/triggered</a></p></li>
<li><p><a class="reference internal" href="#after-vpin-causes-a-sequence-to-wait-until-after-a-sensor-has-been-triggered" id="id143"><code class="docutils literal notranslate"><span class="pre">AFTER(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Causes a sequence to wait until after a sensor has been triggered</a></p></li>
<li><p><a class="reference internal" href="#attimeout-vpin-timeout-ms-causes-a-sequence-to-wait-until-either-a-sensor-is-active-triggered-or-if-the-timer-runs-out" id="id144"><code class="docutils literal notranslate"><span class="pre">ATTIMEOUT(</span> <span class="pre">vpin,</span> <span class="pre">timeout_ms</span> <span class="pre">)</span></code> - Causes a sequence to wait until either a sensor is active/triggered, or if the timer runs out</a></p></li>
<li><p><a class="reference internal" href="#if-vpin-if-sensor-activated-or-latched-continue" id="id145"><code class="docutils literal notranslate"><span class="pre">IF(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - If sensor activated or latched, continue</a></p></li>
<li><p><a class="reference internal" href="#ifnot-vpin-if-sensor-not-activated-and-not-latched-continue" id="id146"><code class="docutils literal notranslate"><span class="pre">IFNOT(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - If sensor NOT activated and NOT latched, continue</a></p></li>
<li><p><a class="reference internal" href="#iftimeout-tests-if-timed-out-flag-has-been-set-by-an-attimeout-sensor-reading-attempt" id="id147"><code class="docutils literal notranslate"><span class="pre">IFTIMEOUT</span></code> - Tests if “timed out” flag has been set by an ATTIMEOUT() sensor reading attempt</a></p></li>
<li><p><a class="reference internal" href="#atgte-vpin-value-waits-for-an-analog-pin-to-reach-a-value" id="id148"><code class="docutils literal notranslate"><span class="pre">ATGTE(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Waits for an analog pin to reach a value</a></p></li>
<li><p><a class="reference internal" href="#atlt-vpin-value-waits-for-an-analog-pin-to-go-below-a-value" id="id149"><code class="docutils literal notranslate"><span class="pre">ATLT</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Waits for an analog pin to go below a value</a></p></li>
<li><p><a class="reference internal" href="#ifgte-vpin-value-test-if-analog-pin-reading-is-greater-than-or-equal-to-value" id="id150"><code class="docutils literal notranslate"><span class="pre">IFGTE(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if analog pin reading is greater than or equal to value</a></p></li>
<li><p><a class="reference internal" href="#iflt-vpin-value-test-if-analog-pin-reading-is-less-than-value" id="id151"><code class="docutils literal notranslate"><span class="pre">IFLT(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if analog pin reading is less than value</a></p></li>
<li><p><a class="reference internal" href="#attimout1-vpin-value-tba" id="id152"><code class="docutils literal notranslate"><span class="pre">ATTIMOUT1</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#attimout2-vpin-value-tba" id="id153"><code class="docutils literal notranslate"><span class="pre">ATTIMOUT2</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#drive-vpin-tba" id="id154"><code class="docutils literal notranslate"><span class="pre">DRIVE</span> <span class="pre">(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#latch-vpin-latches-a-sensor-on" id="id155"><code class="docutils literal notranslate"><span class="pre">LATCH(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Latches a sensor on</a></p></li>
<li><p><a class="reference internal" href="#unlatch-vpin-remove-latch-on-sensor" id="id156"><code class="docutils literal notranslate"><span class="pre">UNLATCH(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Remove LATCH on sensor</a></p></li>
<li><p><a class="reference internal" href="#onbutton-vpin-event-handler-for-debounced-button-presses" id="id157"><code class="docutils literal notranslate"><span class="pre">ONBUTTON(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Event handler for debounced button presses</a></p></li>
<li><p><a class="reference internal" href="#onsensor-vpin-event-handler-for-sensors" id="id158"><code class="docutils literal notranslate"><span class="pre">ONSENSOR(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Event handler for sensors</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="jmri-sensor-vpin-count-creates-s-type-sensors-visible-to-jmri">
<span id="jmri-sensor"></span><h4><a class="toc-backref" href="#id141" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">JMRI_SENSOR(vpin</span> <span class="pre">[,count])</span></code> - Creates &lt;S&gt; type sensors visible to JMRI</a><a class="headerlink" href="#jmri-sensor-vpin-count-creates-s-type-sensors-visible-to-jmri" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>This command causes the creation of JMRI &lt;S&gt; type sensors in a way that is simpler than repeating lines of &lt;S&gt; commands in mySetup.h.</p>
<ul class="simple">
<li><p>JMRI_SENSOR(100)   is equivalent to &lt;S 100 100 1&gt;</p></li>
<li><p>JMRI_SENSOR(100,16) will create &lt;S&gt; type sensors for vpins 100-115.</p></li>
</ul>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin to create <br /> &gt; <strong>count</strong> - optional. Number of sensors to create. Inclusive on vpin. Default is one (1)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="at-vpin-causes-a-sequence-to-wait-until-a-sensor-is-active-triggered">
<h4><a class="toc-backref" href="#id142" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AT(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Causes a sequence to wait until a sensor is active/triggered</a><a class="headerlink" href="#at-vpin-causes-a-sequence-to-wait-until-a-sensor-is-active-triggered" title="Link to this heading"></a></h4>
<p>A sequence will not progress until a sensor has been triggered.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to test</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="after-vpin-causes-a-sequence-to-wait-until-after-a-sensor-has-been-triggered">
<h4><a class="toc-backref" href="#id143" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AFTER(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Causes a sequence to wait until after a sensor has been triggered</a><a class="headerlink" href="#after-vpin-causes-a-sequence-to-wait-until-after-a-sensor-has-been-triggered" title="Link to this heading"></a></h4>
<p>A sequence will not progress until after a sensor has been triggered and then is off for 0.5 seconds.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to test</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="attimeout-vpin-timeout-ms-causes-a-sequence-to-wait-until-either-a-sensor-is-active-triggered-or-if-the-timer-runs-out">
<span id="attimeout"></span><h4><a class="toc-backref" href="#id144" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ATTIMEOUT(</span> <span class="pre">vpin,</span> <span class="pre">timeout_ms</span> <span class="pre">)</span></code> - Causes a sequence to wait until either a sensor is active/triggered, or if the timer runs out</a><a class="headerlink" href="#attimeout-vpin-timeout-ms-causes-a-sequence-to-wait-until-either-a-sensor-is-active-triggered-or-if-the-timer-runs-out" title="Link to this heading"></a></h4>
<p>A sequence will not progress until either a sensor is active/triggered, or if the timer runs out. It then continues and sets a testable “timed out” flag (see <code class="docutils literal notranslate"><span class="pre">IFTIMEOUT</span></code>).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to test <br /> &gt; <strong>timeout_ms</strong> - time/duration to wait for in milliseconds</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="if-vpin-if-sensor-activated-or-latched-continue">
<h4><a class="toc-backref" href="#id145" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IF(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - If sensor activated or latched, continue</a><a class="headerlink" href="#if-vpin-if-sensor-activated-or-latched-continue" title="Link to this heading"></a></h4>
<p>If sensor activated or latched, continue. Otherwise skip to ELSE or matching ENDIF.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to test</p>
<p>See the <a class="reference internal" href="#exrail-conditional-statements"><span class="std std-ref">Condititional Statments section</span></a> for more information on IF … ELSE … ENDIF commands.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifnot-vpin-if-sensor-not-activated-and-not-latched-continue">
<h4><a class="toc-backref" href="#id146" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFNOT(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - If sensor NOT activated and NOT latched, continue</a><a class="headerlink" href="#ifnot-vpin-if-sensor-not-activated-and-not-latched-continue" title="Link to this heading"></a></h4>
<p>If sensor NOT activated and NOT latched, continue. Otherwise skip to ELSE or matching ENDIF.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to test</p>
<p>See the <a class="reference internal" href="#exrail-conditional-statements"><span class="std std-ref">Condititional Statments section</span></a> for more information on IF … ELSE … ENDIF commands.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="iftimeout-tests-if-timed-out-flag-has-been-set-by-an-attimeout-sensor-reading-attempt">
<span id="iftimeout"></span><h4><a class="toc-backref" href="#id147" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFTIMEOUT</span></code> - Tests if “timed out” flag has been set by an ATTIMEOUT() sensor reading attempt</a><a class="headerlink" href="#iftimeout-tests-if-timed-out-flag-has-been-set-by-an-attimeout-sensor-reading-attempt" title="Link to this heading"></a></h4>
<p>Tests if “timed out” flag has been set by an ATTIMEOUT() sensor reading attempt.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p>Note that with the sensor commands <cite>IF()</cite>, <cite>IFNOT()</cite>, <cite>IFTIMEOUT()</cite>, <cite>AT()</cite>, <cite>ATTIMEOUT()</cite>, and <cite>AFTER()</cite>, you can use negative values to enable the use of active HIGH sensors.</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w">        </span><span class="c1">// Wait for pin 40 to go low.</span>
<span class="n">AT</span><span class="p">(</span><span class="mi">-40</span><span class="p">)</span><span class="w">       </span><span class="c1">// Wait for pin 40 to go high.</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="atgte-vpin-value-waits-for-an-analog-pin-to-reach-a-value">
<span id="atgte"></span><h4><a class="toc-backref" href="#id148" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ATGTE(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Waits for an analog pin to reach a value</a><a class="headerlink" href="#atgte-vpin-value-waits-for-an-analog-pin-to-reach-a-value" title="Link to this heading"></a></h4>
<p>Waits for an analog pin to reach the specified value.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - analogue pin. vpin (or alias) of the sensor to test <br /> &gt; <strong>value</strong> - value to test against</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="atlt-vpin-value-waits-for-an-analog-pin-to-go-below-a-value">
<span id="atlt"></span><h4><a class="toc-backref" href="#id149" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ATLT</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Waits for an analog pin to go below a value</a><a class="headerlink" href="#atlt-vpin-value-waits-for-an-analog-pin-to-go-below-a-value" title="Link to this heading"></a></h4>
<p>Waits for an analog pin to go below the specified value.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - analogue pin. vpin (or alias) of the sensor to test <br /> &gt; <strong>value</strong> - value to test against</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifgte-vpin-value-test-if-analog-pin-reading-is-greater-than-or-equal-to-value">
<span id="ifgte"></span><h4><a class="toc-backref" href="#id150" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFGTE(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if analog pin reading is greater than or equal to value</a><a class="headerlink" href="#ifgte-vpin-value-test-if-analog-pin-reading-is-greater-than-or-equal-to-value" title="Link to this heading"></a></h4>
<p>Test if analog pin reading is greater than or equal to value (&gt;=).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - analogue pin. vpin (or alias) of the sensor to test <br /> &gt; <strong>value</strong> - value to test against</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="iflt-vpin-value-test-if-analog-pin-reading-is-less-than-value">
<span id="iflt"></span><h4><a class="toc-backref" href="#id151" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFLT(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if analog pin reading is less than value</a><a class="headerlink" href="#iflt-vpin-value-test-if-analog-pin-reading-is-less-than-value" title="Link to this heading"></a></h4>
<p>Test if analog pin reading is less than value (&lt;).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - Analogue pin. vpin (or alias) of the sensor to test <br /> &gt; <strong>value</strong> - value to test against</p>
<blockquote>
<div><p>All the <cite>IFGTE()</cite>, <cite>IFLT()</cite>, <cite>ATGTE()`and `ATLT()</cite> commands read the analog value from an analog input pin (A0 - A5 on an Arduino Mega) or an analog input from an I/O expander module. Valid values are defined by the capability of the analog to digital converter in use.</p>
</div></blockquote>
<details class="summary-sensor-examples-click-to-show">
<summary>Sensor examples: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">IF</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="w">          </span><span class="c1">// If sensor on the Command Station pin 25 is activated, set a signal red, wait 10 seconds, then close a turnout/point.</span>
<span class="w">  </span><span class="n">RED</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="w">  </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">CLOSE</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">ENDIF</span>

<span class="n">IFNOT</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span><span class="w">       </span><span class="c1">// If sensor on the Command Station pin 26 is not activated, keep our pedestrian crossing light at 102 green, else set it red.</span>
<span class="w">  </span><span class="n">GREEN</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="n">ELSE</span>
<span class="w">  </span><span class="n">RED</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="n">ENDIF</span>

<span class="n">IFGTE</span><span class="p">(</span><span class="n">A2</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">)</span><span class="w">  </span><span class="c1">// If reading the analog input from a photoelectric light sensor exceeds 512, it&#39;s bright enough to turn the street lights off.</span>
<span class="w">  </span><span class="n">RESET</span><span class="p">(</span><span class="mi">164</span><span class="p">)</span>
<span class="n">ENDIF</span>

<span class="n">IFLT</span><span class="p">(</span><span class="n">A3</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">   </span><span class="c1">// If current sensing from an analog occupancy detector had dropped below the threshold, turn off our mimic panel light, otherwise turn it on.</span>
<span class="w">  </span><span class="n">RESET</span><span class="p">(</span><span class="mi">165</span><span class="p">)</span>
<span class="n">ELSE</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">165</span><span class="p">)</span>
<span class="n">ENDIF</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p>LATCH/UNLATCH can be used to maintain the state of a sensor, or can also be used to trigger a virtual sensor to act as a state flag for EX-RAIL. As this effects the state of a sensor, it can be tested via IF/IFNOT and will also work with AT/AFTER.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="attimout1-vpin-value-tba">
<span id="attimeout1"></span><h4><a class="toc-backref" href="#id152" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ATTIMOUT1</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - TBA</a><a class="headerlink" href="#attimout1-vpin-value-tba" title="Link to this heading"></a></h4>
<p>Waits for ???.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - analogue pin. vpin (or alias) of the sensor to test <br /> &gt; <strong>value</strong> - value to test against</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="attimout2-vpin-value-tba">
<span id="attimeout2"></span><h4><a class="toc-backref" href="#id153" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ATTIMOUT2</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - TBA</a><a class="headerlink" href="#attimout2-vpin-value-tba" title="Link to this heading"></a></h4>
<p>Waits for ???.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - analogue pin. vpin (or alias) of the sensor to test <br /> &gt; <strong>value</strong> - value to test against</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="drive-vpin-tba">
<span id="drive"></span><h4><a class="toc-backref" href="#id154" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DRIVE</span> <span class="pre">(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - TBA</a><a class="headerlink" href="#drive-vpin-tba" title="Link to this heading"></a></h4>
<p>???</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - analogue pin. vpin (or alias) of the sensor to ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="latch-vpin-latches-a-sensor-on">
<span id="latch"></span><h4><a class="toc-backref" href="#id155" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">LATCH(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Latches a sensor on</a><a class="headerlink" href="#latch-vpin-latches-a-sensor-on" title="Link to this heading"></a></h4>
<p>Latches a sensor on (Sensors 0-255 only).</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to unlatch</p>
<p>See UNLATCH() for examples.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="unlatch-vpin-remove-latch-on-sensor">
<span id="unlatch"></span><h4><a class="toc-backref" href="#id156" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">UNLATCH(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Remove LATCH on sensor</a><a class="headerlink" href="#unlatch-vpin-remove-latch-on-sensor" title="Link to this heading"></a></h4>
<p>Remove LATCH on sensor.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to unlatch</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>In this example, LATCH/UNLATCH is used to toggle between two different activities each time the ROUTE is selected in a WiThrottle:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TURNOUT</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bay to Shed&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// DCC turnout/point with linear address 117</span>

<span class="n">ALIAS</span><span class="p">(</span><span class="n">BayExitStarter</span><span class="p">,</span><span class="w"> </span><span class="mi">107</span><span class="p">)</span><span class="w">        </span><span class="c1">// Starter Signal with Route board</span>
<span class="n">ALIAS</span><span class="p">(</span><span class="n">ROUTE_TOGGLE</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span><span class="w">           </span><span class="c1">// State flag to toggle</span>

<span class="n">ROUTE</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bay to Shed&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="n">ROUTE_TOGGLE</span><span class="p">)</span><span class="w">             </span><span class="c1">// If ROUTE_TOGGLE is active, reset the route</span>
<span class="w">    </span><span class="n">DEACTIVATEL</span><span class="p">(</span><span class="n">BayExitStarter</span><span class="p">)</span>
<span class="w">    </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="n">CLOSE</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="n">UNLATCH</span><span class="p">(</span><span class="n">ROUTE_TOGGLE</span><span class="p">)</span><span class="w">           </span><span class="c1">// UNLATCH (Clear) ROUTE_TOGGLE</span>
<span class="w">  </span><span class="n">ELSE</span><span class="w">                            </span><span class="c1">// LATCH is not active, so set route and LATCH</span>
<span class="w">    </span><span class="n">THROW</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="n">ACTIVATEL</span><span class="p">(</span><span class="n">BayExitStarter</span><span class="p">)</span>
<span class="w">    </span><span class="n">LATCH</span><span class="p">(</span><span class="n">ROUTE_TOGGLE</span><span class="p">)</span><span class="w">         </span><span class="c1">// LATCH ROUTE_TOGGLE to indicate route set</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details><details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>In this example, LATCH/UNLATCH is used to start/stop a separate running sequence.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ROUTE</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;Shuttle&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>
<span class="w">    </span><span class="n">UNLATCH</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>
<span class="w">    </span><span class="n">DONE</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">LATCH</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>
<span class="n">FOLLOW</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">   </span><span class="c1">// this line is not actully needed</span>

<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="p">....</span><span class="w"> </span><span class="n">move</span><span class="w"> </span><span class="n">loco</span><span class="w"> </span><span class="n">etc</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>
<span class="w">    </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="n">DONE</span><span class="w"> </span><span class="c1">// will also stop loco</span>
</pre></div>
</div>
</details><p><hr class="hr-dashed" /></p>
</section>
<section id="onbutton-vpin-event-handler-for-debounced-button-presses">
<span id="onbutton"></span><h4><a class="toc-backref" href="#id157" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONBUTTON(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Event handler for debounced button presses</a><a class="headerlink" href="#onbutton-vpin-event-handler-for-debounced-button-presses" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>This new event handler is handy for mimic panel and other buttons that need to perform an action when a button is pressed, rather than having to create a sequence with a combination of <code class="docutils literal notranslate"><span class="pre">AFTER</span></code> and <code class="docutils literal notranslate"><span class="pre">IF</span></code> statements to debounce a button which quickly becomes very complicated.</p>
<p>Note that this works for active low buttons only.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin to test</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onsensor-vpin-event-handler-for-sensors">
<span id="onsensor"></span><h4><a class="toc-backref" href="#id158" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONSENSOR(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Event handler for sensors</a><a class="headerlink" href="#onsensor-vpin-event-handler-for-sensors" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>A new event handler to perform actions when a sensor is activated. Like the other sensor triggers such as <code class="docutils literal notranslate"><span class="pre">IF</span></code>, <code class="docutils literal notranslate"><span class="pre">AT</span></code>, and <code class="docutils literal notranslate"><span class="pre">AFTER</span></code>, a negative value can be used for an active high sensor.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - vpin (or alias) of the sensor to test</p>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="output-and-led-control">
<h3><a class="toc-backref" href="#id43" role="doc-backlink">Output and LED control</a><a class="headerlink" href="#output-and-led-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id8">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#set-pin-count-set-an-output-pin-high" id="id159"><code class="docutils literal notranslate"><span class="pre">SET(</span> <span class="pre">pin</span> <span class="pre">[,count]</span> <span class="pre">)</span></code> - Set an output pin HIGH</a></p></li>
<li><p><a class="reference internal" href="#reset-pin-count-reset-output-pin" id="id160"><code class="docutils literal notranslate"><span class="pre">RESET(</span> <span class="pre">pin</span> <span class="pre">[,count]</span> <span class="pre">)</span></code> - Reset output pin</a></p></li>
<li><p><a class="reference internal" href="#fade-pin-value-ms-fade-an-led" id="id161"><code class="docutils literal notranslate"><span class="pre">FADE(</span> <span class="pre">pin,</span> <span class="pre">value,</span> <span class="pre">ms</span> <span class="pre">)</span></code> - Fade an LED</a></p></li>
<li><p><a class="reference internal" href="#blink-pin-onms-offms-blink-an-output-pin" id="id162"><code class="docutils literal notranslate"><span class="pre">BLINK(</span> <span class="pre">pin,</span> <span class="pre">onMs,</span> <span class="pre">offMs</span> <span class="pre">)</span></code> - Blink an output pin</a></p></li>
<li><p><a class="reference internal" href="#lcn-msg-send-message-to-lcn-accessory-network" id="id163"><code class="docutils literal notranslate"><span class="pre">LCN(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Send message to LCN Accessory Network</a></p></li>
<li><p><a class="reference internal" href="#configure-servo-vpin-pos1-pos2-profile-define-led-s-connected-to-pca9685-boards" id="id164"><code class="docutils literal notranslate"><span class="pre">CONFIGURE_SERVO(vpin,</span> <span class="pre">pos1,</span> <span class="pre">pos2,</span> <span class="pre">profile)</span></code> - Define LED’s connected to PCA9685 boards</a></p></li>
<li><p><a class="reference internal" href="#neopixel-vpin-red-green-blue-count-controls-the-colour-of-attached-neopixel-leds" id="id165"><code class="docutils literal notranslate"><span class="pre">NEOPIXEL(</span> <span class="pre">vpin,</span> <span class="pre">red,</span> <span class="pre">green,</span> <span class="pre">blue</span> <span class="pre">[,count]</span> <span class="pre">)</span></code> - Controls the colour of attached Neopixel LEDs</a></p></li>
<li><p><a class="reference internal" href="#neopixel-signal-signalid-red-green-blue-controls-the-colour-of-attached-neopixel-led" id="id166"><code class="docutils literal notranslate"><span class="pre">NEOPIXEL_SIGNAL(</span> <span class="pre">signalid,</span> <span class="pre">red,</span> <span class="pre">green,</span> <span class="pre">blue</span> <span class="pre">)</span></code> - Controls the colour of attached Neopixel LED</a></p></li>
<li><p><a class="reference internal" href="#anout-vpin-value-param1-param2-analog-output" id="id167"><code class="docutils literal notranslate"><span class="pre">ANOUT(</span> <span class="pre">vpin,</span> <span class="pre">value,</span> <span class="pre">param1,</span> <span class="pre">param2)</span></code> - Analog output ??</a></p></li>
<li><p><a class="reference internal" href="#play-sound-vpin-filenumber-volume-play-mp3-files-from-a-micro-sd-card" id="id168"><code class="docutils literal notranslate"><span class="pre">PLAY_SOUND(</span> <span class="pre">vpin,</span> <span class="pre">fileNumber,</span> <span class="pre">volume,</span> <span class="pre">???</span> <span class="pre">)</span></code> - Play mp3 files from a Micro-SD card</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="set-pin-count-set-an-output-pin-high">
<span id="set"></span><h4><a class="toc-backref" href="#id159" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SET(</span> <span class="pre">pin</span> <span class="pre">[,count]</span> <span class="pre">)</span></code> - Set an output pin HIGH</a><a class="headerlink" href="#set-pin-count-set-an-output-pin-high" title="Link to this heading"></a></h4>
<p>Set output pin (set to HIGH)</p>
<p><em>Parameters:</em> <br /> &gt; <strong>pin</strong> - The first pin number connected that you which to change <br /> &gt; <strong>count</strong> - optional number of pins to change, starting from and including <strong>pin</strong>. Default is one</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="reset-pin-count-reset-output-pin">
<span id="reset"></span><h4><a class="toc-backref" href="#id160" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RESET(</span> <span class="pre">pin</span> <span class="pre">[,count]</span> <span class="pre">)</span></code> - Reset output pin</a><a class="headerlink" href="#reset-pin-count-reset-output-pin" title="Link to this heading"></a></h4>
<p>Reset output pin (set to LOW)</p>
<p><em>Parameters:</em> <br /> &gt; <strong>pin</strong> - The first pin number connected that you which to change <br /> &gt; <strong>count</strong> - optional number of pins to change, starting from and including <strong>pin</strong>. Default is one</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="fade-pin-value-ms-fade-an-led">
<span id="fade"></span><h4><a class="toc-backref" href="#id161" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FADE(</span> <span class="pre">pin,</span> <span class="pre">value,</span> <span class="pre">ms</span> <span class="pre">)</span></code> - Fade an LED</a><a class="headerlink" href="#fade-pin-value-ms-fade-an-led" title="Link to this heading"></a></h4>
<p>Fade an LED on a servo driver to specified value taking specified time.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>pin</strong> -  pin/vpin of the LED <br /> &gt; <strong>value</strong> - value to fade the pin to <br /> &gt; <strong>ms</strong> - duration taken to get to the value in milliseconds</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="blink-pin-onms-offms-blink-an-output-pin">
<span id="blink"></span><h4><a class="toc-backref" href="#id162" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">BLINK(</span> <span class="pre">pin,</span> <span class="pre">onMs,</span> <span class="pre">offMs</span> <span class="pre">)</span></code> - Blink an output pin</a><a class="headerlink" href="#blink-pin-onms-offms-blink-an-output-pin" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>This will start a pin/Vpin blinking until such time as it is <code class="docutils literal notranslate"><span class="pre">SET</span></code>, <code class="docutils literal notranslate"><span class="pre">RESET</span></code>, or set via a signal operation.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>pin</strong> -  pin/vpin of the LED <br /> &gt; <strong>onMs</strong> - time/duration for the pin to be on in milliseconds <br /> &gt; <strong>offMs</strong> - off time/duration in milliseconds</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>BLINK(22, 500, 500) // Blink pin 22 at half second intervals
</pre></div>
</div>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="lcn-msg-send-message-to-lcn-accessory-network">
<span id="lcn"></span><h4><a class="toc-backref" href="#id163" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">LCN(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Send message to LCN Accessory Network</a><a class="headerlink" href="#lcn-msg-send-message-to-lcn-accessory-network" title="Link to this heading"></a></h4>
<p>Send message to LCN Accessory Network.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="configure-servo-vpin-pos1-pos2-profile-define-led-s-connected-to-pca9685-boards">
<span id="config-servo"></span><h4><a class="toc-backref" href="#id164" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">CONFIGURE_SERVO(vpin,</span> <span class="pre">pos1,</span> <span class="pre">pos2,</span> <span class="pre">profile)</span></code> - Define LED’s connected to PCA9685 boards</a><a class="headerlink" href="#configure-servo-vpin-pos1-pos2-profile-define-led-s-connected-to-pca9685-boards" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>This command offers a more convenient way of defining an LED connected to a PCA9685 pin, instead of performing the HAL call in halSetup.h</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - The VPin the LED is connected to, e.g. 101 for the second pin on the first PCA9685 servo module <br /> &gt; <strong>pos1</strong> - The desired intensity (brightness) of the LED when turned on, with 0 being off, and 4095 being 100%) <br /> &gt; <strong>pos2</strong> - The desired intensity (brightness) of the LED when turned off <br /> &gt; <strong>profile</strong> - the required profile <br /></p>
<p><em>Examples:</em> <br /> previously in mySetup.h you would have used: <br /> IODevice::configureServo(112,2437,0,PCA9685::NoPowerOff); <br /> Now in myAutomation.h use: <br /> <br /> CONFIGURE_SERVO(111, 2437, 0, PCA9685::NoPowerOff)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="neopixel-vpin-red-green-blue-count-controls-the-colour-of-attached-neopixel-leds">
<span id="neopixel"></span><h4><a class="toc-backref" href="#id165" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">NEOPIXEL(</span> <span class="pre">vpin,</span> <span class="pre">red,</span> <span class="pre">green,</span> <span class="pre">blue</span> <span class="pre">[,count]</span> <span class="pre">)</span></code> - Controls the colour of attached Neopixel LEDs</a><a class="headerlink" href="#neopixel-vpin-red-green-blue-count-controls-the-colour-of-attached-neopixel-leds" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Controls the colour of one or more attached Neopixel LEDs</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - The VPin the first Neopixel connected that you which to change|BR| &gt; <strong>red</strong> - The desired red colour value (0-255) <br /> &gt; <strong>green</strong> - The desired red colour value (0-255) <br /> &gt; <strong>blue</strong> - The desired red colour value (0-255) <br /> &gt; <strong>count</strong> - number of Neopixels to change, starting from and including <strong>vpin</strong>. Default is one <br /></p>
<p><em>Examples:</em> <br /> NEOPIXEL(100,255,255,255,10)  // set 10 Neopixels LEDs to white starting at vpin 100</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="neopixel-signal-signalid-red-green-blue-controls-the-colour-of-attached-neopixel-led">
<span id="neopixel-signal"></span><h4><a class="toc-backref" href="#id166" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">NEOPIXEL_SIGNAL(</span> <span class="pre">signalid,</span> <span class="pre">red,</span> <span class="pre">green,</span> <span class="pre">blue</span> <span class="pre">)</span></code> - Controls the colour of attached Neopixel LED</a><a class="headerlink" href="#neopixel-signal-signalid-red-green-blue-controls-the-colour-of-attached-neopixel-led" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Controls the colour of one attached Neopixel LED</p>
<p><em>Parameters:</em> <br /> &gt; <strong>signalid</strong> - The VPin the first Neopixel connected that you which to change|BR| &gt; <strong>red</strong> - The desired red colour value (0-255) <br /> &gt; <strong>green</strong> - The desired red colour value (0-255) <br /> &gt; <strong>blue</strong> - The desired red colour value (0-255) <br /></p>
<p><em>Examples:</em> <br /> NEOPIXEL_SIGNAL(100,255,255,255)  // set one Neopixel LED to white</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="anout-vpin-value-param1-param2-analog-output">
<span id="anout"></span><h4><a class="toc-backref" href="#id167" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ANOUT(</span> <span class="pre">vpin,</span> <span class="pre">value,</span> <span class="pre">param1,</span> <span class="pre">param2)</span></code> - Analog output ??</a><a class="headerlink" href="#anout-vpin-value-param1-param2-analog-output" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - first VPIN allocated <br /> &gt; <strong>value</strong> - ??? <br /> &gt; <strong>param1</strong> - ??? <br /> &gt; <strong>param2</strong> - ??? <br /></p>
<p><em>Examples:</em> <br /> ANOUT(10000,23,0,0) // will play the 23rd mp3 file. <br /> ANOUT(10000,23,30,0) // will do the same thing, as well as setting the volume to 30 (maximum value).</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">//=======================================================================</span>
<span class="c1">// Play mp3 files from a Micro-SD card, using a DFPlayer MP3 Module.</span>
<span class="c1">//=======================================================================</span>
<span class="c1">// Parameters:</span>
<span class="c1">//   10000 = first VPIN allocated.</span>
<span class="c1">//   10 = number of VPINs allocated.</span>
<span class="c1">//   Serial1 = name of serial port (usually Serial1 or Serial2).</span>
<span class="c1">// With these parameters, up to 10 files may be played on pins 10000-10009.</span>
<span class="c1">// Play is started from EX-RAIL with SET(10000) for first mp3 file, SET(10001)</span>
<span class="c1">// for second file, etc.  Play may also be initiated by writing an analogue</span>
<span class="c1">// value to the first pin, e.g. ANOUT(10000,23,0,0) will play the 23rd mp3 file.</span>
<span class="c1">// ANOUT(10000,23,30,0) will do the same thing, as well as setting the volume to</span>
<span class="c1">// 30 (maximum value).</span>
<span class="c1">// Play is stopped by RESET(10000) (or any other allocated VPIN).</span>
<span class="c1">// Volume may also be set by writing an analogue value to the second pin for the player,</span>
<span class="c1">// e.g. ANOUT(10001,30,0,0) sets volume to maximum (30).</span>
<span class="c1">// The EX-RAIL sequence may check for completion of play by calling WAITFOR(pin), which will only proceed to the</span>
<span class="c1">// following line when the player is no longer busy.</span>
<span class="c1">// E.g.</span>
<span class="c1">//    SEQUENCE(1)</span>
<span class="c1">//      AT(164)           // Wait for sensor attached to pin 164 to activate</span>
<span class="c1">//      SET(10003)        // Play fourth MP3 file</span>
<span class="c1">//      LCD(4, &quot;Playing&quot;) // Display message on LCD/OLED</span>
<span class="c1">//      WAITFOR(10003)    // Wait for playing to finish</span>
<span class="c1">//      LCD(4, &quot;&quot;)       // Clear LCD/OLED line</span>
<span class="c1">//      FOLLOW(1)         // Go back to start</span>

<span class="c1">// DFPlayer::create(10000, 10, Serial1);</span>
</pre></div>
</div>
</details><p><hr class="hr-dashed" /></p>
</section>
<section id="play-sound-vpin-filenumber-volume-play-mp3-files-from-a-micro-sd-card">
<span id="playsound"></span><h4><a class="toc-backref" href="#id168" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PLAY_SOUND(</span> <span class="pre">vpin,</span> <span class="pre">fileNumber,</span> <span class="pre">volume,</span> <span class="pre">???</span> <span class="pre">)</span></code> - Play mp3 files from a Micro-SD card</a><a class="headerlink" href="#play-sound-vpin-filenumber-volume-play-mp3-files-from-a-micro-sd-card" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Play mp3 files from a Micro-SD card, using a DFPlayer MP3 Module.</p>
<p>Alias of ANOUT.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>vpin</strong> - first VPIN allocated <br /> &gt; <strong>fileNumber</strong> - number of VPINs allocated <br /> &gt; <strong>volume</strong> - volume (0-30) <br /> &gt; <strong>???</strong> - ??? TBA <br /></p>
</section>
</section>
<hr class="docutils" />
<section id="servo-control">
<h3><a class="toc-backref" href="#id44" role="doc-backlink">Servo Control</a><a class="headerlink" href="#servo-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id9">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#servo-id-position-profile-move-an-animation-servo" id="id169"><code class="docutils literal notranslate"><span class="pre">SERVO(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">profile</span> <span class="pre">)</span></code> - Move an animation servo</a></p></li>
<li><p><a class="reference internal" href="#servo2-id-position-duration-move-an-animation-servo-taking-duration" id="id170"><code class="docutils literal notranslate"><span class="pre">SERVO2(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">duration</span> <span class="pre">)</span></code> - Move an animation servo taking duration</a></p></li>
<li><p><a class="reference internal" href="#waitfor-pin-wait-for-a-servo-motion-to-complete-prior-to-continuing" id="id171"><code class="docutils literal notranslate"><span class="pre">WAITFOR(</span> <span class="pre">pin</span> <span class="pre">)</span></code> - Wait for a servo motion to complete prior to continuing</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="servo-id-position-profile-move-an-animation-servo">
<span id="servo"></span><h4><a class="toc-backref" href="#id169" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERVO(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">profile</span> <span class="pre">)</span></code> - Move an animation servo</a><a class="headerlink" href="#servo-id-position-profile-move-an-animation-servo" title="Link to this heading"></a></h4>
<p>Move an animation servo. <em>Do NOT use for Turnouts/points.</em></p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the servo to move <br /> &gt; <strong>position</strong> - position to move to <br /> &gt; <strong>profile</strong> - one of <br />    - Instant,  <br />    - Fast (0.5 sec),  <br />    - Medium (1 sec),  <br />    - Slow (2 sec) and  <br />    - Bounce (subject to revision) <br /></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="servo2-id-position-duration-move-an-animation-servo-taking-duration">
<span id="servo2"></span><h4><a class="toc-backref" href="#id170" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERVO2(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">duration</span> <span class="pre">)</span></code> - Move an animation servo taking duration</a><a class="headerlink" href="#servo2-id-position-duration-move-an-animation-servo-taking-duration" title="Link to this heading"></a></h4>
<p>Move an animation servo taking duration in milliseconds. <em>Do NOT use for Turnouts/points</em></p>
<p><em>Parameters:</em> <br /> &gt; <strong>id</strong> - id of the servo to move <br /> &gt; <strong>position</strong> - position to move to <br /> &gt; <strong>duration</strong> - duration of the move in milliseconds|BR|</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="waitfor-pin-wait-for-a-servo-motion-to-complete-prior-to-continuing">
<span id="waitfor"></span><h4><a class="toc-backref" href="#id171" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">WAITFOR(</span> <span class="pre">pin</span> <span class="pre">)</span></code> - Wait for a servo motion to complete prior to continuing</a><a class="headerlink" href="#waitfor-pin-wait-for-a-servo-motion-to-complete-prior-to-continuing" title="Link to this heading"></a></h4>
<p>The WAITFOR() command instructs EX-RAIL to wait for a servo motion to complete prior to continuing.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>pin</strong> - vpin to test</p>
<details class="summary-a-couple-of-examples-click-to-show">
<summary>A couple of examples: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// First example defines a servo turnout/point for the coal yard and a signal for the main line.</span>
<span class="n">TURNOUT</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Coal Yard&quot;</span><span class="p">)</span>
<span class="n">SIGNAL</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>

<span class="c1">// When our turnout/point is closed, the main line is open, so the signal is green.</span>
<span class="n">ONCLOSE</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">  </span><span class="n">GREEN</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="n">DONE</span>

<span class="c1">// When our turnout is closed, the main line is interrupted, so the signal is red.</span>
<span class="n">ONTHROW</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">  </span><span class="n">RED</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="n">DONE</span>

<span class="c1">// This example triggers an automation sequence when a DCC accessory decoder is activated, including waiting for SERVO motions to complete.</span>
<span class="n">ONACTIVATEL</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w">            </span><span class="c1">// Activating DCC accessory decoder with linear address 100 commences the sequence.</span>
<span class="w">  </span><span class="n">SERVO</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="n">Slow</span><span class="p">)</span><span class="w">     </span><span class="c1">// Move the first servo and wait.</span>
<span class="w">  </span><span class="n">WAITFOR</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="w">  </span><span class="n">SERVO</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="n">Medium</span><span class="p">)</span><span class="w">   </span><span class="c1">// Move the second servo and wait.</span>
<span class="w">  </span><span class="n">WAITFOR</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">165</span><span class="p">)</span><span class="w">                  </span><span class="c1">// Activate a Vpin to turn an LED on.</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">166</span><span class="p">)</span><span class="w">                  </span><span class="c1">// Activate a second Vpin to turn a second LED on.</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="dcc-accessory-decoder-control">
<h3><a class="toc-backref" href="#id45" role="doc-backlink">DCC Accessory Decoder Control</a><a class="headerlink" href="#dcc-accessory-decoder-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id10">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#onactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-1" id="id172"><code class="docutils literal notranslate"><span class="pre">ONACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Event handler for 2 part DCC accessory packet value 1</a></p></li>
<li><p><a class="reference internal" href="#onactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-1" id="id173"><code class="docutils literal notranslate"><span class="pre">ONACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Event handler for linear DCC accessory packet value 1</a></p></li>
<li><p><a class="reference internal" href="#ondeactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-0" id="id174"><code class="docutils literal notranslate"><span class="pre">ONDEACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Event handler for 2 part DCC accessory packet value 0</a></p></li>
<li><p><a class="reference internal" href="#ondeactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-0" id="id175"><code class="docutils literal notranslate"><span class="pre">ONDEACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Event handler for linear DCC accessory packet value 0</a></p></li>
<li><p><a class="reference internal" href="#activate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-1" id="id176"><code class="docutils literal notranslate"><span class="pre">ACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 1</a></p></li>
<li><p><a class="reference internal" href="#activatel-linear-sends-a-dcc-accessory-packet-with-value-1-to-a-linear-address" id="id177"><code class="docutils literal notranslate"><span class="pre">ACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 1 to a linear address</a></p></li>
<li><p><a class="reference internal" href="#deactivate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-0" id="id178"><code class="docutils literal notranslate"><span class="pre">DEACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 0</a></p></li>
<li><p><a class="reference internal" href="#deactivatel-addr-sends-a-dcc-accessory-packet-with-value-0-to-a-linear-address" id="id179"><code class="docutils literal notranslate"><span class="pre">DEACTIVATEL(</span> <span class="pre">addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 0 to a linear address</a></p></li>
<li><p><a class="reference internal" href="#dccactivate-addr-sub-addr-tba" id="id180"><code class="docutils literal notranslate"><span class="pre">DCCACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#xfon-cab-func-send-dcc-function-on-to-specific-cab" id="id181"><code class="docutils literal notranslate"><span class="pre">XFON(</span> <span class="pre">cab,</span> <span class="pre">func</span> <span class="pre">)`</span></code> - Send DCC function ON to specific cab</a></p></li>
<li><p><a class="reference internal" href="#xfoff-cab-func-send-dcc-function-off-to-specific-cab" id="id182"><code class="docutils literal notranslate"><span class="pre">XFOFF(</span> <span class="pre">cab,</span> <span class="pre">func</span> <span class="pre">)</span></code> - Send DCC function OFF to specific cab</a></p></li>
<li><p><a class="reference internal" href="#xftoggle-loco-func-toggle-dcc-function-on-specific-loco" id="id183"><code class="docutils literal notranslate"><span class="pre">XFTOGGLE(</span> <span class="pre">loco,</span> <span class="pre">func</span> <span class="pre">)</span></code> - Toggle DCC function on specific loco</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="onactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-1">
<span id="onactivate"></span><h4><a class="toc-backref" href="#id172" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Event handler for 2 part DCC accessory packet value 1</a><a class="headerlink" href="#onactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-1" title="Link to this heading"></a></h4>
<p>Event handler for 2 part DCC accessory packet value 1</p>
<p>All these “ON” commands are event handlers that trigger a sequence of commands to run when the event occurs. These can vary from the most basic tasks such as setting signals when turnouts are closed or thrown, to triggering complete automation sequences via a DCC accessory decoder.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>addr</strong> - DCC address ??? <br /> &gt; <strong>Sub_addr</strong> - sub-address ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-1">
<span id="onactivatel"></span><h4><a class="toc-backref" href="#id173" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Event handler for linear DCC accessory packet value 1</a><a class="headerlink" href="#onactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-1" title="Link to this heading"></a></h4>
<p>Event handler for linear DCC accessory packet value 1</p>
<p>All these “ON” commands are event handlers that trigger a sequence of commands to run when the event occurs. These can vary from the most basic tasks such as setting signals when turnouts are closed or thrown, to triggering complete automation sequences via a DCC accessory decoder.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>linear</strong> - ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ondeactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-0">
<span id="ondeactivate"></span><h4><a class="toc-backref" href="#id174" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONDEACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Event handler for 2 part DCC accessory packet value 0</a><a class="headerlink" href="#ondeactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-0" title="Link to this heading"></a></h4>
<p>Event handler for 2 part DCC accessory packet value 0</p>
<p>All these “ON” commands are event handlers that trigger a sequence of commands to run when the event occurs. These can vary from the most basic tasks such as setting signals when turnouts are closed or thrown, to triggering complete automation sequences via a DCC accessory decoder.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>addr</strong> - DCC address ??? <br /> &gt; <strong>Sub_addr</strong> - sub-address ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ondeactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-0">
<span id="ondeactivatel"></span><h4><a class="toc-backref" href="#id175" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONDEACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Event handler for linear DCC accessory packet value 0</a><a class="headerlink" href="#ondeactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-0" title="Link to this heading"></a></h4>
<p>Event handler for linear DCC accessory packet value 0.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>linear</strong> - ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="activate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-1">
<span id="activate"></span><h4><a class="toc-backref" href="#id176" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 1</a><a class="headerlink" href="#activate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-1" title="Link to this heading"></a></h4>
<p>Sends a DCC accessory packet with value 1.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>addr</strong> - DCC address ??? <br /> &gt; <strong>Sub_addr</strong> - sub-address ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="activatel-linear-sends-a-dcc-accessory-packet-with-value-1-to-a-linear-address">
<span id="activatel"></span><h4><a class="toc-backref" href="#id177" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 1 to a linear address</a><a class="headerlink" href="#activatel-linear-sends-a-dcc-accessory-packet-with-value-1-to-a-linear-address" title="Link to this heading"></a></h4>
<p>Sends a DCC accessory packet with value 1 to a linear address.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>linear</strong> - ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="deactivate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-0">
<span id="deactivate"></span><h4><a class="toc-backref" href="#id178" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DEACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 0</a><a class="headerlink" href="#deactivate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-0" title="Link to this heading"></a></h4>
<p>Sends a DCC accessory packet with value 0.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>addr</strong> - DCC address ??? <br /> &gt; <strong>Sub_addr</strong> - sub-address ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="deactivatel-addr-sends-a-dcc-accessory-packet-with-value-0-to-a-linear-address">
<span id="deactivatel"></span><h4><a class="toc-backref" href="#id179" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DEACTIVATEL(</span> <span class="pre">addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 0 to a linear address</a><a class="headerlink" href="#deactivatel-addr-sends-a-dcc-accessory-packet-with-value-0-to-a-linear-address" title="Link to this heading"></a></h4>
<p>Sends a DCC accessory packet with value 0 to a linear address</p>
<p><em>Parameters:</em> <br /> &gt; <strong>addr</strong> - DCC address ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="dccactivate-addr-sub-addr-tba">
<span id="dccactivate"></span><h4><a class="toc-backref" href="#id180" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DCCACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - TBA</a><a class="headerlink" href="#dccactivate-addr-sub-addr-tba" title="Link to this heading"></a></h4>
<p><em>Parameters:</em> <br /> &gt; <strong>addr</strong> - DCC address ??? <br /> &gt; <strong>Sub_addr</strong> - sub-address ???</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="xfon-cab-func-send-dcc-function-on-to-specific-cab">
<span id="xfon"></span><h4><a class="toc-backref" href="#id181" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">XFON(</span> <span class="pre">cab,</span> <span class="pre">func</span> <span class="pre">)`</span></code> - Send DCC function ON to specific cab</a><a class="headerlink" href="#xfon-cab-func-send-dcc-function-on-to-specific-cab" title="Link to this heading"></a></h4>
<p>Send DCC function ON to specific cab (e.g. coach lights) <em>Not for Loco use - use FON instead!</em></p>
<p>All these “ON” commands are event handlers that trigger a sequence of commands to run when the event occurs. These can vary from the most basic tasks such as setting signals when turnouts are closed or thrown, to triggering complete automation sequences via a DCC accessory decoder.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>cab</strong> - DCC address of your loco <br /> &gt; <strong>func</strong> - Function number (0-31)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="xfoff-cab-func-send-dcc-function-off-to-specific-cab">
<span id="xfoff"></span><h4><a class="toc-backref" href="#id182" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">XFOFF(</span> <span class="pre">cab,</span> <span class="pre">func</span> <span class="pre">)</span></code> - Send DCC function OFF to specific cab</a><a class="headerlink" href="#xfoff-cab-func-send-dcc-function-off-to-specific-cab" title="Link to this heading"></a></h4>
<p>Send DCC function OFF to specific cab (e.g. coach lights) Not for Loco use - use FON instead!</p>
<p>All these “ON” commands are event handlers that trigger a sequence of commands to run when the event occurs. These can vary from the most basic tasks such as setting signals when turnouts are closed or thrown, to triggering complete automation sequences via a DCC accessory decoder.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>cab</strong> - DCC address of your loco <br /> &gt; <strong>func</strong> - Function number (0-31)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="xftoggle-loco-func-toggle-dcc-function-on-specific-loco">
<span id="xftoggle"></span><h4><a class="toc-backref" href="#id183" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">XFTOGGLE(</span> <span class="pre">loco,</span> <span class="pre">func</span> <span class="pre">)</span></code> - Toggle DCC function on specific loco</a><a class="headerlink" href="#xftoggle-loco-func-toggle-dcc-function-on-specific-loco" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Toggle DCC function on loco with the specified DCC address.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>loco</strong> - DCC address of your loco <br /> &gt; <strong>func</strong> - Function number (0-31)</p>
</section>
</section>
<hr class="docutils" />
<section id="ex-fastclock-event-handlers">
<h3><a class="toc-backref" href="#id46" role="doc-backlink">EX-FastClock Event Handlers</a><a class="headerlink" href="#ex-fastclock-event-handlers" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id11">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ontime-value-event-handler-for-when-the-specified-time-is-reached" id="id184"><code class="docutils literal notranslate"><span class="pre">ONTIME(</span> <span class="pre">value</span> <span class="pre">)</span></code> - Event handler for when the specified time is reached</a></p></li>
<li><p><a class="reference internal" href="#onclocktime-hours-mins-event-handler-for-when-the-specified-clock-time-is-reached" id="id185"><code class="docutils literal notranslate"><span class="pre">ONCLOCKTIME(</span> <span class="pre">hours,</span> <span class="pre">mins</span> <span class="pre">)</span></code> - Event handler for when the specified clock time is reached</a></p></li>
<li><p><a class="reference internal" href="#onclockmins-mins-event-handler-to-be-repeated-the-same-time-every-hour" id="id186"><code class="docutils literal notranslate"><span class="pre">ONCLOCKMINS(</span> <span class="pre">mins</span> <span class="pre">)</span></code> - Event handler to be repeated the same time every hour</a></p></li>
</ul>
</nav>
<p>Also refer to <a class="reference internal" href="../ex-fastclock/cs-commands.html#controlling-ex-rail-by-time"><span class="std std-ref">Controlling EX-RAIL by Time</span></a>.</p>
<p><hr class="hr-dashed" /></p>
<section id="ontime-value-event-handler-for-when-the-specified-time-is-reached">
<span id="ontime"></span><h4><a class="toc-backref" href="#id184" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONTIME(</span> <span class="pre">value</span> <span class="pre">)</span></code> - Event handler for when the specified time is reached</a><a class="headerlink" href="#ontime-value-event-handler-for-when-the-specified-time-is-reached" title="Link to this heading"></a></h4>
<p>Event handler for when the specified time is reached</p>
<p><em>Parameters:</em> <br /> &gt; <strong>value</strong> - value to test against</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onclocktime-hours-mins-event-handler-for-when-the-specified-clock-time-is-reached">
<span id="onclocktime"></span><h4><a class="toc-backref" href="#id185" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONCLOCKTIME(</span> <span class="pre">hours,</span> <span class="pre">mins</span> <span class="pre">)</span></code> - Event handler for when the specified clock time is reached</a><a class="headerlink" href="#onclocktime-hours-mins-event-handler-for-when-the-specified-clock-time-is-reached" title="Link to this heading"></a></h4>
<p>Event handler for when the specified clock time is reached</p>
<p><em>Parameters:</em> <br /> &gt; <strong>hour</strong> - hour to test against <br /> &gt; <strong>minute</strong> - minute to test against</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onclockmins-mins-event-handler-to-be-repeated-the-same-time-every-hour">
<span id="onclockmins"></span><h4><a class="toc-backref" href="#id186" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONCLOCKMINS(</span> <span class="pre">mins</span> <span class="pre">)</span></code> - Event handler to be repeated the same time every hour</a><a class="headerlink" href="#onclockmins-mins-event-handler-to-be-repeated-the-same-time-every-hour" title="Link to this heading"></a></h4>
<p>Event handler to be repeated the same time every hour</p>
<p><em>Parameters:</em> <br /> &gt; <strong>minute</strong> - minute to test against</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="locos-and-tracks">
<h2><a class="toc-backref" href="#id47" role="doc-backlink">Locos and Tracks</a><a class="headerlink" href="#locos-and-tracks" title="Link to this heading"></a></h2>
<section id="locos-definition-and-control">
<h3><a class="toc-backref" href="#id48" role="doc-backlink">Locos - Definition and Control</a><a class="headerlink" href="#locos-definition-and-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id12">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#estop-emergency-stops-all-locomotives" id="id187"><code class="docutils literal notranslate"><span class="pre">ESTOP</span></code> - Emergency stops all locomotives</a></p></li>
<li><p><a class="reference internal" href="#setloco-loco-set-the-loco-address-for-this-task" id="id188"><code class="docutils literal notranslate"><span class="pre">SETLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> - Set the loco address for this task</a></p></li>
<li><p><a class="reference internal" href="#sendloco-loco-route-start-route-sequence-with-a-specified-loco" id="id189"><code class="docutils literal notranslate"><span class="pre">SENDLOCO(</span> <span class="pre">loco,</span> <span class="pre">route</span> <span class="pre">)</span></code> - Start route/sequence with a specified loco</a></p></li>
<li><p><a class="reference internal" href="#read-loco-read-loco-id-from-prog-track" id="id190"><code class="docutils literal notranslate"><span class="pre">READ_LOCO</span></code> - Read loco ID from prog track</a></p></li>
<li><p><a class="reference internal" href="#fwd-speed-drive-loco-forward-at-dcc-speed" id="id191"><code class="docutils literal notranslate"><span class="pre">FWD(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco forward at DCC speed</a></p></li>
<li><p><a class="reference internal" href="#rev-speed-drive-loco-in-reverse-at-dcc-speed" id="id192"><code class="docutils literal notranslate"><span class="pre">REV(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco in reverse at DCC speed</a></p></li>
<li><p><a class="reference internal" href="#speed-speed-drive-loco-in-current-direction-at-dcc-speed" id="id193"><code class="docutils literal notranslate"><span class="pre">SPEED(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco in current direction at DCC speed</a></p></li>
<li><p><a class="reference internal" href="#stop-set-loco-speed-to-0" id="id194"><code class="docutils literal notranslate"><span class="pre">STOP</span></code> - Set loco speed to 0</a></p></li>
<li><p><a class="reference internal" href="#fon-func-turn-on-loco-function" id="id195"><code class="docutils literal notranslate"><span class="pre">FON(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Turn on loco function</a></p></li>
<li><p><a class="reference internal" href="#foff-func-turn-off-loco-function" id="id196"><code class="docutils literal notranslate"><span class="pre">FOFF(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Turn off loco function</a></p></li>
<li><p><a class="reference internal" href="#ftoggle-func-toggle-the-state-of-a-loco-s-function" id="id197"><code class="docutils literal notranslate"><span class="pre">FTOGGLE(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Toggle the state of a loco’s function</a></p></li>
<li><p><a class="reference internal" href="#invert-direction-switches-fwd-rev-meaning-for-loco" id="id198"><code class="docutils literal notranslate"><span class="pre">INVERT_DIRECTION</span></code> - Switches FWD/REV meaning for loco</a></p></li>
<li><p><a class="reference internal" href="#roster-loco-name-func-map-provide-roster-info-for-a-specified-loco" id="id199"><code class="docutils literal notranslate"><span class="pre">ROSTER(</span> <span class="pre">loco,</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">&quot;func_map&quot;</span> <span class="pre">)</span></code> - Provide roster info for a specified loco</a></p></li>
<li><p><a class="reference internal" href="#pom-cv-value-program-cv-value-on-main" id="id200"><code class="docutils literal notranslate"><span class="pre">POM(</span> <span class="pre">cv,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Program CV value on main</a></p></li>
<li><p><a class="reference internal" href="#ifloco-loco-perform-commands-if-the-specified-loco-id-is-defined-for-this-sequence" id="id201"><code class="docutils literal notranslate"><span class="pre">IFLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> - perform commands if the specified loco ID is defined for this sequence</a></p></li>
<li><p><a class="reference internal" href="#forget-forget-the-loco-in-the-running-automation-sequence" id="id202"><code class="docutils literal notranslate"><span class="pre">FORGET</span></code> - Forget the loco in the running automation/sequence</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="estop-emergency-stops-all-locomotives">
<span id="estop"></span><h4><a class="toc-backref" href="#id187" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ESTOP</span></code> - Emergency stops all locomotives</a><a class="headerlink" href="#estop-emergency-stops-all-locomotives" title="Link to this heading"></a></h4>
<p>Emergency stops all locomotives.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="setloco-loco-set-the-loco-address-for-this-task">
<span id="setloco"></span><h4><a class="toc-backref" href="#id188" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SETLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> - Set the loco address for this task</a><a class="headerlink" href="#setloco-loco-set-the-loco-address-for-this-task" title="Link to this heading"></a></h4>
<p>Set the loco address for this sequence.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>loco</strong> - DCC address of your loco</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="sendloco-loco-route-start-route-sequence-with-a-specified-loco">
<span id="sendloco"></span><h4><a class="toc-backref" href="#id189" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SENDLOCO(</span> <span class="pre">loco,</span> <span class="pre">route</span> <span class="pre">)</span></code> - Start route/sequence with a specified loco</a><a class="headerlink" href="#sendloco-loco-route-start-route-sequence-with-a-specified-loco" title="Link to this heading"></a></h4>
<p>Start a new task send a specified loco along a specified route/sequence</p>
<p><em>Parameters:</em> <br /> &gt; <strong>loco</strong> - DCC address of your loco <br /> &gt; <strong>route</strong> - route to execute using the specified loco</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="read-loco-read-loco-id-from-prog-track">
<span id="read-loco"></span><h4><a class="toc-backref" href="#id190" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">READ_LOCO</span></code> - Read loco ID from prog track</a><a class="headerlink" href="#read-loco-read-loco-id-from-prog-track" title="Link to this heading"></a></h4>
<p>Read the loco ID from prog track.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="fwd-speed-drive-loco-forward-at-dcc-speed">
<span id="fwd"></span><h4><a class="toc-backref" href="#id191" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FWD(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco forward at DCC speed</a><a class="headerlink" href="#fwd-speed-drive-loco-forward-at-dcc-speed" title="Link to this heading"></a></h4>
<p>Drive loco forward at DCC speed 0-127 (1=ESTOP)</p>
<p><em>Parameters:</em> <br /> &gt; <strong>speed</strong> - DCC speed (0-127) <br />    - 2-127 = speed 1-126, 0 = stop  <br />    - 1 = Estop</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="rev-speed-drive-loco-in-reverse-at-dcc-speed">
<span id="rev"></span><h4><a class="toc-backref" href="#id192" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">REV(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco in reverse at DCC speed</a><a class="headerlink" href="#rev-speed-drive-loco-in-reverse-at-dcc-speed" title="Link to this heading"></a></h4>
<p>Drive current loco in reverse at DCC speed 0-127 (1=ESTOP)</p>
<p><em>Parameters:</em> <br /> &gt; <strong>speed</strong> - DCC speed (0-127) <br />    - 2-127 = speed 1-126, 0 = stop  <br />    - 1 = Estop</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="speed-speed-drive-loco-in-current-direction-at-dcc-speed">
<span id="speed"></span><h4><a class="toc-backref" href="#id193" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SPEED(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco in current direction at DCC speed</a><a class="headerlink" href="#speed-speed-drive-loco-in-current-direction-at-dcc-speed" title="Link to this heading"></a></h4>
<p>Drive loco in current direction at DCC speed</p>
<p><em>Parameters:</em> <br /> &gt; <strong>speed</strong> - DCC speed (0-127) <br />    - 2-127 = speed 1-126, 0 = stop  <br />    - 1 = Estop</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="stop-set-loco-speed-to-0">
<span id="stop"></span><h4><a class="toc-backref" href="#id194" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">STOP</span></code> - Set loco speed to 0</a><a class="headerlink" href="#stop-set-loco-speed-to-0" title="Link to this heading"></a></h4>
<p>Set the current loco speed to 0 (same as SPEED(0))</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="fon-func-turn-on-loco-function">
<span id="fon"></span><h4><a class="toc-backref" href="#id195" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FON(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Turn on loco function</a><a class="headerlink" href="#fon-func-turn-on-loco-function" title="Link to this heading"></a></h4>
<p>Turn on the specified function for the current loco.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>func</strong> - Function number (0-31)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="foff-func-turn-off-loco-function">
<span id="foff"></span><h4><a class="toc-backref" href="#id196" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FOFF(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Turn off loco function</a><a class="headerlink" href="#foff-func-turn-off-loco-function" title="Link to this heading"></a></h4>
<p>Turn off the specified function for the current loco.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>func</strong> - Function number (0-31)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ftoggle-func-toggle-the-state-of-a-loco-s-function">
<span id="ftoggle"></span><h4><a class="toc-backref" href="#id197" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FTOGGLE(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Toggle the state of a loco’s function</a><a class="headerlink" href="#ftoggle-func-toggle-the-state-of-a-loco-s-function" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Toggle off the specified function for the current loco.  i.e. Turn off if on, or on if off.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>func</strong> - Function number (0-31)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="invert-direction-switches-fwd-rev-meaning-for-loco">
<span id="invert-direction"></span><h4><a class="toc-backref" href="#id198" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">INVERT_DIRECTION</span></code> - Switches FWD/REV meaning for loco</a><a class="headerlink" href="#invert-direction-switches-fwd-rev-meaning-for-loco" title="Link to this heading"></a></h4>
<p>Switches FWD/REV meaning for the current loco.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="roster-loco-name-func-map-provide-roster-info-for-a-specified-loco">
<span id="roster"></span><h4><a class="toc-backref" href="#id199" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROSTER(</span> <span class="pre">loco,</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">&quot;func_map&quot;</span> <span class="pre">)</span></code> - Provide roster info for a specified loco</a><a class="headerlink" href="#roster-loco-name-func-map-provide-roster-info-for-a-specified-loco" title="Link to this heading"></a></h4>
<p><em>Parameters:</em> <br /> &gt; <strong>loco</strong> - DCC address of your loco &gt; <strong>name</strong> - the name of this loco that will appear in the throttle apps. Enclosed in quotes (”) <br /> &gt; <strong>funct_map</strong> - the names that you want to see for the functions specific to this loco separated by forward slashes (“/”). All enclosed in quotes (”) <br />    Note that if the function is ‘momentary’ rather than ‘latching’ (On/Off) then start the function label with a asterisk (*). The most common example of this is the Horn/Whistle which is commonly on F2. <br /></p>
<p><em>Examples:</em> <br /> ROSTER (  3,”Eng 3”, “F0/F1/*F2/*F3/F4/F5/F6/F7/Mute/F9//”) // Address 3, Eng 3, Function keys F0-F10 <br /> ROSTER(1224,”PE 1224”,””) // Motor Only Decoder <br /> ROSTER(1225,”PE 1225”,”Lights/Bell/*Whistle/*Short Whistle/Steam/On-Time/FX6 Bell Whistle/Dim Light/Mute”) <br /> ROSTER(4468,”LNER 4468”,”//Snd On/*Whistle/*Whistle2/Brake/F5 Drain/Coal Shvl/Guard-Squeal/Loaded/Coastng/Injector/Shunt-Door ~Opn-Cls/Couplng/BrakeVlv/Sfty Vlv/Shunting/BrkSql Off/No Momentm/Aux3/Fade Out/F22 Res/F23/Res//Aux 5/Aux6/Aux7/Aux 8”)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pom-cv-value-program-cv-value-on-main">
<span id="pom"></span><h4><a class="toc-backref" href="#id200" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">POM(</span> <span class="pre">cv,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Program CV value on main</a><a class="headerlink" href="#pom-cv-value-program-cv-value-on-main" title="Link to this heading"></a></h4>
<p>Program CV value on main, must be proceeded by setting the loco ID with <code class="docutils literal notranslate"><span class="pre">SETLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifloco-loco-perform-commands-if-the-specified-loco-id-is-defined-for-this-sequence">
<span id="ifloco"></span><h4><a class="toc-backref" href="#id201" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> - perform commands if the specified loco ID is defined for this sequence</a><a class="headerlink" href="#ifloco-loco-perform-commands-if-the-specified-loco-id-is-defined-for-this-sequence" title="Link to this heading"></a></h4>
<p>If the specified loco ID is defined for this sequence, perform the defined activities</p>
<p><em>Parameters:</em> <br /> &gt; <strong>loco</strong> - DCC Address of the loco to test against</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// A defined automation sequence that will do activities only if loco ID 123 is in use</span>
<span class="n">AUTOSTART</span><span class="w"> </span><span class="n">AUTOMATION</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Do stuff for loco 123&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">IFLOCO</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Define activities here e.g. blow horn or whistle</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">DONE</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="forget-forget-the-loco-in-the-running-automation-sequence">
<span id="forget"></span><h4><a class="toc-backref" href="#id202" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FORGET</span></code> - Forget the loco in the running automation/sequence</a><a class="headerlink" href="#forget-forget-the-loco-in-the-running-automation-sequence" title="Link to this heading"></a></h4>
<p>Forget the loco in the running automation/sequence</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
</section>
</section>
<hr class="docutils" />
<section id="trackmanager-control">
<h3><a class="toc-backref" href="#id49" role="doc-backlink">TrackManager Control</a><a class="headerlink" href="#trackmanager-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id13">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#set-track-track-mode-configures-the-mode-of-a-track" id="id203"><code class="docutils literal notranslate"><span class="pre">SET_TRACK(</span> <span class="pre">track,</span> <span class="pre">mode</span> <span class="pre">)</span></code> - Configures the mode of a track</a></p></li>
<li><p><a class="reference internal" href="#set-power-track-on-off-enable-disable-power-on-a-track" id="id204"><code class="docutils literal notranslate"><span class="pre">SET_POWER(</span> <span class="pre">track,</span> <span class="pre">ON/OFF</span> <span class="pre">)</span></code> - Enable/Disable power on a track</a></p></li>
<li><p><a class="reference internal" href="#setfreq-track-frequency-enable-a-specific-frequency" id="id205"><code class="docutils literal notranslate"><span class="pre">SETFREQ(</span> <span class="pre">track,</span> <span class="pre">frequency</span> <span class="pre">)</span></code> - Enable a specific frequency</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="set-track-track-mode-configures-the-mode-of-a-track">
<span id="set-track"></span><h4><a class="toc-backref" href="#id203" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SET_TRACK(</span> <span class="pre">track,</span> <span class="pre">mode</span> <span class="pre">)</span></code> - Configures the mode of a track</a><a class="headerlink" href="#set-track-track-mode-configures-the-mode-of-a-track" title="Link to this heading"></a></h4>
<p>Configures the mode of the selected track, refer also to <a class="reference internal" href="../trackmanager/index.html"><span class="doc">TrackManager (DCC &amp; DC)</span></a></p>
<p><em>Parameters:</em> <br /> &gt; <strong>track</strong> - - The track to configure, valid options are A to H <br /> &gt; <strong>mode</strong> - - The mode to set the track to, <br />    valid options for DCC are: <br />    - <code class="docutils literal notranslate"><span class="pre">MAIN</span></code> or <br />    - <code class="docutils literal notranslate"><span class="pre">PROG</span></code>, <br />    and valid options for DC are: <br />    -  <code class="docutils literal notranslate"><span class="pre">DC</span></code> <br />    - , <code class="docutils literal notranslate"><span class="pre">DCX</span></code>. <br />    If a track is unused, it can be set to: <br />    - <code class="docutils literal notranslate"><span class="pre">NONE</span></code></p>
<p>When setting at track mode to either DC or DCX, you must use the <code class="docutils literal notranslate"><span class="pre">SETLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> command first to specify the loco ID that will be used for the DC track then SET_TRACK()</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Set both tracks A and B to be main DCC tracks</span>
<span class="n">AUTOSTART</span>
<span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">MAIN</span><span class="p">)</span>
<span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">MAIN</span><span class="p">)</span>
<span class="n">DONE</span>

<span class="c1">// Set track A to be a DC track with loco ID 1, and track B to be a DCC programming track</span>
<span class="n">AUTOSTART</span>
<span class="n">SETLOCO</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">DC</span><span class="p">)</span>
<span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">PROG</span><span class="p">)</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details></section>
<section id="set-power-track-on-off-enable-disable-power-on-a-track">
<span id="set-power"></span><h4><a class="toc-backref" href="#id204" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SET_POWER(</span> <span class="pre">track,</span> <span class="pre">ON/OFF</span> <span class="pre">)</span></code> - Enable/Disable power on a track</a><a class="headerlink" href="#set-power-track-on-off-enable-disable-power-on-a-track" title="Link to this heading"></a></h4>
<p>Configures the power setting of the selected track, refer also to <a class="reference internal" href="../trackmanager/index.html"><span class="doc">TrackManager (DCC &amp; DC)</span></a></p>
<dl class="simple">
<dt><em>Parameters:</em> <br /></dt><dd><p> &gt; <strong>track</strong> - - The track to configure, valid options are A to H <br /> &gt; <strong>ON/OFF</strong> - - Turn the power ON or OFF for this track <br /></p>
</dd>
</dl>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Set track A to be a DC track with loco ID 1 and power on, and track B to be a DCC programming track</span>
<span class="n">AUTOSTART</span>
<span class="n">SETLOCO</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">DC</span><span class="p">)</span>
<span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">PROG</span><span class="p">)</span>
<span class="n">SET_POWER</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">ON</span><span class="p">)</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details></section>
<section id="setfreq-track-frequency-enable-a-specific-frequency">
<span id="setfreq"></span><h4><a class="toc-backref" href="#id205" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SETFREQ(</span> <span class="pre">track,</span> <span class="pre">frequency</span> <span class="pre">)</span></code> - Enable a specific frequency</a><a class="headerlink" href="#setfreq-track-frequency-enable-a-specific-frequency" title="Link to this heading"></a></h4>
<p>DC/DCX track settings only.</p>
<p>Configures the frequency setting of the selected track.</p>
<p>The settings achievable vary slightly depending upon the processor running the CS but broadly follow the following:</p>
<p><em>Parameters:</em> <br /> &gt; <strong>track</strong> - - The track to configure, valid options are A to H <br /> &gt; <strong>frequency</strong> - - The frequency to set for this track <br />   &gt;valid options are: <br />    &gt; <strong>0</strong> - Default - low frequency 131Hz <br />    &gt; <strong>1</strong> - Mid frequency - 490Hz <br />    &gt; <strong>2</strong> - High frequency - 3400Hz <br />    &gt; <strong>3</strong> - Supersonic - 62500Hz|BR|</p>
<p>Trial and error will be needed for specific locos that do not respond well to the defaults (low) frequency setting.</p>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="controlling-overload-shorts">
<h3><a class="toc-backref" href="#id50" role="doc-backlink">Controlling Overload/Shorts</a><a class="headerlink" href="#controlling-overload-shorts" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id14">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#onoverload-track-event-handler-for-when-an-overload-occurs" id="id206"><code class="docutils literal notranslate"><span class="pre">ONOVERLOAD(</span> <span class="pre">track</span> <span class="pre">)</span></code> - Event handler for when an Overload occurs</a></p></li>
<li><p><a class="reference internal" href="#afteroverload-track-event-handler-for-when-an-overload-clears" id="id207"><code class="docutils literal notranslate"><span class="pre">AFTEROVERLOAD(</span> <span class="pre">track</span> <span class="pre">)</span></code> - Event handler for when an Overload clears</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="onoverload-track-event-handler-for-when-an-overload-occurs">
<span id="onoverload"></span><h4><a class="toc-backref" href="#id206" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONOVERLOAD(</span> <span class="pre">track</span> <span class="pre">)</span></code> - Event handler for when an Overload occurs</a><a class="headerlink" href="#onoverload-track-event-handler-for-when-an-overload-occurs" title="Link to this heading"></a></h4>
<blockquote>
<div><p>Creates an event handler for the selected track, to be executed when the MotorDriver routines detect and overload. Refer also to <a class="reference internal" href="../trackmanager/index.html"><span class="doc">TrackManager (DCC &amp; DC)</span></a></p>
</div></blockquote>
<p><em>Parameters:</em> <br /> &gt; <strong>track</strong> - - The track to configure, valid options are A to H</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="afteroverload-track-event-handler-for-when-an-overload-clears">
<span id="afteroverload"></span><h4><a class="toc-backref" href="#id207" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AFTEROVERLOAD(</span> <span class="pre">track</span> <span class="pre">)</span></code> - Event handler for when an Overload clears</a><a class="headerlink" href="#afteroverload-track-event-handler-for-when-an-overload-clears" title="Link to this heading"></a></h4>
<p>Creates a complementary event handler for the selected track, to be executed when the MotorDriver routines indicate the overload is cleared. Refer also to <a class="reference internal" href="../trackmanager/index.html"><span class="doc">TrackManager (DCC &amp; DC)</span></a></p>
<p>Note:  AFTEROVERLOAD is only relevant when used within and ONOVERLOAD…. DONE structure.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>track</strong> - - The track to configure, valid options are A to H</p>
<p><hr class="hr-dashed" /></p>
<p>The power calculation routines within <a href="../index.html"><span class="dccex-suffix">DCC-</span><span class="dccex-prefix">EX</span></a> will check for shorts and overloads and will change the state of the power produced by the MotorDriver board to protect both it and locos from damage.  This is usually eveident by the LED’s on the MotorDriver board flashing.  However some users may wish to see some physical notifcation of these events.  This can now be achieved with EXRAIL and the ONOVERLOAD event.</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>This first example shows a warning message to an attached screen with an LED being illuminated to warn the user of the overload.  Once the overload is cleared the AFTEROVERLOAD code is run automatically.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ONOVERLOAD</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="w">       </span><span class="c1">// the EXRAIL statement to control the event.</span>
<span class="w">  </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;OVERLOAD ON TRACK A&quot;</span><span class="p">)</span><span class="w">     </span><span class="c1">// A message to the second screen</span>
<span class="w">  </span><span class="n">PRINT</span><span class="p">(</span><span class="s">&quot;Overload Detected on Track A&quot;</span><span class="p">)</span><span class="w">   </span><span class="c1">// Message to system moniter</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span><span class="w">                                 </span><span class="c1">// Turn on an LED perhaps</span>
<span class="w">  </span><span class="n">AFTEROVERLOAD</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="w">      </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RESTORE A POWER ON&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">PRINT</span><span class="p">(</span><span class="s">&quot;Overload Cleared on A - Power Restored&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">RESET</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span><span class="w">                           </span><span class="c1">// Turn off the LED</span>
<span class="w">      </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="w">      </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;                  &quot;</span><span class="p">)</span><span class="w">   </span><span class="c1">// Clear the screen message</span>
<span class="n">DONE</span>
</pre></div>
</div>
<p>If the user wishes to turn off power whilst he/she investigates the problem, then this can be achieved using the second example below.  POWEROFF can be used, but this will turn off powere to all tracks.  Power to the track with the problem can be turned off with a TrackManager command.  However in order to execute the AFTEROVERLOAD routine it is necessary to have a reset routine.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// This is the event triggered by an overload.  AFTEROVERLOAD cannot be triggered whilst power is OFF.</span>
<span class="n">ONOVERLOAD</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="w">  </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;OVERLOAD A POWEROFF&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">PRINT</span><span class="p">(</span><span class="s">&quot;Overload Detected on A - Turn Off Power&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">NONE</span><span class="p">)</span><span class="w">   </span><span class="c1">// Unsets the TrackManager assignment and turns off power.</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span><span class="w">              </span><span class="c1">// Light the LED</span>
<span class="w">  </span><span class="n">AFTEROVERLOAD</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="w">      </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RESTORE A POWER ON&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">PRINT</span><span class="p">(</span><span class="s">&quot;Overload Cleared on A - Power Restored&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">RESET</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span>
<span class="w">      </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="w">      </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;                  &quot;</span><span class="p">)</span>
<span class="n">DONE</span>

<span class="c1">// The following turns the poweron and allows the AFTEROVERLOAD to run</span>
<span class="c1">// This could also be achieved with a physical button and AFTER(pin) in place of ROUTE()</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="s">&quot;Reset A&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;                  &quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">MAIN</span><span class="p">)</span>
<span class="w">  </span><span class="n">POWERON</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="virtual-block-control">
<h3><a class="toc-backref" href="#id51" role="doc-backlink">Virtual Block Control</a><a class="headerlink" href="#virtual-block-control" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id15">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#reserve-block-id-reserve-a-block" id="id208"><code class="docutils literal notranslate"><span class="pre">RESERVE(</span> <span class="pre">block_id</span> <span class="pre">)</span></code> - Reserve a block</a></p></li>
<li><p><a class="reference internal" href="#free-block-id-free-block" id="id209"><code class="docutils literal notranslate"><span class="pre">FREE(</span> <span class="pre">block_id</span> <span class="pre">)</span></code> - Free block</a></p></li>
<li><p><a class="reference internal" href="#ifreserve-block-execut-commnads-if-block-is-not-reserved" id="id210"><code class="docutils literal notranslate"><span class="pre">IFRESERVE(</span> <span class="pre">block</span> <span class="pre">)</span></code> - Execut commnads if block is NOT reserved</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="reserve-block-id-reserve-a-block">
<span id="reserve"></span><h4><a class="toc-backref" href="#id208" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RESERVE(</span> <span class="pre">block_id</span> <span class="pre">)</span></code> - Reserve a block</a><a class="headerlink" href="#reserve-block-id-reserve-a-block" title="Link to this heading"></a></h4>
<p>Reserve a block (0-255). If already reserved, current loco will STOP and sequence waits for block to become free</p>
<p><em>Parameters:</em> <br /> &gt; <strong>block_id</strong> - Block to reserve (0-255)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="free-block-id-free-block">
<span id="free"></span><h4><a class="toc-backref" href="#id209" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FREE(</span> <span class="pre">block_id</span> <span class="pre">)</span></code> - Free block</a><a class="headerlink" href="#free-block-id-free-block" title="Link to this heading"></a></h4>
<p>Free previously reserved block.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>block_id</strong> - Block to free (0-255)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifreserve-block-execut-commnads-if-block-is-not-reserved">
<span id="ifreserve"></span><h4><a class="toc-backref" href="#id210" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFRESERVE(</span> <span class="pre">block</span> <span class="pre">)</span></code> - Execut commnads if block is NOT reserved</a><a class="headerlink" href="#ifreserve-block-execut-commnads-if-block-is-not-reserved" title="Link to this heading"></a></h4>
<p>If block is NOT reserved, reserves it and run commands in IF block. Otherwise, skip to matching ENDIF</p>
<p><em>Parameters:</em> <br /> &gt; <strong>block_id</strong> - Block to test (0-255)</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="system">
<h2><a class="toc-backref" href="#id52" role="doc-backlink">System</a><a class="headerlink" href="#system" title="Link to this heading"></a></h2>
<section id="communication-and-display-functions">
<h3><a class="toc-backref" href="#id53" role="doc-backlink">Communication and Display Functions</a><a class="headerlink" href="#communication-and-display-functions" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id16">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#lcd-row-msg-write-message-on-lcd-oled" id="id211"><code class="docutils literal notranslate"><span class="pre">LCD(</span> <span class="pre">row,</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Write message on LCD/OLED</a></p></li>
<li><p><a class="reference internal" href="#screen-display-row-msg-writes-a-message-to-a-display" id="id212"><code class="docutils literal notranslate"><span class="pre">SCREEN(</span> <span class="pre">display,</span> <span class="pre">row,</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to a display</a></p></li>
<li><p><a class="reference internal" href="#broadcast-msg-broadcast-to-all-throttles-jmri-on-serial-and-wifi" id="id213"><code class="docutils literal notranslate"><span class="pre">BROADCAST(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Broadcast to all throttles/JMRI on serial and WiFi</a></p></li>
<li><p><a class="reference internal" href="#print-msg-print-diagnostic-message-to-serial-monitor" id="id214"><code class="docutils literal notranslate"><span class="pre">PRINT(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Print diagnostic message to Serial Monitor</a></p></li>
<li><p><a class="reference internal" href="#serial-msg-writes-direct-to-serial" id="id215"><code class="docutils literal notranslate"><span class="pre">SERIAL(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial</a></p></li>
<li><p><a class="reference internal" href="#serial1-msg-writes-direct-to-serial1" id="id216"><code class="docutils literal notranslate"><span class="pre">SERIAL1(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial1</a></p></li>
<li><p><a class="reference internal" href="#serial2-msg-writes-direct-to-serial2" id="id217"><code class="docutils literal notranslate"><span class="pre">SERIAL2(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial2</a></p></li>
<li><p><a class="reference internal" href="#serial3-msg-writes-direct-to-serial3" id="id218"><code class="docutils literal notranslate"><span class="pre">SERIAL3(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial3</a></p></li>
<li><p><a class="reference internal" href="#serial4-msg-writes-direct-to-serial4" id="id219"><code class="docutils literal notranslate"><span class="pre">SERIAL4(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial4</a></p></li>
<li><p><a class="reference internal" href="#serial5-msg-writes-direct-to-serial5" id="id220"><code class="docutils literal notranslate"><span class="pre">SERIAL5(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial5</a></p></li>
<li><p><a class="reference internal" href="#serial6-msg-writes-direct-to-serial6" id="id221"><code class="docutils literal notranslate"><span class="pre">SERIAL6(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial6</a></p></li>
<li><p><a class="reference internal" href="#withrottle-msg-writes-a-message-to-withrottle-clients" id="id222"><code class="docutils literal notranslate"><span class="pre">WITHROTTLE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to WiThrottle clients</a></p></li>
<li><p><a class="reference internal" href="#message-msg-writes-a-message-to-all-clients" id="id223"><code class="docutils literal notranslate"><span class="pre">MESSAGE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to all clients</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="lcd-row-msg-write-message-on-lcd-oled">
<span id="lcd"></span><h4><a class="toc-backref" href="#id211" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">LCD(</span> <span class="pre">row,</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Write message on LCD/OLED</a><a class="headerlink" href="#lcd-row-msg-write-message-on-lcd-oled" title="Link to this heading"></a></h4>
<p>Write message on LCD/OLED, if fitted.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>row</strong> - row of the LED/OLD to write the message <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="screen-display-row-msg-writes-a-message-to-a-display">
<span id="screen"></span><h4><a class="toc-backref" href="#id212" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SCREEN(</span> <span class="pre">display,</span> <span class="pre">row,</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to a display</a><a class="headerlink" href="#screen-display-row-msg-writes-a-message-to-a-display" title="Link to this heading"></a></h4>
<p>Writes a message to the specified display on the specified row.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>display</strong> - which display to write to ??? <br /> &gt; <strong>row</strong> - row of the LED/OLD to write the message <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="broadcast-msg-broadcast-to-all-throttles-jmri-on-serial-and-wifi">
<span id="broadcast"></span><h4><a class="toc-backref" href="#id213" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">BROADCAST(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Broadcast to all throttles/JMRI on serial and WiFi</a><a class="headerlink" href="#broadcast-msg-broadcast-to-all-throttles-jmri-on-serial-and-wifi" title="Link to this heading"></a></h4>
<p>Broadcast to all throttles/JMRI on serial and WiFi</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to broadcast</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="print-msg-print-diagnostic-message-to-serial-monitor">
<span id="print"></span><h4><a class="toc-backref" href="#id214" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PRINT(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Print diagnostic message to Serial Monitor</a><a class="headerlink" href="#print-msg-print-diagnostic-message-to-serial-monitor" title="Link to this heading"></a></h4>
<p>Write a diagnostic message to the Serial Monitor.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial-msg-writes-direct-to-serial">
<span id="serial"></span><h4><a class="toc-backref" href="#id215" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial</a><a class="headerlink" href="#serial-msg-writes-direct-to-serial" title="Link to this heading"></a></h4>
<p>Writes direct to Serial (Serial0/USB)</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial1-msg-writes-direct-to-serial1">
<span id="serial1"></span><h4><a class="toc-backref" href="#id216" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL1(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial1</a><a class="headerlink" href="#serial1-msg-writes-direct-to-serial1" title="Link to this heading"></a></h4>
<p>Writes direct to Serial1.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial2-msg-writes-direct-to-serial2">
<span id="serial2"></span><h4><a class="toc-backref" href="#id217" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL2(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial2</a><a class="headerlink" href="#serial2-msg-writes-direct-to-serial2" title="Link to this heading"></a></h4>
<p>Writes direct to Serial2.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial3-msg-writes-direct-to-serial3">
<span id="serial3"></span><h4><a class="toc-backref" href="#id218" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL3(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial3</a><a class="headerlink" href="#serial3-msg-writes-direct-to-serial3" title="Link to this heading"></a></h4>
<p>Writes direct to Serial3.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial4-msg-writes-direct-to-serial4">
<span id="serial4"></span><h4><a class="toc-backref" href="#id219" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL4(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial4</a><a class="headerlink" href="#serial4-msg-writes-direct-to-serial4" title="Link to this heading"></a></h4>
<p>Writes direct to Serial4.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial5-msg-writes-direct-to-serial5">
<span id="serial5"></span><h4><a class="toc-backref" href="#id220" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL5(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial5</a><a class="headerlink" href="#serial5-msg-writes-direct-to-serial5" title="Link to this heading"></a></h4>
<p>Writes direct to Serial5.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial6-msg-writes-direct-to-serial6">
<span id="serial6"></span><h4><a class="toc-backref" href="#id221" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL6(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial6</a><a class="headerlink" href="#serial6-msg-writes-direct-to-serial6" title="Link to this heading"></a></h4>
<p>Writes direct to Serial6.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="withrottle-msg-writes-a-message-to-withrottle-clients">
<span id="withrottle"></span><h4><a class="toc-backref" href="#id222" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">WITHROTTLE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to WiThrottle clients</a><a class="headerlink" href="#withrottle-msg-writes-a-message-to-withrottle-clients" title="Link to this heading"></a></h4>
<p>Writes a message to WiThrottle clients (alias of <code class="docutils literal notranslate"><span class="pre">PRINT</span></code>)</p>
<p>A a WiThrottle throttle will receive <code class="docutils literal notranslate"><span class="pre">Hmtext</span></code>.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="message-msg-writes-a-message-to-all-clients">
<span id="message"></span><span id="exrail-message"></span><h4><a class="toc-backref" href="#id223" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">MESSAGE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to all clients</a><a class="headerlink" href="#message-msg-writes-a-message-to-all-clients" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p>Writes a message to all serial throttles and all WiThrottle Clients.</p>
<p>A <a href="../index.html"><span class="dccex-suffix">DCC-</span><span class="dccex-prefix">EX</span></a> throttle will receive a broadcast <code class="docutils literal notranslate"><span class="pre">&lt;m</span> <span class="pre">&quot;text&quot;&gt;</span></code>, and a WiThrottle throttle will receive <code class="docutils literal notranslate"><span class="pre">Hmtext</span></code>.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to write</p>
</section>
</section>
<hr class="docutils" />
<section id="commandstation-functions">
<h3><a class="toc-backref" href="#id54" role="doc-backlink">CommandStation Functions</a><a class="headerlink" href="#commandstation-functions" title="Link to this heading"></a></h3>
<nav class="contents in-this-section local" id="id17">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#poweron-power-on-track-and-unjoin" id="id224"><code class="docutils literal notranslate"><span class="pre">POWERON</span></code> - Power on track and UNJOIN</a></p></li>
<li><p><a class="reference internal" href="#poweroff-power-off-track" id="id225"><code class="docutils literal notranslate"><span class="pre">POWEROFF</span></code> - Power off track</a></p></li>
<li><p><a class="reference internal" href="#join-join-prog-and-main-track-outputs" id="id226"><code class="docutils literal notranslate"><span class="pre">JOIN</span></code> - Join PROG and MAIN track outputs</a></p></li>
<li><p><a class="reference internal" href="#unjoin-disconnect-prog-track-from-main" id="id227"><code class="docutils literal notranslate"><span class="pre">UNJOIN</span></code> - Disconnect prog track from main</a></p></li>
<li><p><a class="reference internal" href="#endexrail-tba" id="id228"><code class="docutils literal notranslate"><span class="pre">ENDEXRAIL</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#killall-kills-all-running-ex-r-activities" id="id229"><code class="docutils literal notranslate"><span class="pre">KILLALL</span></code> - Kills all running <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> activities</a></p></li>
<li><p><a class="reference internal" href="#parse-msg-allows-parsing-of-a-dcc-ex-api-command-via-myautomation-h" id="id230"><code class="docutils literal notranslate"><span class="pre">PARSE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Allows parsing of a DCC-EX API command via myAutomation.h</a></p></li>
<li><p><a class="reference internal" href="#disable-prog-disable-programming-to-save-ram-flash" id="id231"><code class="docutils literal notranslate"><span class="pre">DISABLE_PROG</span></code> - Disable programming to save RAM/Flash</a></p></li>
<li><p><a class="reference internal" href="#io-no-hal-reduce-flash-footprint-when-hal-features-not-required" id="id232"><code class="docutils literal notranslate"><span class="pre">IO_NO_HAL</span></code> - Reduce FLASH footprint when HAL features not required</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="poweron-power-on-track-and-unjoin">
<span id="poweron"></span><h4><a class="toc-backref" href="#id224" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">POWERON</span></code> - Power on track and UNJOIN</a><a class="headerlink" href="#poweron-power-on-track-and-unjoin" title="Link to this heading"></a></h4>
<p>Turn the track power on and UNJOIN if currently joined.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="poweroff-power-off-track">
<span id="poweroff"></span><h4><a class="toc-backref" href="#id225" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">POWEROFF</span></code> - Power off track</a><a class="headerlink" href="#poweroff-power-off-track" title="Link to this heading"></a></h4>
<p>Turn the track power off.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="join-join-prog-and-main-track-outputs">
<span id="join"></span><h4><a class="toc-backref" href="#id226" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">JOIN</span></code> - Join PROG and MAIN track outputs</a><a class="headerlink" href="#join-join-prog-and-main-track-outputs" title="Link to this heading"></a></h4>
<p>Join PROG and MAIN track outputs to send the same MAIN DCC signal.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="unjoin-disconnect-prog-track-from-main">
<span id="unjoin"></span><h4><a class="toc-backref" href="#id227" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">UNJOIN</span></code> - Disconnect prog track from main</a><a class="headerlink" href="#unjoin-disconnect-prog-track-from-main" title="Link to this heading"></a></h4>
<p>Disconnect PROG output from MAIN output.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="endexrail-tba">
<span id="endexrail"></span><h4><a class="toc-backref" href="#id228" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ENDEXRAIL</span></code> - TBA</a><a class="headerlink" href="#endexrail-tba" title="Link to this heading"></a></h4>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="killall-kills-all-running-ex-r-activities">
<span id="killall"></span><h4><a class="toc-backref" href="#id229" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">KILLALL</span></code> - Kills all running <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> activities</a><a class="headerlink" href="#killall-kills-all-running-ex-r-activities" title="Link to this heading"></a></h4>
<p>Kills all running <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> activities</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="parse-msg-allows-parsing-of-a-dcc-ex-api-command-via-myautomation-h">
<span id="parse"></span><h4><a class="toc-backref" href="#id230" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PARSE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Allows parsing of a DCC-EX API command via myAutomation.h</a><a class="headerlink" href="#parse-msg-allows-parsing-of-a-dcc-ex-api-command-via-myautomation-h" title="Link to this heading"></a></h4>
<p>Allows parsing of a DCC-EX API command via myAutomation.h.  This allows you to include Native DCC-EX Cammands in myAutomation.h where there is no equivalent EXRAIL command.</p>
<p><em>Parameters:</em> <br /> &gt; <strong>msg</strong> - message to parse</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="disable-prog-disable-programming-to-save-ram-flash">
<span id="disable-prog"></span><h4><a class="toc-backref" href="#id231" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DISABLE_PROG</span></code> - Disable programming to save RAM/Flash</a><a class="headerlink" href="#disable-prog-disable-programming-to-save-ram-flash" title="Link to this heading"></a></h4>
<p>Disable programming to save RAM/Flash.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="io-no-hal-reduce-flash-footprint-when-hal-features-not-required">
<span id="io-no-hal"></span><h4><a class="toc-backref" href="#id232" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IO_NO_HAL</span></code> - Reduce FLASH footprint when HAL features not required</a><a class="headerlink" href="#io-no-hal-reduce-flash-footprint-when-hal-features-not-required" title="Link to this heading"></a></h4>
<p>To reduce FLASH footprint when HAL features not required.</p>
<p>Note: The HAL is disabled by default on Nano and Uno platforms, because of limited flash space.</p>
<p><em>Parameters:</em> <br /> &gt; none</p>
</section>
</section>
<hr class="docutils" />
<section id="layout-command-control-lcc">
<h3><a class="toc-backref" href="#id55" role="doc-backlink">Layout Command Control (LCC)</a><a class="headerlink" href="#layout-command-control-lcc" title="Link to this heading"></a></h3>
<p>The following commands have been introduced to support Layout Command Control (LCC) / CBUS.</p>
<nav class="contents in-this-section local" id="id18">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#onlcc-sender-eventid-tba" id="id233"><code class="docutils literal notranslate"><span class="pre">ONLCC(sender,</span> <span class="pre">eventid)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#lcc-eventid-tba" id="id234"><code class="docutils literal notranslate"><span class="pre">LCC(eventid)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#lccx-senderid-eventid-tba" id="id235"><code class="docutils literal notranslate"><span class="pre">LCCX(senderid,eventid)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#acon-eventid-tba" id="id236"><code class="docutils literal notranslate"><span class="pre">ACON(eventid)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#acof-eventid-tba" id="id237"><code class="docutils literal notranslate"><span class="pre">ACOF(eventid)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#onacon-eventid-tba" id="id238"><code class="docutils literal notranslate"><span class="pre">ONACON(eventid)</span></code> - TBA</a></p></li>
<li><p><a class="reference internal" href="#onacof-eventid-tba" id="id239"><code class="docutils literal notranslate"><span class="pre">ONACOF(eventid)</span></code> - TBA</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="onlcc-sender-eventid-tba">
<span id="onlcc"></span><h4><a class="toc-backref" href="#id233" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONLCC(sender,</span> <span class="pre">eventid)</span></code> - TBA</a><a class="headerlink" href="#onlcc-sender-eventid-tba" title="Link to this heading"></a></h4>
<div class="admonition-todo admonition" id="id19">
<p class="admonition-title">Todo</p>
<p>LOW - EXRAIL doco - ONLCC</p>
</div>
<p><em>Parameters:</em> <br /> &gt; <strong>sender</strong> - TBA <br /> &gt; <strong>eventid</strong> - TBA</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="lcc-eventid-tba">
<span id="lcc"></span><h4><a class="toc-backref" href="#id234" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">LCC(eventid)</span></code> - TBA</a><a class="headerlink" href="#lcc-eventid-tba" title="Link to this heading"></a></h4>
<div class="admonition-todo admonition" id="id20">
<p class="admonition-title">Todo</p>
<p>LOW - EXRAIL doco - LCC</p>
</div>
<p><em>Parameters:</em> <br /> &gt; <strong>eventid</strong> - TBA</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="lccx-senderid-eventid-tba">
<span id="lccx"></span><h4><a class="toc-backref" href="#id235" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">LCCX(senderid,eventid)</span></code> - TBA</a><a class="headerlink" href="#lccx-senderid-eventid-tba" title="Link to this heading"></a></h4>
<div class="admonition-todo admonition" id="id21">
<p class="admonition-title">Todo</p>
<p>LOW - EXRAIL doco - LCCX</p>
</div>
<p><em>Parameters:</em> <br /> &gt; <strong>senderid</strong> - TBA <br /> &gt; <strong>eventid</strong> - TBA</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="acon-eventid-tba">
<span id="acon"></span><h4><a class="toc-backref" href="#id236" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ACON(eventid)</span></code> - TBA</a><a class="headerlink" href="#acon-eventid-tba" title="Link to this heading"></a></h4>
<div class="admonition-todo admonition" id="id22">
<p class="admonition-title">Todo</p>
<p>LOW - EXRAIL doco - ACON</p>
</div>
<p><em>Parameters:</em> <br /> &gt; <strong>eventid</strong> - TBA</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="acof-eventid-tba">
<span id="acof"></span><h4><a class="toc-backref" href="#id237" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ACOF(eventid)</span></code> - TBA</a><a class="headerlink" href="#acof-eventid-tba" title="Link to this heading"></a></h4>
<div class="admonition-todo admonition" id="id23">
<p class="admonition-title">Todo</p>
<p>LOW - EXRAIL doco - ACOF</p>
</div>
<p><em>Parameters:</em> <br /> &gt; <strong>eventid</strong> - TBA</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onacon-eventid-tba">
<span id="onacon"></span><h4><a class="toc-backref" href="#id238" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONACON(eventid)</span></code> - TBA</a><a class="headerlink" href="#onacon-eventid-tba" title="Link to this heading"></a></h4>
<div class="admonition-todo admonition" id="id24">
<p class="admonition-title">Todo</p>
<p>LOW - EXRAIL doco - OACON</p>
</div>
<p><em>Parameters:</em> <br /> &gt; <strong>eventid</strong> - TBA</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onacof-eventid-tba">
<span id="onacof"></span><h4><a class="toc-backref" href="#id239" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONACOF(eventid)</span></code> - TBA</a><a class="headerlink" href="#onacof-eventid-tba" title="Link to this heading"></a></h4>
<div class="admonition-todo admonition" id="id25">
<p class="admonition-title">Todo</p>
<p>LOW - EXRAIL doco - ONACOF</p>
</div>
<p><em>Parameters:</em> <br /> &gt; <strong>eventid</strong> - TBA</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="advanced-engineers-only">
<h2><a class="toc-backref" href="#id56" role="doc-backlink">Advanced (Engineers only)</a><a class="headerlink" href="#advanced-engineers-only" title="Link to this heading"></a></h2>
<section id="caution-required">
<h3><a class="toc-backref" href="#id57" role="doc-backlink">Caution required!</a><a class="headerlink" href="#caution-required" title="Link to this heading"></a></h3>
<p>Any commands in this section are intended for <a class="reference external" href="../begin/levels.html#engineer"><img alt="Engineer Hat" src="../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a> level users that have advanced knowledge of how <a href="../ex-rail/index.html"><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></a> works, and likely some understanding of C++ coding as well.</p>
<p>If you are unsure on the impacts using anything in this section may have, please reach out to the <a href="../index.html"><span class="dccex-suffix">DCC-</span><span class="dccex-prefix">EX</span></a> team via the methods listed on our <a class="reference internal" href="../support/contact-us.html"><span class="doc">Contact Us</span></a> page.</p>
<section id="stealth-code-include-some-c-code-in-a-route-sequence">
<span id="stealth"></span><h4><code class="docutils literal notranslate"><span class="pre">STEALTH(</span> <span class="pre">code</span> <span class="pre">)</span></code> - include some C++ code in a ROUTE/SEQUENCE<a class="headerlink" href="#stealth-code-include-some-c-code-in-a-route-sequence" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p><strong>SERIOUS ENGINEERS and ADVANCED C++ USERS ONLY</strong>   <a class="reference external" href="../begin/levels.html#engineer"><img alt="Engineer Hat" src="../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a></p>
<p>Permits a certain level of C++ code to be embedded as a single step in an EXRAIL sequence.</p>
<p>Please use this option with great care.  If in doubt ask for assistance.</p>
<dl class="simple">
<dt>Syntax:</dt><dd><p>STEALTH( .. C++ code ..)</p>
</dd>
</dl>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// run a routine to free any LATCHES that are left on.</span>
<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>
<span class="w">      </span><span class="n">STEALTH</span><span class="p">(</span><span class="w">  </span><span class="c1">//RESET ANY LATCHES WE TURNED ON</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">255</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">getFlag</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">LATCH_FLAG</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">    </span><span class="c1">//IF LATCH ON</span>
<span class="w">        </span><span class="n">setFlag</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">LATCH_FLAG</span><span class="p">);</span><span class="w">      </span><span class="c1">//RESET LATCH</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">)</span>
<span class="n">RETURN</span>

<span class="n">then</span>
<span class="n">CALL</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">onthrow</span><span class="o">/</span><span class="n">onclose</span><span class="w"> </span><span class="n">sections</span><span class="p">.</span>
</pre></div>
</div>
</details><p><hr class="hr-dashed" /></p>
</section>
<section id="stealth-global-code">
<span id="stealth-global"></span><h4><code class="docutils literal notranslate"><span class="pre">STEALTH_GLOBAL(</span> <span class="pre">code</span> <span class="pre">)</span></code><a class="headerlink" href="#stealth-global-code" title="Link to this heading"></a></h4>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="New In Version 5.4" class="image-min-width-144" src="../_images/new_in_version_5_4.png" style="width: 238.79999999999998px; height: 47.699999999999996px;" /></a></p>
<p><strong>SERIOUS ENGINEERS and ADVANCED C++ USERS ONLY</strong>   <a class="reference external" href="../begin/levels.html#engineer"><img alt="Engineer Hat" src="../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a></p>
<p>Inserts code such as static variables and functions that may be utilised by multiple <code class="docutils literal notranslate"><span class="pre">STEALTH</span></code> operations.</p>
<p>Please use this option with great care, and you will need to be an advanced C++ user to make use of this command.  If in doubt ask for assistance.</p>
</section>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tips.html" class="btn btn-neutral float-left" title="Tips and Techniques" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="about.html" class="btn btn-neutral float-right" title="About and History" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2024 DCC-EX Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   
    <jinja2.runtime.BlockReference object at 0x7f43928340d0>
    <div class="topOfPage">
    <button onclick="document.body.scrollTop=0;document.documentElement.scrollTop=0;" class="topOfPageBtn" id="topOfPageBtn" title="Go to top">Top</button>
    </div>

    <script type="text/javascript">
      <!-- Adds target=_blank to external links -->

      $(document).ready(function () {
        $('a[href^="http://"], a[href^="https://"]').not('a[class*=internal]').not('a[href^="https://dcc-ex.com/"]').attr('target', '_blank');
      });
    </script>
  

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>